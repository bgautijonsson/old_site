<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-0.9.619">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Brynjólfur Gauti Guðrúnar Jónsson">
<meta name="dcterms.date" content="2022-06-26">
<meta name="description" content="Íslenska Kosningarannsóknin er framkvæmd af Félagsvísindastofnun Háskóla Íslands, og mér finnst vinnan sem fer fram þar hreint út sagt frábær og upplýsingar um gögnin vel skipulagðar, enda eina sviðið sem ég veit að sé með eigin RStudio server innanhúss!">

<title>Brynjólfur Gauti Guðrúnar Jónsson - Kjósendatryggð</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
span.underline{text-decoration: underline;}
div.column{display: inline-block; vertical-align: top; width: 50%;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<script src="../../site_libs/quarto-html/quarto.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit"
  }
}</script>
<script src="../../site_libs/htmlwidgets-1.5.4/htmlwidgets.js"></script>
<script src="../../site_libs/plotly-binding-4.10.0/plotly.js"></script>
<script src="../../site_libs/typedarray-0.1/typedarray.min.js"></script>
<script src="../../site_libs/jquery-3.5.1/jquery.min.js"></script>
<link href="../../site_libs/crosstalk-1.2.0/css/crosstalk.min.css" rel="stylesheet">
<script src="../../site_libs/crosstalk-1.2.0/js/crosstalk.min.js"></script>
<link href="../../site_libs/plotly-htmlwidgets-css-2.5.1/plotly-htmlwidgets.css" rel="stylesheet">
<script src="../../site_libs/plotly-main-2.5.1/plotly-latest.min.js"></script>


<link rel="stylesheet" href="../../styles.css">
<meta name="twitter:title" content="Brynjólfur Gauti Guðrúnar Jónsson - Kjósendatryggð">
<meta name="twitter:description" content="Íslenska Kosningarannsóknin er framkvæmd af Félagsvísindastofnun Háskóla Íslands, og mér finnst vinnan sem fer fram þar hreint út sagt frábær og upplýsingar um gögnin vel skipulagðar, enda eina sviðið sem ég veit að sé með eigin RStudio server innanhúss!">
<meta name="twitter:image" content="https://www.bggj.is/posts/kosningarannsokn/flokkshollusta.png">
<meta name="twitter:creator" content="@bgautijonsson">
<meta name="twitter:image-height" content="1560">
<meta name="twitter:image-width" content="3120">
<meta name="twitter:card" content="summary_large_image">
</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <a class="navbar-brand" href="../../index.html">
    <span class="navbar-title">Brynjólfur Gauti Guðrúnar Jónsson</span>
  </a>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../about.html">Um mig</a>
  </li>  
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-verkefni" role="button" data-bs-toggle="dropdown" aria-expanded="false">Verkefni</a>
    <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="nav-menu-verkefni">    
        <li>
    <a class="dropdown-item" href="../../sveitarfelog_maelabord.html">
 <span class="dropdown-text">Mælaborð Sveitarfélaga</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="http://covid.rhi.hi.is/shiny/dashboard/">
 <span class="dropdown-text">Mælaborð COVID-19</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../covid_spalikan.html">
 <span class="dropdown-text">Spálíkan COVID-19</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/bgautijonsson"><i class="bi bi-github" role="img">
</i> 
 </a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://twitter.com/bgautijonsson"><i class="bi bi-twitter" role="img">
</i> 
 </a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="../../index.xml"><i class="bi bi-rss" role="img">
</i> 
 </a>
  </li>  
</ul>
              <div id="quarto-search" class="" title="Search"></div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<header id="title-block-header" class="quarto-title-block default page-columns page-full">
  <div class="quarto-title-banner page-columns page-full">
    <div class="quarto-title column-page">
      <h1 class="title">Kjósendatryggð</h1>
            <p class="subtitle lead">Hvert missa flokkar kjósendur sína og hvaðan sækja þeir nýja?</p>
                  <div>
        <div class="description">
          <p>Íslenska Kosningarannsóknin er framkvæmd af Félagsvísindastofnun Háskóla Íslands, og mér finnst vinnan sem fer fram þar hreint út sagt frábær og upplýsingar um gögnin vel skipulagðar, enda eina sviðið sem ég veit að sé með eigin RStudio server innanhúss!</p>
        </div>
      </div>
                          <div class="quarto-categories">
                <div class="quarto-category">R</div>
                <div class="quarto-category">kosningar</div>
              </div>
                  </div>
  </div>
    
  <div class="quarto-title-meta-author">
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-heading">Affiliation</div>
    
      <div class="quarto-title-meta-contents">
      <a href="https://twitter.com/bgautijonsson">Brynjólfur Gauti Guðrúnar Jónsson</a> 
    </div>
      <div class="quarto-title-meta-contents">
          <p class="affiliation">
              <a href="https://www.hi.is/tolfraedi_0">
              Tölfræði, Raunvísindadeild Háskóla Íslands
              </a>
            </p>
        </div>
      </div>

  <div class="quarto-title-meta">

        
      <div>
      <div class="quarto-title-meta-heading">Published</div>
      <div class="quarto-title-meta-contents">
        <p class="date">June 26, 2022</p>
      </div>
    </div>
      
    </div>
    
  
  </header><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-full page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
    </div>
<!-- main -->
<main class="content quarto-banner-title-block column-page" id="quarto-document-content">



<nav id="TOC" role="doc-toc">
    <h2 id="toc-title">Efnisyfirlit</h2>
   
  <ul>
  <li><a href="#hvert-fara-atkvæðin" id="toc-hvert-fara-atkvæðin">Hvert fara atkvæðin?</a>
  <ul>
  <li><a href="#útbúa-gögnin" id="toc-útbúa-gögnin">Útbúa gögnin</a>
  <ul>
  <li><a href="#litir-flokkanna" id="toc-litir-flokkanna">Litir flokkanna</a></li>
  </ul></li>
  <li><a href="#kjósendatryggð" id="toc-kjósendatryggð">Kjósendatryggð</a></li>
  <li><a href="#hvert-missa-flokkar-kjósendur-sína" id="toc-hvert-missa-flokkar-kjósendur-sína">Hvert missa flokkar kjósendur sína?</a></li>
  </ul></li>
  <li><a href="#hvaðan-koma-atkvæðin" id="toc-hvaðan-koma-atkvæðin">Hvaðan koma atkvæðin?</a>
  <ul>
  <li><a href="#útbúa-gögnin-1" id="toc-útbúa-gögnin-1">Útbúa gögnin</a></li>
  <li><a href="#nýliðun-frá-öðrum-flokkum" id="toc-nýliðun-frá-öðrum-flokkum">Nýliðun frá öðrum flokkum</a></li>
  <li><a href="#hvaðan-sækja-flokkar-kjósendur-sína" id="toc-hvaðan-sækja-flokkar-kjósendur-sína">Hvaðan sækja flokkar kjósendur sína?</a></li>
  </ul></li>
  <li><a href="#aldursdreifing-kjósenda" id="toc-aldursdreifing-kjósenda">Aldursdreifing kjósenda</a></li>
  <li><a href="#heimildir" id="toc-heimildir">Heimildir</a></li>
  </ul>
</nav>
<section id="hvert-fara-atkvæðin" class="level1">
<h1>Hvert fara atkvæðin?</h1>
<p>Íslenska Kosningarannsóknin er framkvæmd af Félagsvísindastofnun Háskóla Íslands, og mér finnst vinnan sem fer fram þar hreint út sagt frábær og upplýsingar um gögnin vel skipulagðar, enda eina sviðið sem ég veit að sé með eigin RStudio server innanhúss!</p>
<p>Þessi úrvinnsla byggir á Íslensku Kosningarannsókninni sem er framkvæmd af Félagsvísindastofnun Háskóla Íslands eftir alþingiskosninar. <a href="https://fel.hi.is/is/notendaskilmalar-gagnis">Notendaskilmálar GAGNÍS</a>.</p>
<section id="útbúa-gögnin" class="level2">
<h2 class="anchored" data-anchor-id="útbúa-gögnin">Útbúa gögnin</h2>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a>preprocess_data_attrition <span class="ot">&lt;-</span> <span class="cf">function</span>(doi, filename, year) {</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">get_dataframe_by_name</span>(filename,</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a>                          doi,</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a>                          <span class="at">original =</span> <span class="cn">TRUE</span>,</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a>                          <span class="at">.f =</span> haven<span class="sc">::</span>read_sav) <span class="sc">|&gt;</span> </span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a>        <span class="fu">select</span>(<span class="at">current =</span> <span class="fu">starts_with</span>(<span class="st">"prtvote"</span>), <span class="at">former =</span> <span class="fu">starts_with</span>(<span class="st">"prtfvote"</span>), age) <span class="sc">|&gt;</span> </span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a>        <span class="fu">mutate_at</span>(<span class="fu">vars</span>(<span class="fu">everything</span>(), <span class="sc">-</span>age), as_factor) <span class="sc">|&gt;</span> </span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a>        <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">as.character</span>(current) <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"No, did not vote"</span>,</span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a>                                             <span class="st">"Not applicable"</span>,</span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a>                                             <span class="st">"Don‘t remember what I voted"</span>,</span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a>                                             <span class="st">"95"</span>,</span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a>                                             <span class="st">"Cast a blank or invalid ballot"</span>,</span>
<span id="cb1-13"><a href="#cb1-13" aria-hidden="true" tabindex="-1"></a>                                             <span class="st">"Voted, refuses to say for what party"</span>,</span>
<span id="cb1-14"><a href="#cb1-14" aria-hidden="true" tabindex="-1"></a>                                             <span class="st">"Other party, what party"</span>,</span>
<span id="cb1-15"><a href="#cb1-15" aria-hidden="true" tabindex="-1"></a>                                             <span class="st">"Refuses to answer (volunteered)"</span>,</span>
<span id="cb1-16"><a href="#cb1-16" aria-hidden="true" tabindex="-1"></a>                                             <span class="st">"Don’t know (volunteered)"</span>,</span>
<span id="cb1-17"><a href="#cb1-17" aria-hidden="true" tabindex="-1"></a>                                             <span class="st">"Voted, does not want to say which party"</span>,</span>
<span id="cb1-18"><a href="#cb1-18" aria-hidden="true" tabindex="-1"></a>                                             <span class="st">"Cast a blank ballot"</span>,</span>
<span id="cb1-19"><a href="#cb1-19" aria-hidden="true" tabindex="-1"></a>                                             <span class="st">"Cast an invalid vote"</span>,</span>
<span id="cb1-20"><a href="#cb1-20" aria-hidden="true" tabindex="-1"></a>                                             <span class="st">"Missing"</span>,</span>
<span id="cb1-21"><a href="#cb1-21" aria-hidden="true" tabindex="-1"></a>                                             <span class="st">"Voted, doesn‘t want to say for what party"</span>,</span>
<span id="cb1-22"><a href="#cb1-22" aria-hidden="true" tabindex="-1"></a>                                             <span class="st">"Another party or party list, which?"</span>,</span>
<span id="cb1-23"><a href="#cb1-23" aria-hidden="true" tabindex="-1"></a>                                             <span class="st">"Refuses to answer"</span>)) <span class="sc">|&gt;</span> </span>
<span id="cb1-24"><a href="#cb1-24" aria-hidden="true" tabindex="-1"></a>        <span class="fu">drop_na</span>(current) <span class="sc">|&gt;</span> </span>
<span id="cb1-25"><a href="#cb1-25" aria-hidden="true" tabindex="-1"></a>        <span class="fu">group_by</span>(current, former) <span class="sc">|&gt;</span> </span>
<span id="cb1-26"><a href="#cb1-26" aria-hidden="true" tabindex="-1"></a>        <span class="fu">summarise</span>(<span class="at">n =</span> <span class="fu">n</span>(),</span>
<span id="cb1-27"><a href="#cb1-27" aria-hidden="true" tabindex="-1"></a>                  <span class="at">age =</span> <span class="fu">mean</span>(age),</span>
<span id="cb1-28"><a href="#cb1-28" aria-hidden="true" tabindex="-1"></a>                  <span class="at">.groups =</span> <span class="st">"drop"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb1-29"><a href="#cb1-29" aria-hidden="true" tabindex="-1"></a>        <span class="fu">arrange</span>(former, <span class="fu">desc</span>(n)) <span class="sc">|&gt;</span> </span>
<span id="cb1-30"><a href="#cb1-30" aria-hidden="true" tabindex="-1"></a>        <span class="fu">group_by</span>(former) <span class="sc">|&gt;</span> </span>
<span id="cb1-31"><a href="#cb1-31" aria-hidden="true" tabindex="-1"></a>        <span class="fu">mutate</span>(<span class="at">p =</span> n <span class="sc">/</span> <span class="fu">sum</span>(n),</span>
<span id="cb1-32"><a href="#cb1-32" aria-hidden="true" tabindex="-1"></a>               <span class="at">cum_p =</span> <span class="fu">cumsum</span>(p)) <span class="sc">|&gt;</span> </span>
<span id="cb1-33"><a href="#cb1-33" aria-hidden="true" tabindex="-1"></a>        <span class="fu">ungroup</span>() <span class="sc">|&gt;</span> </span>
<span id="cb1-34"><a href="#cb1-34" aria-hidden="true" tabindex="-1"></a>        <span class="fu">mutate</span>(<span class="at">year =</span> year)</span>
<span id="cb1-35"><a href="#cb1-35" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb1-36"><a href="#cb1-36" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-37"><a href="#cb1-37" aria-hidden="true" tabindex="-1"></a>translate_parties <span class="ot">&lt;-</span> <span class="cf">function</span>(name) {</span>
<span id="cb1-38"><a href="#cb1-38" aria-hidden="true" tabindex="-1"></a>    parties <span class="ot">&lt;-</span> <span class="fu">c</span>(</span>
<span id="cb1-39"><a href="#cb1-39" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Independence Party"</span> <span class="ot">=</span> <span class="st">"Sjálfstæðisflokkurinn"</span>,</span>
<span id="cb1-40"><a href="#cb1-40" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Progressive Party"</span> <span class="ot">=</span> <span class="st">"Framsóknarflokkurinn"</span>,</span>
<span id="cb1-41"><a href="#cb1-41" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Social Democratic Alliance"</span> <span class="ot">=</span> <span class="st">"Samfylkingin"</span>,</span>
<span id="cb1-42"><a href="#cb1-42" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Left Green Movement"</span> <span class="ot">=</span> <span class="st">"Vinstri Græn"</span>,</span>
<span id="cb1-43"><a href="#cb1-43" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Pirate Party"</span> <span class="ot">=</span> <span class="st">"Píratar"</span>,</span>
<span id="cb1-44"><a href="#cb1-44" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Reform Party"</span> <span class="ot">=</span> <span class="st">"Viðreisn"</span>,</span>
<span id="cb1-45"><a href="#cb1-45" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Centre Party"</span> <span class="ot">=</span> <span class="st">"Miðflokkurinn"</span>,</span>
<span id="cb1-46"><a href="#cb1-46" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Bright Future"</span> <span class="ot">=</span> <span class="st">"Björt Framtíð"</span>,</span>
<span id="cb1-47"><a href="#cb1-47" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Peoples party"</span> <span class="ot">=</span> <span class="st">"Flokkur Fólksins"</span>,</span>
<span id="cb1-48"><a href="#cb1-48" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Civic Movement"</span> <span class="ot">=</span> <span class="st">"Borgarahreyfingin"</span>,</span>
<span id="cb1-49"><a href="#cb1-49" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Dawn"</span> <span class="ot">=</span> <span class="st">"Dögun"</span>,</span>
<span id="cb1-50"><a href="#cb1-50" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Liberal Party"</span> <span class="ot">=</span> <span class="st">"Frjálslyndi flokkurinn"</span>,</span>
<span id="cb1-51"><a href="#cb1-51" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Cast a blank or invalid ballot"</span> <span class="ot">=</span> <span class="st">"Skilaði auðu"</span>,</span>
<span id="cb1-52"><a href="#cb1-52" aria-hidden="true" tabindex="-1"></a>        <span class="st">"95"</span> <span class="ot">=</span> <span class="st">"Nýr kjósandi"</span></span>
<span id="cb1-53"><a href="#cb1-53" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb1-54"><a href="#cb1-54" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb1-55"><a href="#cb1-55" aria-hidden="true" tabindex="-1"></a>    <span class="fu">ifelse</span>(name <span class="sc">%in%</span> <span class="fu">names</span>(parties), parties[name], name)</span>
<span id="cb1-56"><a href="#cb1-56" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>doi <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"doi:10.34881/1.00011"</span>, </span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>         <span class="st">"doi:10.34881/1.00010"</span>,</span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>         <span class="st">"doi:10.34881/1.00009"</span>,</span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a>         <span class="st">"doi:10.34881/1.00008"</span>,</span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a>         <span class="st">"doi:10.34881/1.00007"</span>,</span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a>         <span class="st">"doi:10.34881/1.00006"</span>)</span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a>filename <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"ICENES_2017_Open_access_english_1release.tab"</span>,</span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a>              <span class="st">"ICENES_2016_Open_access_english_2release.tab"</span>,</span>
<span id="cb2-9"><a href="#cb2-9" aria-hidden="true" tabindex="-1"></a>              <span class="st">"ICENESS_2013_open_access_english_1release.tab"</span>,</span>
<span id="cb2-10"><a href="#cb2-10" aria-hidden="true" tabindex="-1"></a>              <span class="st">"ICENES_2009_open_access_english_3release.tab"</span>,</span>
<span id="cb2-11"><a href="#cb2-11" aria-hidden="true" tabindex="-1"></a>              <span class="st">"ICENES_2007_open_access_english_3release.tab"</span>,</span>
<span id="cb2-12"><a href="#cb2-12" aria-hidden="true" tabindex="-1"></a>              <span class="st">"ICENES_2003_open_access_english_4release.tab"</span>)</span>
<span id="cb2-13"><a href="#cb2-13" aria-hidden="true" tabindex="-1"></a>year <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">2017</span>,</span>
<span id="cb2-14"><a href="#cb2-14" aria-hidden="true" tabindex="-1"></a>          <span class="dv">2016</span>,</span>
<span id="cb2-15"><a href="#cb2-15" aria-hidden="true" tabindex="-1"></a>          <span class="dv">2013</span>,</span>
<span id="cb2-16"><a href="#cb2-16" aria-hidden="true" tabindex="-1"></a>          <span class="dv">2009</span>,</span>
<span id="cb2-17"><a href="#cb2-17" aria-hidden="true" tabindex="-1"></a>          <span class="dv">2007</span>,</span>
<span id="cb2-18"><a href="#cb2-18" aria-hidden="true" tabindex="-1"></a>          <span class="dv">2003</span>)</span>
<span id="cb2-19"><a href="#cb2-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-20"><a href="#cb2-20" aria-hidden="true" tabindex="-1"></a>d_retention <span class="ot">&lt;-</span> <span class="fu">pmap</span>(<span class="fu">list</span>(<span class="at">doi =</span> doi, <span class="at">filename =</span> filename, <span class="at">year =</span> year), preprocess_data_attrition) <span class="sc">|&gt;</span> </span>
<span id="cb2-21"><a href="#cb2-21" aria-hidden="true" tabindex="-1"></a>    <span class="fu">reduce</span>(bind_rows) <span class="sc">|&gt;</span> </span>
<span id="cb2-22"><a href="#cb2-22" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate_at</span>(<span class="fu">vars</span>(current, former), as.character) <span class="sc">|&gt;</span> </span>
<span id="cb2-23"><a href="#cb2-23" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate_at</span>(<span class="fu">vars</span>(current, former), translate_parties)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<section id="litir-flokkanna" class="level3">
<h3 class="anchored" data-anchor-id="litir-flokkanna">Litir flokkanna</h3>
<p>Til að auðvelda mér að merkja flokkana með réttum litum geymi ég hex kóða fyrir litina þeirra og set þá svo inn í litapallettur þar sem við á.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a>xS <span class="ot">&lt;-</span> <span class="st">"#e41a1c"</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>xV <span class="ot">&lt;-</span> <span class="st">"#238b45"</span></span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a>xD <span class="ot">&lt;-</span> <span class="st">"#377eb8"</span></span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a>xP <span class="ot">&lt;-</span> <span class="st">"#984ea3"</span></span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a>xB <span class="ot">&lt;-</span> <span class="st">"#b2df8a"</span></span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a>xBF <span class="ot">&lt;-</span> <span class="st">"#cab2d6"</span></span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a>xC <span class="ot">&lt;-</span> <span class="st">"#ff7f00"</span></span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a>xM <span class="ot">&lt;-</span> <span class="st">"#08306b"</span></span>
<span id="cb3-9"><a href="#cb3-9" aria-hidden="true" tabindex="-1"></a>xFF <span class="ot">&lt;-</span> <span class="st">"#fee391"</span></span>
<span id="cb3-10"><a href="#cb3-10" aria-hidden="true" tabindex="-1"></a>Annad <span class="ot">&lt;-</span> <span class="st">"#e5d8bd"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section>
</section>
<section id="kjósendatryggð" class="level2">
<h2 class="anchored" data-anchor-id="kjósendatryggð">Kjósendatryggð</h2>
<p>Þátttakendur eru m.a. spurðir hvað þau kusu í nýliðnum kosningum en líka hvað þau kusu þar á undan. Þótt svör við slíkum spurningum séu ekki 100% áreiðanleg getum við nálgað svör við spurningunni:</p>
<p>“Hvaða % kjósenda flokks úr síðustu kosningum kaus hann aftur núna?”</p>
<div class="cell" data-fig.asp="0.5">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>plot_dat <span class="ot">&lt;-</span> d_retention <span class="sc">|&gt;</span> </span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">filter</span>(current <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"Framsóknarflokkurinn"</span>,</span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a>                          <span class="st">"Píratar"</span>,</span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a>                          <span class="st">"Samfylkingin"</span>,</span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a>                          <span class="st">"Sjálfstæðisflokkurinn"</span>,</span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a>                          <span class="st">"Vinstri Græn"</span>),</span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true" tabindex="-1"></a>           current <span class="sc">==</span> former)</span>
<span id="cb4-8"><a href="#cb4-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-9"><a href="#cb4-9" aria-hidden="true" tabindex="-1"></a>plot_text <span class="ot">&lt;-</span> plot_dat <span class="sc">|&gt;</span> </span>
<span id="cb4-10"><a href="#cb4-10" aria-hidden="true" tabindex="-1"></a>    <span class="fu">filter</span>(year <span class="sc">==</span> <span class="fu">max</span>(year)) <span class="sc">|&gt;</span> </span>
<span id="cb4-11"><a href="#cb4-11" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">p =</span> <span class="fu">case_when</span>(current <span class="sc">==</span> <span class="st">"Píratar"</span> <span class="sc">~</span> p <span class="sc">+</span> <span class="fl">0.005</span>,</span>
<span id="cb4-12"><a href="#cb4-12" aria-hidden="true" tabindex="-1"></a>                         current <span class="sc">==</span> <span class="st">"Framsóknarflokkurinn"</span> <span class="sc">~</span> p <span class="sc">-</span> <span class="fl">0.005</span>,</span>
<span id="cb4-13"><a href="#cb4-13" aria-hidden="true" tabindex="-1"></a>                         current <span class="sc">==</span> <span class="st">"Samfylkingin"</span> <span class="sc">~</span> p <span class="sc">+</span> <span class="fl">0.00</span>,</span>
<span id="cb4-14"><a href="#cb4-14" aria-hidden="true" tabindex="-1"></a>                         <span class="cn">TRUE</span> <span class="sc">~</span> p))</span>
<span id="cb4-15"><a href="#cb4-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-16"><a href="#cb4-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-17"><a href="#cb4-17" aria-hidden="true" tabindex="-1"></a>p <span class="ot">&lt;-</span> plot_dat <span class="sc">|&gt;</span> </span>
<span id="cb4-18"><a href="#cb4-18" aria-hidden="true" tabindex="-1"></a>    <span class="fu">ggplot</span>(<span class="fu">aes</span>(year, p)) <span class="sc">+</span></span>
<span id="cb4-19"><a href="#cb4-19" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_line</span>(<span class="fu">aes</span>(<span class="at">col =</span> current, <span class="at">group =</span> current)) <span class="sc">+</span></span>
<span id="cb4-20"><a href="#cb4-20" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">col =</span> current, <span class="at">group =</span> current)) <span class="sc">+</span></span>
<span id="cb4-21"><a href="#cb4-21" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_text</span>(<span class="at">data =</span> plot_text, </span>
<span id="cb4-22"><a href="#cb4-22" aria-hidden="true" tabindex="-1"></a>              <span class="fu">aes</span>(<span class="at">label =</span> current, <span class="at">col =</span> current), <span class="at">hjust =</span> <span class="dv">0</span>, <span class="at">nudge_x =</span> <span class="fl">0.2</span>) <span class="sc">+</span></span>
<span id="cb4-23"><a href="#cb4-23" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_rangeframe</span>() <span class="sc">+</span></span>
<span id="cb4-24"><a href="#cb4-24" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scale_y_continuous</span>(<span class="at">limits =</span> <span class="fu">range</span>(plot_dat<span class="sc">$</span>p), </span>
<span id="cb4-25"><a href="#cb4-25" aria-hidden="true" tabindex="-1"></a>                       <span class="at">labels =</span> <span class="fu">label_percent</span>(),</span>
<span id="cb4-26"><a href="#cb4-26" aria-hidden="true" tabindex="-1"></a>                       <span class="at">breaks =</span> <span class="fu">c</span>(<span class="fu">range</span>(plot_dat<span class="sc">$</span>p), <span class="fl">0.4</span>, <span class="fl">0.5</span>, <span class="fl">0.6</span>, <span class="fl">0.7</span>)) <span class="sc">+</span></span>
<span id="cb4-27"><a href="#cb4-27" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scale_x_continuous</span>(<span class="at">breaks =</span> <span class="fu">c</span>(<span class="dv">2003</span>, <span class="dv">2007</span>, <span class="dv">2009</span>, <span class="dv">2013</span>, <span class="dv">2016</span>, <span class="dv">2017</span>),</span>
<span id="cb4-28"><a href="#cb4-28" aria-hidden="true" tabindex="-1"></a>                       <span class="at">limits =</span> <span class="fu">c</span>(<span class="dv">2003</span>, <span class="dv">2020</span>)) <span class="sc">+</span></span>
<span id="cb4-29"><a href="#cb4-29" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scale_colour_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(xB,</span>
<span id="cb4-30"><a href="#cb4-30" aria-hidden="true" tabindex="-1"></a>                                   xP,</span>
<span id="cb4-31"><a href="#cb4-31" aria-hidden="true" tabindex="-1"></a>                                   xS,</span>
<span id="cb4-32"><a href="#cb4-32" aria-hidden="true" tabindex="-1"></a>                                   xD,</span>
<span id="cb4-33"><a href="#cb4-33" aria-hidden="true" tabindex="-1"></a>                                   xV)) <span class="sc">+</span></span>
<span id="cb4-34"><a href="#cb4-34" aria-hidden="true" tabindex="-1"></a>    <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Flokkshollusta í alþingiskosningum frá 2003 - 2017"</span>,</span>
<span id="cb4-35"><a href="#cb4-35" aria-hidden="true" tabindex="-1"></a>         <span class="at">subtitle =</span> <span class="st">"Hlutfall eigin kjósenda sem flokkur heldur í frá síðustu kosningum"</span>,</span>
<span id="cb4-36"><a href="#cb4-36" aria-hidden="true" tabindex="-1"></a>         <span class="at">x =</span> <span class="cn">NULL</span>,</span>
<span id="cb4-37"><a href="#cb4-37" aria-hidden="true" tabindex="-1"></a>         <span class="at">y =</span> <span class="cn">NULL</span>) <span class="sc">+</span></span>
<span id="cb4-38"><a href="#cb4-38" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme_tufte</span>() <span class="sc">+</span></span>
<span id="cb4-39"><a href="#cb4-39" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme</span>(<span class="at">plot.caption =</span> <span class="fu">element_text</span>(<span class="at">hjust =</span> <span class="dv">0</span>),</span>
<span id="cb4-40"><a href="#cb4-40" aria-hidden="true" tabindex="-1"></a>          <span class="at">legend.position =</span> <span class="st">"none"</span>,</span>
<span id="cb4-41"><a href="#cb4-41" aria-hidden="true" tabindex="-1"></a>          <span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">face =</span> <span class="st">"bold"</span>))</span>
<span id="cb4-42"><a href="#cb4-42" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-43"><a href="#cb4-43" aria-hidden="true" tabindex="-1"></a>p</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img src="index_files/figure-html/unnamed-chunk-5-1.png" class="img-fluid" style="width:100.0%"></p>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggsave</span>(<span class="at">plot =</span> p, <span class="at">filename =</span> <span class="st">"flokkshollusta.png"</span>,</span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>       <span class="at">width =</span> <span class="dv">8</span>, <span class="at">height =</span> <span class="fl">0.5</span> <span class="sc">*</span> <span class="dv">8</span>, <span class="at">scale =</span> <span class="fl">1.3</span>, <span class="at">bg =</span> <span class="st">"white"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section>
<section id="hvert-missa-flokkar-kjósendur-sína" class="level2">
<h2 class="anchored" data-anchor-id="hvert-missa-flokkar-kjósendur-sína">Hvert missa flokkar kjósendur sína?</h2>
<div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-1-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-1" role="tab" aria-controls="tabset-1-1" aria-selected="true">Samfylkingin</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-1-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-2" role="tab" aria-controls="tabset-1-2" aria-selected="false">Sjálfstæðisflokkurinn</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-1-3-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-3" role="tab" aria-controls="tabset-1-3" aria-selected="false">Framsóknarflokkurinn</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-1-4-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-4" role="tab" aria-controls="tabset-1-4" aria-selected="false">Vinstri Græn</a></li></ul>
<div class="tab-content">
<div id="tabset-1-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-1-1-tab">
<div class="cell" data-fig.asp="0.5">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>p <span class="ot">&lt;-</span> d_retention <span class="sc">|&gt;</span> </span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">filter</span>(former <span class="sc">==</span> <span class="st">"Samfylkingin"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">current =</span> <span class="fu">ifelse</span>(current <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"Samfylkingin"</span>,</span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a>                                           <span class="st">"Vinstri Græn"</span>,</span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a>                                           <span class="st">"Sjálfstæðisflokkurinn"</span>, </span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a>                                           <span class="st">"Píratar"</span>,</span>
<span id="cb6-7"><a href="#cb6-7" aria-hidden="true" tabindex="-1"></a>                                           <span class="st">"Framsóknarflokkurinn"</span>, </span>
<span id="cb6-8"><a href="#cb6-8" aria-hidden="true" tabindex="-1"></a>                                           <span class="st">"Píratar"</span>,</span>
<span id="cb6-9"><a href="#cb6-9" aria-hidden="true" tabindex="-1"></a>                                           <span class="st">"Björt Framtíð"</span>,</span>
<span id="cb6-10"><a href="#cb6-10" aria-hidden="true" tabindex="-1"></a>                                           <span class="st">"Viðreisn"</span>,</span>
<span id="cb6-11"><a href="#cb6-11" aria-hidden="true" tabindex="-1"></a>                                           <span class="st">"Miðflokkurinn"</span>,</span>
<span id="cb6-12"><a href="#cb6-12" aria-hidden="true" tabindex="-1"></a>                                           <span class="st">"Flokkur Fólksins"</span>),</span>
<span id="cb6-13"><a href="#cb6-13" aria-hidden="true" tabindex="-1"></a>                            current,</span>
<span id="cb6-14"><a href="#cb6-14" aria-hidden="true" tabindex="-1"></a>                            <span class="st">"Annað"</span>)) <span class="sc">|&gt;</span> </span>
<span id="cb6-15"><a href="#cb6-15" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">current =</span> <span class="fu">as_factor</span>(current),</span>
<span id="cb6-16"><a href="#cb6-16" aria-hidden="true" tabindex="-1"></a>           <span class="at">current =</span> <span class="fu">fct_reorder</span>(current, p <span class="sc">*</span> (current <span class="sc">!=</span> <span class="st">"Annað"</span>), <span class="at">.fun =</span> max)) <span class="sc">|&gt;</span> </span>
<span id="cb6-17"><a href="#cb6-17" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">election =</span> <span class="fu">as.numeric</span>(<span class="fu">as.factor</span>(year)),</span>
<span id="cb6-18"><a href="#cb6-18" aria-hidden="true" tabindex="-1"></a>           <span class="at">text =</span> <span class="fu">str_c</span>(<span class="st">"Kaus síðast: "</span>, former, <span class="st">"</span><span class="sc">\n</span><span class="st">"</span>,</span>
<span id="cb6-19"><a href="#cb6-19" aria-hidden="true" tabindex="-1"></a>                        <span class="st">"Kaus nú: "</span>, current, <span class="st">"</span><span class="sc">\n</span><span class="st">"</span>,</span>
<span id="cb6-20"><a href="#cb6-20" aria-hidden="true" tabindex="-1"></a>                        <span class="st">"Hlutfall (af kjósendum síðast): "</span>, <span class="fu">percent</span>(p, <span class="at">accuracy =</span> <span class="fl">0.1</span>))) <span class="sc">|&gt;</span></span>
<span id="cb6-21"><a href="#cb6-21" aria-hidden="true" tabindex="-1"></a>    <span class="fu">ggplot</span>(<span class="fu">aes</span>(election, p, <span class="at">text =</span> text)) <span class="sc">+</span></span>
<span id="cb6-22"><a href="#cb6-22" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_col</span>(<span class="fu">aes</span>(<span class="at">fill =</span> current), <span class="at">position =</span> <span class="st">"stack"</span>, <span class="at">width =</span> <span class="dv">1</span>, <span class="at">alpha =</span> <span class="fl">0.7</span>) <span class="sc">+</span></span>
<span id="cb6-23"><a href="#cb6-23" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scale_x_continuous</span>(<span class="at">breaks =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">6</span>, <span class="at">labels =</span> <span class="fu">rev</span>(<span class="fu">unique</span>(d_retention<span class="sc">$</span>year))) <span class="sc">+</span></span>
<span id="cb6-24"><a href="#cb6-24" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scale_y_continuous</span>(<span class="at">labels =</span> <span class="fu">label_percent</span>()) <span class="sc">+</span></span>
<span id="cb6-25"><a href="#cb6-25" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scale_fill_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(Annad,</span>
<span id="cb6-26"><a href="#cb6-26" aria-hidden="true" tabindex="-1"></a>                                 xFF,</span>
<span id="cb6-27"><a href="#cb6-27" aria-hidden="true" tabindex="-1"></a>                                 xM,</span>
<span id="cb6-28"><a href="#cb6-28" aria-hidden="true" tabindex="-1"></a>                                 xD,</span>
<span id="cb6-29"><a href="#cb6-29" aria-hidden="true" tabindex="-1"></a>                                 xC,</span>
<span id="cb6-30"><a href="#cb6-30" aria-hidden="true" tabindex="-1"></a>                                 xB,</span>
<span id="cb6-31"><a href="#cb6-31" aria-hidden="true" tabindex="-1"></a>                                 xP,</span>
<span id="cb6-32"><a href="#cb6-32" aria-hidden="true" tabindex="-1"></a>                                 xBF,</span>
<span id="cb6-33"><a href="#cb6-33" aria-hidden="true" tabindex="-1"></a>                                 xV,</span>
<span id="cb6-34"><a href="#cb6-34" aria-hidden="true" tabindex="-1"></a>                                 xS)) <span class="sc">+</span></span>
<span id="cb6-35"><a href="#cb6-35" aria-hidden="true" tabindex="-1"></a>    <span class="fu">coord_cartesian</span>(<span class="at">expand =</span> F) <span class="sc">+</span></span>
<span id="cb6-36"><a href="#cb6-36" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme_cowplot</span>(<span class="at">font_size =</span> <span class="dv">11</span>, <span class="at">font_family =</span> <span class="st">"serif"</span>) <span class="sc">+</span></span>
<span id="cb6-37"><a href="#cb6-37" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme</span>(<span class="at">plot.caption =</span> <span class="fu">element_text</span>(<span class="at">hjust =</span> <span class="dv">0</span>)) <span class="sc">+</span></span>
<span id="cb6-38"><a href="#cb6-38" aria-hidden="true" tabindex="-1"></a>    <span class="fu">labs</span>(<span class="at">x =</span> <span class="cn">NULL</span>,</span>
<span id="cb6-39"><a href="#cb6-39" aria-hidden="true" tabindex="-1"></a>         <span class="at">y =</span> <span class="cn">NULL</span>,</span>
<span id="cb6-40"><a href="#cb6-40" aria-hidden="true" tabindex="-1"></a>         <span class="at">fill =</span> <span class="cn">NULL</span>,</span>
<span id="cb6-41"><a href="#cb6-41" aria-hidden="true" tabindex="-1"></a>         <span class="at">title =</span> <span class="st">"Hvert missir Samfylkingin kjósendur sína?"</span>)</span>
<span id="cb6-42"><a href="#cb6-42" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-43"><a href="#cb6-43" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplotly</span>(p, <span class="at">tooltip =</span> <span class="st">"text"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div id="htmlwidget-935076304a478c03fad8" style="width:100%;height:480px;" class="plotly html-widget"></div>
<script type="application/json" data-for="htmlwidget-935076304a478c03fad8">{"x":{"data":[{"orientation":"v","width":[1,1,1,1,1,1,1,1,1,1,1,1,1],"base":[0.9875,0.900311526479751,0.934579439252336,0.962616822429907,0.984423676012461,0.996884735202492,0.921708185053381,0.99288256227758,0.921708185053381,0.96085409252669,0.924444444444444,0.982222222222222,0.995555555555556],"x":[5,4,4,4,4,4,3,3,2,2,1,1,1],"y":[0.0125,0.0342679127725857,0.0280373831775701,0.0218068535825545,0.0124610591900312,0.00311526479750779,0.0711743772241993,0.00711743772241991,0.0391459074733096,0.0391459074733096,0.0577777777777778,0.0133333333333333,0.00444444444444447],"text":["Kaus síðast: Samfylkingin<br />Kaus nú: Annað<br />Hlutfall (af kjósendum síðast): 1.2%","Kaus síðast: Samfylkingin<br />Kaus nú: Annað<br />Hlutfall (af kjósendum síðast): 3.4%","Kaus síðast: Samfylkingin<br />Kaus nú: Annað<br />Hlutfall (af kjósendum síðast): 2.8%","Kaus síðast: Samfylkingin<br />Kaus nú: Annað<br />Hlutfall (af kjósendum síðast): 2.2%","Kaus síðast: Samfylkingin<br />Kaus nú: Annað<br />Hlutfall (af kjósendum síðast): 1.2%","Kaus síðast: Samfylkingin<br />Kaus nú: Annað<br />Hlutfall (af kjósendum síðast): 0.3%","Kaus síðast: Samfylkingin<br />Kaus nú: Annað<br />Hlutfall (af kjósendum síðast): 7.1%","Kaus síðast: Samfylkingin<br />Kaus nú: Annað<br />Hlutfall (af kjósendum síðast): 0.7%","Kaus síðast: Samfylkingin<br />Kaus nú: Annað<br />Hlutfall (af kjósendum síðast): 3.9%","Kaus síðast: Samfylkingin<br />Kaus nú: Annað<br />Hlutfall (af kjósendum síðast): 3.9%","Kaus síðast: Samfylkingin<br />Kaus nú: Annað<br />Hlutfall (af kjósendum síðast): 5.8%","Kaus síðast: Samfylkingin<br />Kaus nú: Annað<br />Hlutfall (af kjósendum síðast): 1.3%","Kaus síðast: Samfylkingin<br />Kaus nú: Annað<br />Hlutfall (af kjósendum síðast): 0.4%"],"type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(229,216,189,0.7)","line":{"width":1.88976377952756,"color":"transparent"}},"name":"Annað","legendgroup":"Annað","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"orientation":"v","width":[1,1],"base":[0.975806451612903,0.9625],"x":[6,5],"y":[0.0241935483870968,0.025],"text":["Kaus síðast: Samfylkingin<br />Kaus nú: Flokkur Fólksins<br />Hlutfall (af kjósendum síðast): 2.4%","Kaus síðast: Samfylkingin<br />Kaus nú: Flokkur Fólksins<br />Hlutfall (af kjósendum síðast): 2.5%"],"type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(254,227,145,0.7)","line":{"width":1.88976377952756,"color":"transparent"}},"name":"Flokkur Fólksins","legendgroup":"Flokkur Fólksins","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"orientation":"v","width":1,"base":0.943548387096774,"x":[6],"y":[0.032258064516129],"text":"Kaus síðast: Samfylkingin<br />Kaus nú: Miðflokkurinn<br />Hlutfall (af kjósendum síðast): 3.2%","type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(8,48,107,0.7)","line":{"width":1.88976377952756,"color":"transparent"}},"name":"Miðflokkurinn","legendgroup":"Miðflokkurinn","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"orientation":"v","width":[1,1,1,1,1,1],"base":[0.919354838709677,0.93125,0.81619937694704,0.903914590747331,0.871886120996441,0.888888888888889],"x":[6,5,4,3,2,1],"y":[0.0241935483870968,0.03125,0.0841121495327103,0.0177935943060499,0.0498220640569395,0.0355555555555556],"text":["Kaus síðast: Samfylkingin<br />Kaus nú: Sjálfstæðisflokkurinn<br />Hlutfall (af kjósendum síðast): 2.4%","Kaus síðast: Samfylkingin<br />Kaus nú: Sjálfstæðisflokkurinn<br />Hlutfall (af kjósendum síðast): 3.1%","Kaus síðast: Samfylkingin<br />Kaus nú: Sjálfstæðisflokkurinn<br />Hlutfall (af kjósendum síðast): 8.4%","Kaus síðast: Samfylkingin<br />Kaus nú: Sjálfstæðisflokkurinn<br />Hlutfall (af kjósendum síðast): 1.8%","Kaus síðast: Samfylkingin<br />Kaus nú: Sjálfstæðisflokkurinn<br />Hlutfall (af kjósendum síðast): 5.0%","Kaus síðast: Samfylkingin<br />Kaus nú: Sjálfstæðisflokkurinn<br />Hlutfall (af kjósendum síðast): 3.6%"],"type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(55,126,184,0.7)","line":{"width":1.88976377952756,"color":"transparent"}},"name":"Sjálfstæðisflokkurinn","legendgroup":"Sjálfstæðisflokkurinn","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"orientation":"v","width":[1,1],"base":[0.911290322580645,0.8125],"x":[6,5],"y":[0.00806451612903225,0.11875],"text":["Kaus síðast: Samfylkingin<br />Kaus nú: Viðreisn<br />Hlutfall (af kjósendum síðast): 0.8%","Kaus síðast: Samfylkingin<br />Kaus nú: Viðreisn<br />Hlutfall (af kjósendum síðast): 11.9%"],"type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(255,127,0,0.7)","line":{"width":1.88976377952756,"color":"transparent"}},"name":"Viðreisn","legendgroup":"Viðreisn","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"orientation":"v","width":[1,1,1,1,1,1],"base":[0.879032258064516,0.8,0.67601246105919,0.850533807829182,0.846975088967972,0.853333333333333],"x":[6,5,4,3,2,1],"y":[0.032258064516129,0.0125,0.14018691588785,0.0533807829181494,0.0249110320284698,0.0355555555555556],"text":["Kaus síðast: Samfylkingin<br />Kaus nú: Framsóknarflokkurinn<br />Hlutfall (af kjósendum síðast): 3.2%","Kaus síðast: Samfylkingin<br />Kaus nú: Framsóknarflokkurinn<br />Hlutfall (af kjósendum síðast): 1.2%","Kaus síðast: Samfylkingin<br />Kaus nú: Framsóknarflokkurinn<br />Hlutfall (af kjósendum síðast): 14.0%","Kaus síðast: Samfylkingin<br />Kaus nú: Framsóknarflokkurinn<br />Hlutfall (af kjósendum síðast): 5.3%","Kaus síðast: Samfylkingin<br />Kaus nú: Framsóknarflokkurinn<br />Hlutfall (af kjósendum síðast): 2.5%","Kaus síðast: Samfylkingin<br />Kaus nú: Framsóknarflokkurinn<br />Hlutfall (af kjósendum síðast): 3.6%"],"type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(178,223,138,0.7)","line":{"width":1.88976377952756,"color":"transparent"}},"name":"Framsóknarflokkurinn","legendgroup":"Framsóknarflokkurinn","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"orientation":"v","width":[1,1,1],"base":[0.854838709677419,0.65625,0.632398753894081],"x":[6,5,4],"y":[0.0241935483870969,0.14375,0.043613707165109],"text":["Kaus síðast: Samfylkingin<br />Kaus nú: Píratar<br />Hlutfall (af kjósendum síðast): 2.4%","Kaus síðast: Samfylkingin<br />Kaus nú: Píratar<br />Hlutfall (af kjósendum síðast): 14.4%","Kaus síðast: Samfylkingin<br />Kaus nú: Píratar<br />Hlutfall (af kjósendum síðast): 4.4%"],"type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(152,78,163,0.7)","line":{"width":1.88976377952756,"color":"transparent"}},"name":"Píratar","legendgroup":"Píratar","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"orientation":"v","width":[1,1,1],"base":[0.846774193548387,0.54375,0.482866043613707],"x":[6,5,4],"y":[0.00806451612903225,0.1125,0.149532710280374],"text":["Kaus síðast: Samfylkingin<br />Kaus nú: Björt Framtíð<br />Hlutfall (af kjósendum síðast): 0.8%","Kaus síðast: Samfylkingin<br />Kaus nú: Björt Framtíð<br />Hlutfall (af kjósendum síðast): 11.2%","Kaus síðast: Samfylkingin<br />Kaus nú: Björt Framtíð<br />Hlutfall (af kjósendum síðast): 15.0%"],"type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(202,178,214,0.7)","line":{"width":1.88976377952756,"color":"transparent"}},"name":"Björt Framtíð","legendgroup":"Björt Framtíð","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"orientation":"v","width":[1,1,1,1,1,1],"base":[0.693548387096774,0.28125,0.395638629283489,0.690391459074733,0.711743772241993,0.804444444444444],"x":[6,5,4,3,2,1],"y":[0.153225806451613,0.2625,0.0872274143302181,0.160142348754448,0.135231316725979,0.0488888888888889],"text":["Kaus síðast: Samfylkingin<br />Kaus nú: Vinstri Græn<br />Hlutfall (af kjósendum síðast): 15.3%","Kaus síðast: Samfylkingin<br />Kaus nú: Vinstri Græn<br />Hlutfall (af kjósendum síðast): 26.2%","Kaus síðast: Samfylkingin<br />Kaus nú: Vinstri Græn<br />Hlutfall (af kjósendum síðast): 8.7%","Kaus síðast: Samfylkingin<br />Kaus nú: Vinstri Græn<br />Hlutfall (af kjósendum síðast): 16.0%","Kaus síðast: Samfylkingin<br />Kaus nú: Vinstri Græn<br />Hlutfall (af kjósendum síðast): 13.5%","Kaus síðast: Samfylkingin<br />Kaus nú: Vinstri Græn<br />Hlutfall (af kjósendum síðast): 4.9%"],"type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(35,139,69,0.7)","line":{"width":1.88976377952756,"color":"transparent"}},"name":"Vinstri Græn","legendgroup":"Vinstri Græn","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"orientation":"v","width":[1,1,1,1,1,1],"base":[0,0,0,0,0,0],"x":[6,5,4,3,2,1],"y":[0.693548387096774,0.28125,0.395638629283489,0.690391459074733,0.711743772241993,0.804444444444444],"text":["Kaus síðast: Samfylkingin<br />Kaus nú: Samfylkingin<br />Hlutfall (af kjósendum síðast): 69.4%","Kaus síðast: Samfylkingin<br />Kaus nú: Samfylkingin<br />Hlutfall (af kjósendum síðast): 28.1%","Kaus síðast: Samfylkingin<br />Kaus nú: Samfylkingin<br />Hlutfall (af kjósendum síðast): 39.6%","Kaus síðast: Samfylkingin<br />Kaus nú: Samfylkingin<br />Hlutfall (af kjósendum síðast): 69.0%","Kaus síðast: Samfylkingin<br />Kaus nú: Samfylkingin<br />Hlutfall (af kjósendum síðast): 71.2%","Kaus síðast: Samfylkingin<br />Kaus nú: Samfylkingin<br />Hlutfall (af kjósendum síðast): 80.4%"],"type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(228,26,28,0.7)","line":{"width":1.88976377952756,"color":"transparent"}},"name":"Samfylkingin","legendgroup":"Samfylkingin","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null}],"layout":{"margin":{"t":47.3111545988258,"r":7.30593607305936,"b":30.7893020221787,"l":36.0078277886497},"font":{"color":"rgba(0,0,0,1)","family":"serif","size":14.6118721461187},"title":{"text":"<b> Hvert missir Samfylkingin kjósendur sína? <\/b>","font":{"color":"rgba(0,0,0,1)","family":"serif","size":16.6992824527071},"x":0,"xref":"paper"},"xaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[0.5,6.5],"tickmode":"array","ticktext":[2003,2007,2009,2013,2016,2017],"tickvals":[1,2,3,4,5,6],"categoryorder":"array","categoryarray":[2003,2007,2009,2013,2016,2017],"nticks":null,"ticks":"outside","tickcolor":"rgba(0,0,0,1)","ticklen":3.65296803652968,"tickwidth":0.66417600664176,"showticklabels":true,"tickfont":{"color":"rgba(0,0,0,1)","family":"serif","size":12.5244618395303},"tickangle":-0,"showline":true,"linecolor":"rgba(0,0,0,1)","linewidth":0.66417600664176,"showgrid":false,"gridcolor":null,"gridwidth":0,"zeroline":false,"anchor":"y","title":{"text":"","font":{"color":"rgba(0,0,0,1)","family":"serif","size":14.6118721461187}},"hoverformat":".2f"},"yaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[0,1],"tickmode":"array","ticktext":["0%","25%","50%","75%","100%"],"tickvals":[0,0.25,0.5,0.75,1],"categoryorder":"array","categoryarray":["0%","25%","50%","75%","100%"],"nticks":null,"ticks":"outside","tickcolor":"rgba(0,0,0,1)","ticklen":3.65296803652968,"tickwidth":0.66417600664176,"showticklabels":true,"tickfont":{"color":"rgba(0,0,0,1)","family":"serif","size":12.5244618395303},"tickangle":-0,"showline":true,"linecolor":"rgba(0,0,0,1)","linewidth":0.66417600664176,"showgrid":false,"gridcolor":null,"gridwidth":0,"zeroline":false,"anchor":"x","title":{"text":"","font":{"color":"rgba(0,0,0,1)","family":"serif","size":14.6118721461187}},"hoverformat":".2f"},"shapes":[{"type":"rect","fillcolor":null,"line":{"color":null,"width":0,"linetype":[]},"yref":"paper","xref":"paper","x0":0,"x1":1,"y0":0,"y1":1}],"showlegend":true,"legend":{"bgcolor":null,"bordercolor":null,"borderwidth":0,"font":{"color":"rgba(0,0,0,1)","family":"serif","size":12.5244618395303},"title":{"text":"","font":{"color":"rgba(0,0,0,1)","family":"serif","size":14.6118721461187}}},"hovermode":"closest","barmode":"relative"},"config":{"doubleClick":"reset","modeBarButtonsToAdd":["hoverclosest","hovercompare"],"showSendToCloud":false},"source":"A","attrs":{"11e123be1a052":{"x":{},"y":{},"text":{},"fill":{},"type":"bar"}},"cur_data":"11e123be1a052","visdat":{"11e123be1a052":["function (y) ","x"]},"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.2,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
</div>
</div>
</div>
<div id="tabset-1-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-1-2-tab">
<div class="cell" data-fig.asp="0.5">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a>p <span class="ot">&lt;-</span> d_retention <span class="sc">|&gt;</span> </span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">filter</span>(former <span class="sc">==</span> <span class="st">"Sjálfstæðisflokkurinn"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">current =</span> <span class="fu">ifelse</span>(current <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"Samfylkingin"</span>,</span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a>                                           <span class="st">"Vinstri Græn"</span>,</span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a>                                           <span class="st">"Flokkur Fólksins"</span>,</span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a>                                           <span class="st">"Sjálfstæðisflokkurinn"</span>, </span>
<span id="cb7-7"><a href="#cb7-7" aria-hidden="true" tabindex="-1"></a>                                           <span class="st">"Píratar"</span>,</span>
<span id="cb7-8"><a href="#cb7-8" aria-hidden="true" tabindex="-1"></a>                                           <span class="st">"Framsóknarflokkurinn"</span>, </span>
<span id="cb7-9"><a href="#cb7-9" aria-hidden="true" tabindex="-1"></a>                                           <span class="st">"Píratar"</span>,</span>
<span id="cb7-10"><a href="#cb7-10" aria-hidden="true" tabindex="-1"></a>                                           <span class="st">"Björt Framtíð"</span>,</span>
<span id="cb7-11"><a href="#cb7-11" aria-hidden="true" tabindex="-1"></a>                                           <span class="st">"Viðreisn"</span>,</span>
<span id="cb7-12"><a href="#cb7-12" aria-hidden="true" tabindex="-1"></a>                                           <span class="st">"Miðflokkurinn"</span>),</span>
<span id="cb7-13"><a href="#cb7-13" aria-hidden="true" tabindex="-1"></a>                            current,</span>
<span id="cb7-14"><a href="#cb7-14" aria-hidden="true" tabindex="-1"></a>                            <span class="st">"Annað"</span>)) <span class="sc">|&gt;</span> </span>
<span id="cb7-15"><a href="#cb7-15" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">current =</span> <span class="fu">as_factor</span>(current),</span>
<span id="cb7-16"><a href="#cb7-16" aria-hidden="true" tabindex="-1"></a>           <span class="at">current =</span> <span class="fu">fct_reorder</span>(current, p <span class="sc">*</span> (current <span class="sc">!=</span> <span class="st">"Annað"</span>), <span class="at">.fun =</span> max),</span>
<span id="cb7-17"><a href="#cb7-17" aria-hidden="true" tabindex="-1"></a>           <span class="at">curent =</span> <span class="fu">factor</span>(current, <span class="at">levels =</span> <span class="fu">rev</span>(<span class="fu">levels</span>(current)))) <span class="sc">|&gt;</span> </span>
<span id="cb7-18"><a href="#cb7-18" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">election =</span> <span class="fu">as.numeric</span>(<span class="fu">as.factor</span>(year)),</span>
<span id="cb7-19"><a href="#cb7-19" aria-hidden="true" tabindex="-1"></a>           <span class="at">text =</span> <span class="fu">str_c</span>(<span class="st">"Kaus síðast: "</span>, former, <span class="st">"</span><span class="sc">\n</span><span class="st">"</span>,</span>
<span id="cb7-20"><a href="#cb7-20" aria-hidden="true" tabindex="-1"></a>                        <span class="st">"Kaus nú: "</span>, current, <span class="st">"</span><span class="sc">\n</span><span class="st">"</span>,</span>
<span id="cb7-21"><a href="#cb7-21" aria-hidden="true" tabindex="-1"></a>                        <span class="st">"Hlutfall (af kjósendum síðast): "</span>, <span class="fu">percent</span>(p, <span class="at">accuracy =</span> <span class="fl">0.1</span>))) <span class="sc">|&gt;</span></span>
<span id="cb7-22"><a href="#cb7-22" aria-hidden="true" tabindex="-1"></a>    <span class="fu">ggplot</span>(<span class="fu">aes</span>(election, p, <span class="at">text =</span> text)) <span class="sc">+</span></span>
<span id="cb7-23"><a href="#cb7-23" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_col</span>(<span class="fu">aes</span>(<span class="at">fill =</span> current), <span class="at">position =</span> <span class="st">"stack"</span>, <span class="at">width =</span> <span class="dv">1</span>, <span class="at">alpha =</span> <span class="fl">0.7</span>) <span class="sc">+</span></span>
<span id="cb7-24"><a href="#cb7-24" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scale_x_continuous</span>(<span class="at">breaks =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">6</span>, <span class="at">labels =</span> <span class="fu">rev</span>(<span class="fu">unique</span>(d_retention<span class="sc">$</span>year))) <span class="sc">+</span></span>
<span id="cb7-25"><a href="#cb7-25" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scale_y_continuous</span>(<span class="at">labels =</span> <span class="fu">label_percent</span>()) <span class="sc">+</span></span>
<span id="cb7-26"><a href="#cb7-26" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scale_fill_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(Annad,</span>
<span id="cb7-27"><a href="#cb7-27" aria-hidden="true" tabindex="-1"></a>                                 xP,</span>
<span id="cb7-28"><a href="#cb7-28" aria-hidden="true" tabindex="-1"></a>                                 xFF,</span>
<span id="cb7-29"><a href="#cb7-29" aria-hidden="true" tabindex="-1"></a>                                 xBF,</span>
<span id="cb7-30"><a href="#cb7-30" aria-hidden="true" tabindex="-1"></a>                                 xV,</span>
<span id="cb7-31"><a href="#cb7-31" aria-hidden="true" tabindex="-1"></a>                                 xM,</span>
<span id="cb7-32"><a href="#cb7-32" aria-hidden="true" tabindex="-1"></a>                                 xC,</span>
<span id="cb7-33"><a href="#cb7-33" aria-hidden="true" tabindex="-1"></a>                                 xB,</span>
<span id="cb7-34"><a href="#cb7-34" aria-hidden="true" tabindex="-1"></a>                                 xS,</span>
<span id="cb7-35"><a href="#cb7-35" aria-hidden="true" tabindex="-1"></a>                                 xD)) <span class="sc">+</span></span>
<span id="cb7-36"><a href="#cb7-36" aria-hidden="true" tabindex="-1"></a>    <span class="fu">coord_cartesian</span>(<span class="at">expand =</span> F) <span class="sc">+</span></span>
<span id="cb7-37"><a href="#cb7-37" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme_cowplot</span>(<span class="at">font_size =</span> <span class="dv">11</span>, <span class="at">font_family =</span> <span class="st">"serif"</span>) <span class="sc">+</span></span>
<span id="cb7-38"><a href="#cb7-38" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme</span>(<span class="at">plot.caption =</span> <span class="fu">element_text</span>(<span class="at">hjust =</span> <span class="dv">0</span>)) <span class="sc">+</span></span>
<span id="cb7-39"><a href="#cb7-39" aria-hidden="true" tabindex="-1"></a>    <span class="fu">labs</span>(<span class="at">x =</span> <span class="cn">NULL</span>,</span>
<span id="cb7-40"><a href="#cb7-40" aria-hidden="true" tabindex="-1"></a>         <span class="at">y =</span> <span class="cn">NULL</span>,</span>
<span id="cb7-41"><a href="#cb7-41" aria-hidden="true" tabindex="-1"></a>         <span class="at">fill =</span> <span class="cn">NULL</span>,</span>
<span id="cb7-42"><a href="#cb7-42" aria-hidden="true" tabindex="-1"></a>         <span class="at">title =</span> <span class="st">"Hvert missir Sjálfstæðisflokkurinn kjósendur sína?"</span>)</span>
<span id="cb7-43"><a href="#cb7-43" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-44"><a href="#cb7-44" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplotly</span>(p, <span class="at">tooltip =</span> <span class="st">"text"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div id="htmlwidget-9709838a98a7fa5e040c" style="width:100%;height:480px;" class="plotly html-widget"></div>
<script type="application/json" data-for="htmlwidget-9709838a98a7fa5e040c">{"x":{"data":[{"orientation":"v","width":[1,1,1,1,1,1,1,1,1,1,1,1],"base":[0.991150442477876,0.978723404255319,0.985815602836879,0.99290780141844,0.99645390070922,0.937869822485207,0.99112426035503,0.962877030162413,0.986078886310905,0.941798941798942,0.984126984126984,0.992063492063492],"x":[5,4,4,4,4,3,3,2,2,1,1,1],"y":[0.00884955752212391,0.00709219858156029,0.00709219858156029,0.00354609929078009,0.0035460992907802,0.0532544378698224,0.00887573964497046,0.0232018561484918,0.0139211136890952,0.0423280423280423,0.00793650793650791,0.00793650793650791],"text":["Kaus síðast: Sjálfstæðisflokkurinn<br />Kaus nú: Annað<br />Hlutfall (af kjósendum síðast): 0.9%","Kaus síðast: Sjálfstæðisflokkurinn<br />Kaus nú: Annað<br />Hlutfall (af kjósendum síðast): 0.7%","Kaus síðast: Sjálfstæðisflokkurinn<br />Kaus nú: Annað<br />Hlutfall (af kjósendum síðast): 0.7%","Kaus síðast: Sjálfstæðisflokkurinn<br />Kaus nú: Annað<br />Hlutfall (af kjósendum síðast): 0.4%","Kaus síðast: Sjálfstæðisflokkurinn<br />Kaus nú: Annað<br />Hlutfall (af kjósendum síðast): 0.4%","Kaus síðast: Sjálfstæðisflokkurinn<br />Kaus nú: Annað<br />Hlutfall (af kjósendum síðast): 5.3%","Kaus síðast: Sjálfstæðisflokkurinn<br />Kaus nú: Annað<br />Hlutfall (af kjósendum síðast): 0.9%","Kaus síðast: Sjálfstæðisflokkurinn<br />Kaus nú: Annað<br />Hlutfall (af kjósendum síðast): 2.3%","Kaus síðast: Sjálfstæðisflokkurinn<br />Kaus nú: Annað<br />Hlutfall (af kjósendum síðast): 1.4%","Kaus síðast: Sjálfstæðisflokkurinn<br />Kaus nú: Annað<br />Hlutfall (af kjósendum síðast): 4.2%","Kaus síðast: Sjálfstæðisflokkurinn<br />Kaus nú: Annað<br />Hlutfall (af kjósendum síðast): 0.8%","Kaus síðast: Sjálfstæðisflokkurinn<br />Kaus nú: Annað<br />Hlutfall (af kjósendum síðast): 0.8%"],"type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(229,216,189,0.7)","line":{"width":1.88976377952756,"color":"transparent"}},"name":"Annað","legendgroup":"Annað","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"orientation":"v","width":[1,1,1],"base":[0.995085995085995,0.982300884955752,0.960992907801418],"x":[6,5,4],"y":[0.00491400491400495,0.00884955752212391,0.0177304964539007],"text":["Kaus síðast: Sjálfstæðisflokkurinn<br />Kaus nú: Píratar<br />Hlutfall (af kjósendum síðast): 0.5%","Kaus síðast: Sjálfstæðisflokkurinn<br />Kaus nú: Píratar<br />Hlutfall (af kjósendum síðast): 0.9%","Kaus síðast: Sjálfstæðisflokkurinn<br />Kaus nú: Píratar<br />Hlutfall (af kjósendum síðast): 1.8%"],"type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(152,78,163,0.7)","line":{"width":1.88976377952756,"color":"transparent"}},"name":"Píratar","legendgroup":"Píratar","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"orientation":"v","width":[1,1],"base":[0.972972972972973,0.960176991150443],"x":[6,5],"y":[0.022113022113022,0.0221238938053097],"text":"Kaus síðast: Sjálfstæðisflokkurinn<br />Kaus nú: Flokkur Fólksins<br />Hlutfall (af kjósendum síðast): 2.2%","type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(254,227,145,0.7)","line":{"width":1.88976377952756,"color":"transparent"}},"name":"Flokkur Fólksins","legendgroup":"Flokkur Fólksins","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"orientation":"v","width":[1,1,1],"base":[0.968058968058968,0.938053097345133,0.929078014184397],"x":[6,5,4],"y":[0.00491400491400495,0.0221238938053098,0.0319148936170213],"text":["Kaus síðast: Sjálfstæðisflokkurinn<br />Kaus nú: Björt Framtíð<br />Hlutfall (af kjósendum síðast): 0.5%","Kaus síðast: Sjálfstæðisflokkurinn<br />Kaus nú: Björt Framtíð<br />Hlutfall (af kjósendum síðast): 2.2%","Kaus síðast: Sjálfstæðisflokkurinn<br />Kaus nú: Björt Framtíð<br />Hlutfall (af kjósendum síðast): 3.2%"],"type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(202,178,214,0.7)","line":{"width":1.88976377952756,"color":"transparent"}},"name":"Björt Framtíð","legendgroup":"Björt Framtíð","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"orientation":"v","width":[1,1,1,1,1,1],"base":[0.948402948402948,0.915929203539823,0.925531914893617,0.887573964497041,0.928074245939675,0.923280423280423],"x":[6,5,4,3,2,1],"y":[0.0196560196560197,0.0221238938053098,0.0035460992907802,0.0502958579881657,0.0348027842227379,0.0185185185185186],"text":["Kaus síðast: Sjálfstæðisflokkurinn<br />Kaus nú: Vinstri Græn<br />Hlutfall (af kjósendum síðast): 2.0%","Kaus síðast: Sjálfstæðisflokkurinn<br />Kaus nú: Vinstri Græn<br />Hlutfall (af kjósendum síðast): 2.2%","Kaus síðast: Sjálfstæðisflokkurinn<br />Kaus nú: Vinstri Græn<br />Hlutfall (af kjósendum síðast): 0.4%","Kaus síðast: Sjálfstæðisflokkurinn<br />Kaus nú: Vinstri Græn<br />Hlutfall (af kjósendum síðast): 5.0%","Kaus síðast: Sjálfstæðisflokkurinn<br />Kaus nú: Vinstri Græn<br />Hlutfall (af kjósendum síðast): 3.5%","Kaus síðast: Sjálfstæðisflokkurinn<br />Kaus nú: Vinstri Græn<br />Hlutfall (af kjósendum síðast): 1.9%"],"type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(35,139,69,0.7)","line":{"width":1.88976377952756,"color":"transparent"}},"name":"Vinstri Græn","legendgroup":"Vinstri Græn","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"orientation":"v","width":1,"base":0.867321867321867,"x":[6],"y":[0.081081081081081],"text":"Kaus síðast: Sjálfstæðisflokkurinn<br />Kaus nú: Miðflokkurinn<br />Hlutfall (af kjósendum síðast): 8.1%","type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(8,48,107,0.7)","line":{"width":1.88976377952756,"color":"transparent"}},"name":"Miðflokkurinn","legendgroup":"Miðflokkurinn","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"orientation":"v","width":[1,1],"base":[0.828009828009828,0.814159292035398],"x":[6,5],"y":[0.0393120393120393,0.101769911504425],"text":["Kaus síðast: Sjálfstæðisflokkurinn<br />Kaus nú: Viðreisn<br />Hlutfall (af kjósendum síðast): 3.9%","Kaus síðast: Sjálfstæðisflokkurinn<br />Kaus nú: Viðreisn<br />Hlutfall (af kjósendum síðast): 10.2%"],"type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(255,127,0,0.7)","line":{"width":1.88976377952756,"color":"transparent"}},"name":"Viðreisn","legendgroup":"Viðreisn","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"orientation":"v","width":[1,1,1,1,1,1],"base":[0.776412776412776,0.743362831858407,0.780141843971631,0.766272189349112,0.909512761020882,0.814814814814815],"x":[6,5,4,3,2,1],"y":[0.0515970515970516,0.0707964601769911,0.145390070921986,0.121301775147929,0.0185614849187935,0.108465608465608],"text":["Kaus síðast: Sjálfstæðisflokkurinn<br />Kaus nú: Framsóknarflokkurinn<br />Hlutfall (af kjósendum síðast): 5.2%","Kaus síðast: Sjálfstæðisflokkurinn<br />Kaus nú: Framsóknarflokkurinn<br />Hlutfall (af kjósendum síðast): 7.1%","Kaus síðast: Sjálfstæðisflokkurinn<br />Kaus nú: Framsóknarflokkurinn<br />Hlutfall (af kjósendum síðast): 14.5%","Kaus síðast: Sjálfstæðisflokkurinn<br />Kaus nú: Framsóknarflokkurinn<br />Hlutfall (af kjósendum síðast): 12.1%","Kaus síðast: Sjálfstæðisflokkurinn<br />Kaus nú: Framsóknarflokkurinn<br />Hlutfall (af kjósendum síðast): 1.9%","Kaus síðast: Sjálfstæðisflokkurinn<br />Kaus nú: Framsóknarflokkurinn<br />Hlutfall (af kjósendum síðast): 10.8%"],"type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(178,223,138,0.7)","line":{"width":1.88976377952756,"color":"transparent"}},"name":"Framsóknarflokkurinn","legendgroup":"Framsóknarflokkurinn","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"orientation":"v","width":[1,1,1,1,1,1],"base":[0.766584766584767,0.730088495575221,0.75886524822695,0.609467455621302,0.842227378190255,0.746031746031746],"x":[6,5,4,3,2,1],"y":[0.0098280098280098,0.0132743362831859,0.0212765957446809,0.156804733727811,0.0672853828306265,0.0687830687830688],"text":["Kaus síðast: Sjálfstæðisflokkurinn<br />Kaus nú: Samfylkingin<br />Hlutfall (af kjósendum síðast): 1.0%","Kaus síðast: Sjálfstæðisflokkurinn<br />Kaus nú: Samfylkingin<br />Hlutfall (af kjósendum síðast): 1.3%","Kaus síðast: Sjálfstæðisflokkurinn<br />Kaus nú: Samfylkingin<br />Hlutfall (af kjósendum síðast): 2.1%","Kaus síðast: Sjálfstæðisflokkurinn<br />Kaus nú: Samfylkingin<br />Hlutfall (af kjósendum síðast): 15.7%","Kaus síðast: Sjálfstæðisflokkurinn<br />Kaus nú: Samfylkingin<br />Hlutfall (af kjósendum síðast): 6.7%","Kaus síðast: Sjálfstæðisflokkurinn<br />Kaus nú: Samfylkingin<br />Hlutfall (af kjósendum síðast): 6.9%"],"type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(228,26,28,0.7)","line":{"width":1.88976377952756,"color":"transparent"}},"name":"Samfylkingin","legendgroup":"Samfylkingin","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"orientation":"v","width":[1,1,1,1,1,1],"base":[0,0,0,0,0,0],"x":[6,5,4,3,2,1],"y":[0.766584766584767,0.730088495575221,0.75886524822695,0.609467455621302,0.842227378190255,0.746031746031746],"text":["Kaus síðast: Sjálfstæðisflokkurinn<br />Kaus nú: Sjálfstæðisflokkurinn<br />Hlutfall (af kjósendum síðast): 76.7%","Kaus síðast: Sjálfstæðisflokkurinn<br />Kaus nú: Sjálfstæðisflokkurinn<br />Hlutfall (af kjósendum síðast): 73.0%","Kaus síðast: Sjálfstæðisflokkurinn<br />Kaus nú: Sjálfstæðisflokkurinn<br />Hlutfall (af kjósendum síðast): 75.9%","Kaus síðast: Sjálfstæðisflokkurinn<br />Kaus nú: Sjálfstæðisflokkurinn<br />Hlutfall (af kjósendum síðast): 60.9%","Kaus síðast: Sjálfstæðisflokkurinn<br />Kaus nú: Sjálfstæðisflokkurinn<br />Hlutfall (af kjósendum síðast): 84.2%","Kaus síðast: Sjálfstæðisflokkurinn<br />Kaus nú: Sjálfstæðisflokkurinn<br />Hlutfall (af kjósendum síðast): 74.6%"],"type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(55,126,184,0.7)","line":{"width":1.88976377952756,"color":"transparent"}},"name":"Sjálfstæðisflokkurinn","legendgroup":"Sjálfstæðisflokkurinn","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null}],"layout":{"margin":{"t":47.3111545988258,"r":7.30593607305936,"b":30.7893020221787,"l":36.0078277886497},"font":{"color":"rgba(0,0,0,1)","family":"serif","size":14.6118721461187},"title":{"text":"<b> Hvert missir Sjálfstæðisflokkurinn kjósendur sína? <\/b>","font":{"color":"rgba(0,0,0,1)","family":"serif","size":16.6992824527071},"x":0,"xref":"paper"},"xaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[0.5,6.5],"tickmode":"array","ticktext":[2003,2007,2009,2013,2016,2017],"tickvals":[1,2,3,4,5,6],"categoryorder":"array","categoryarray":[2003,2007,2009,2013,2016,2017],"nticks":null,"ticks":"outside","tickcolor":"rgba(0,0,0,1)","ticklen":3.65296803652968,"tickwidth":0.66417600664176,"showticklabels":true,"tickfont":{"color":"rgba(0,0,0,1)","family":"serif","size":12.5244618395303},"tickangle":-0,"showline":true,"linecolor":"rgba(0,0,0,1)","linewidth":0.66417600664176,"showgrid":false,"gridcolor":null,"gridwidth":0,"zeroline":false,"anchor":"y","title":{"text":"","font":{"color":"rgba(0,0,0,1)","family":"serif","size":14.6118721461187}},"hoverformat":".2f"},"yaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[0,1],"tickmode":"array","ticktext":["0%","25%","50%","75%","100%"],"tickvals":[0,0.25,0.5,0.75,1],"categoryorder":"array","categoryarray":["0%","25%","50%","75%","100%"],"nticks":null,"ticks":"outside","tickcolor":"rgba(0,0,0,1)","ticklen":3.65296803652968,"tickwidth":0.66417600664176,"showticklabels":true,"tickfont":{"color":"rgba(0,0,0,1)","family":"serif","size":12.5244618395303},"tickangle":-0,"showline":true,"linecolor":"rgba(0,0,0,1)","linewidth":0.66417600664176,"showgrid":false,"gridcolor":null,"gridwidth":0,"zeroline":false,"anchor":"x","title":{"text":"","font":{"color":"rgba(0,0,0,1)","family":"serif","size":14.6118721461187}},"hoverformat":".2f"},"shapes":[{"type":"rect","fillcolor":null,"line":{"color":null,"width":0,"linetype":[]},"yref":"paper","xref":"paper","x0":0,"x1":1,"y0":0,"y1":1}],"showlegend":true,"legend":{"bgcolor":null,"bordercolor":null,"borderwidth":0,"font":{"color":"rgba(0,0,0,1)","family":"serif","size":12.5244618395303},"title":{"text":"","font":{"color":"rgba(0,0,0,1)","family":"serif","size":14.6118721461187}}},"hovermode":"closest","barmode":"relative"},"config":{"doubleClick":"reset","modeBarButtonsToAdd":["hoverclosest","hovercompare"],"showSendToCloud":false},"source":"A","attrs":{"11e126ff914d6":{"x":{},"y":{},"text":{},"fill":{},"type":"bar"}},"cur_data":"11e126ff914d6","visdat":{"11e126ff914d6":["function (y) ","x"]},"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.2,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
</div>
</div>
</div>
<div id="tabset-1-3" class="tab-pane" role="tabpanel" aria-labelledby="tabset-1-3-tab">
<div class="cell" data-fig.asp="0.5">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a>p <span class="ot">&lt;-</span> d_retention <span class="sc">|&gt;</span> </span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">filter</span>(former <span class="sc">==</span> <span class="st">"Framsóknarflokkurinn"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">current =</span> <span class="fu">ifelse</span>(current <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"Samfylkingin"</span>,</span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a>                                           <span class="st">"Vinstri Græn"</span>,</span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a>                                           <span class="st">"Flokkur Fólksins"</span>,</span>
<span id="cb8-6"><a href="#cb8-6" aria-hidden="true" tabindex="-1"></a>                                           <span class="st">"Sjálfstæðisflokkurinn"</span>, </span>
<span id="cb8-7"><a href="#cb8-7" aria-hidden="true" tabindex="-1"></a>                                           <span class="st">"Píratar"</span>,</span>
<span id="cb8-8"><a href="#cb8-8" aria-hidden="true" tabindex="-1"></a>                                           <span class="st">"Framsóknarflokkurinn"</span>, </span>
<span id="cb8-9"><a href="#cb8-9" aria-hidden="true" tabindex="-1"></a>                                           <span class="st">"Píratar"</span>,</span>
<span id="cb8-10"><a href="#cb8-10" aria-hidden="true" tabindex="-1"></a>                                           <span class="st">"Björt Framtíð"</span>,</span>
<span id="cb8-11"><a href="#cb8-11" aria-hidden="true" tabindex="-1"></a>                                           <span class="st">"Viðreisn"</span>,</span>
<span id="cb8-12"><a href="#cb8-12" aria-hidden="true" tabindex="-1"></a>                                           <span class="st">"Miðflokkurinn"</span>),</span>
<span id="cb8-13"><a href="#cb8-13" aria-hidden="true" tabindex="-1"></a>                            current,</span>
<span id="cb8-14"><a href="#cb8-14" aria-hidden="true" tabindex="-1"></a>                            <span class="st">"Annað"</span>)) <span class="sc">|&gt;</span> </span>
<span id="cb8-15"><a href="#cb8-15" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">current =</span> <span class="fu">as_factor</span>(current),</span>
<span id="cb8-16"><a href="#cb8-16" aria-hidden="true" tabindex="-1"></a>           <span class="at">current =</span> <span class="fu">fct_reorder</span>(current, p <span class="sc">*</span> (current <span class="sc">!=</span> <span class="st">"Annað"</span>), <span class="at">.fun =</span> max),</span>
<span id="cb8-17"><a href="#cb8-17" aria-hidden="true" tabindex="-1"></a>           <span class="at">curent =</span> <span class="fu">factor</span>(current, <span class="at">levels =</span> <span class="fu">rev</span>(<span class="fu">levels</span>(current)))) <span class="sc">|&gt;</span> </span>
<span id="cb8-18"><a href="#cb8-18" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">election =</span> <span class="fu">as.numeric</span>(<span class="fu">as.factor</span>(year)),</span>
<span id="cb8-19"><a href="#cb8-19" aria-hidden="true" tabindex="-1"></a>           <span class="at">text =</span> <span class="fu">str_c</span>(<span class="st">"Kaus síðast: "</span>, former, <span class="st">"</span><span class="sc">\n</span><span class="st">"</span>,</span>
<span id="cb8-20"><a href="#cb8-20" aria-hidden="true" tabindex="-1"></a>                        <span class="st">"Kaus nú: "</span>, current, <span class="st">"</span><span class="sc">\n</span><span class="st">"</span>,</span>
<span id="cb8-21"><a href="#cb8-21" aria-hidden="true" tabindex="-1"></a>                        <span class="st">"Hlutfall (af kjósendum síðast): "</span>, <span class="fu">percent</span>(p, <span class="at">accuracy =</span> <span class="fl">0.1</span>))) <span class="sc">|&gt;</span></span>
<span id="cb8-22"><a href="#cb8-22" aria-hidden="true" tabindex="-1"></a>    <span class="fu">ggplot</span>(<span class="fu">aes</span>(election, p, <span class="at">text =</span> text)) <span class="sc">+</span></span>
<span id="cb8-23"><a href="#cb8-23" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_col</span>(<span class="fu">aes</span>(<span class="at">fill =</span> current), <span class="at">position =</span> <span class="st">"stack"</span>, <span class="at">width =</span> <span class="dv">1</span>, <span class="at">alpha =</span> <span class="fl">0.7</span>) <span class="sc">+</span></span>
<span id="cb8-24"><a href="#cb8-24" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scale_x_continuous</span>(<span class="at">breaks =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">6</span>, <span class="at">labels =</span> <span class="fu">rev</span>(<span class="fu">unique</span>(d_retention<span class="sc">$</span>year))) <span class="sc">+</span></span>
<span id="cb8-25"><a href="#cb8-25" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scale_y_continuous</span>(<span class="at">labels =</span> <span class="fu">label_percent</span>()) <span class="sc">+</span></span>
<span id="cb8-26"><a href="#cb8-26" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scale_fill_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(Annad,</span>
<span id="cb8-27"><a href="#cb8-27" aria-hidden="true" tabindex="-1"></a>                                 xBF,</span>
<span id="cb8-28"><a href="#cb8-28" aria-hidden="true" tabindex="-1"></a>                                 xC,</span>
<span id="cb8-29"><a href="#cb8-29" aria-hidden="true" tabindex="-1"></a>                                 xP,</span>
<span id="cb8-30"><a href="#cb8-30" aria-hidden="true" tabindex="-1"></a>                                 xFF,</span>
<span id="cb8-31"><a href="#cb8-31" aria-hidden="true" tabindex="-1"></a>                                 xV,</span>
<span id="cb8-32"><a href="#cb8-32" aria-hidden="true" tabindex="-1"></a>                                 xS,</span>
<span id="cb8-33"><a href="#cb8-33" aria-hidden="true" tabindex="-1"></a>                                 xD,</span>
<span id="cb8-34"><a href="#cb8-34" aria-hidden="true" tabindex="-1"></a>                                 xM,</span>
<span id="cb8-35"><a href="#cb8-35" aria-hidden="true" tabindex="-1"></a>                                 xB)) <span class="sc">+</span></span>
<span id="cb8-36"><a href="#cb8-36" aria-hidden="true" tabindex="-1"></a>    <span class="fu">coord_cartesian</span>(<span class="at">expand =</span> F) <span class="sc">+</span></span>
<span id="cb8-37"><a href="#cb8-37" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme_cowplot</span>(<span class="at">font_size =</span> <span class="dv">11</span>, <span class="at">font_family =</span> <span class="st">"serif"</span>) <span class="sc">+</span></span>
<span id="cb8-38"><a href="#cb8-38" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme</span>(<span class="at">plot.caption =</span> <span class="fu">element_text</span>(<span class="at">hjust =</span> <span class="dv">0</span>)) <span class="sc">+</span></span>
<span id="cb8-39"><a href="#cb8-39" aria-hidden="true" tabindex="-1"></a>    <span class="fu">labs</span>(<span class="at">x =</span> <span class="cn">NULL</span>,</span>
<span id="cb8-40"><a href="#cb8-40" aria-hidden="true" tabindex="-1"></a>         <span class="at">y =</span> <span class="cn">NULL</span>,</span>
<span id="cb8-41"><a href="#cb8-41" aria-hidden="true" tabindex="-1"></a>         <span class="at">fill =</span> <span class="cn">NULL</span>,</span>
<span id="cb8-42"><a href="#cb8-42" aria-hidden="true" tabindex="-1"></a>         <span class="at">title =</span> <span class="st">"Hvert missir Framsóknarflokkurinn kjósendur sína?"</span>,</span>
<span id="cb8-43"><a href="#cb8-43" aria-hidden="true" tabindex="-1"></a>         <span class="at">caption =</span> <span class="st">"Kóði og gögn: https://github.com/bgautijonsson/kosningarannsokn"</span>)</span>
<span id="cb8-44"><a href="#cb8-44" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-45"><a href="#cb8-45" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplotly</span>(p, <span class="at">tooltip =</span> <span class="st">"text"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div id="htmlwidget-c8a414b6697f93e26b40" style="width:100%;height:480px;" class="plotly html-widget"></div>
<script type="application/json" data-for="htmlwidget-c8a414b6697f93e26b40">{"x":{"data":[{"orientation":"v","width":[1,1,1,1,1,1,1,1,1],"base":[0.966292134831461,0.964601769911504,0.982300884955752,0.991150442477876,0.96031746031746,0.949044585987261,0.987261146496815,0.960199004975124,0.995024875621891],"x":[5,4,4,4,3,2,2,1,1],"y":[0.0337078651685393,0.0176991150442478,0.00884955752212391,0.00884955752212391,0.0396825396825398,0.0382165605095541,0.0127388535031847,0.0348258706467662,0.00497512437810943],"text":["Kaus síðast: Framsóknarflokkurinn<br />Kaus nú: Annað<br />Hlutfall (af kjósendum síðast): 3.4%","Kaus síðast: Framsóknarflokkurinn<br />Kaus nú: Annað<br />Hlutfall (af kjósendum síðast): 1.8%","Kaus síðast: Framsóknarflokkurinn<br />Kaus nú: Annað<br />Hlutfall (af kjósendum síðast): 0.9%","Kaus síðast: Framsóknarflokkurinn<br />Kaus nú: Annað<br />Hlutfall (af kjósendum síðast): 0.9%","Kaus síðast: Framsóknarflokkurinn<br />Kaus nú: Annað<br />Hlutfall (af kjósendum síðast): 4.0%","Kaus síðast: Framsóknarflokkurinn<br />Kaus nú: Annað<br />Hlutfall (af kjósendum síðast): 3.8%","Kaus síðast: Framsóknarflokkurinn<br />Kaus nú: Annað<br />Hlutfall (af kjósendum síðast): 1.3%","Kaus síðast: Framsóknarflokkurinn<br />Kaus nú: Annað<br />Hlutfall (af kjósendum síðast): 3.5%","Kaus síðast: Framsóknarflokkurinn<br />Kaus nú: Annað<br />Hlutfall (af kjósendum síðast): 0.5%"],"type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(229,216,189,0.7)","line":{"width":1.88976377952756,"color":"transparent"}},"name":"Annað","legendgroup":"Annað","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"orientation":"v","width":[1,1],"base":[0.921348314606742,0.911504424778761],"x":[5,4],"y":[0.0449438202247191,0.0530973451327433],"text":["Kaus síðast: Framsóknarflokkurinn<br />Kaus nú: Björt Framtíð<br />Hlutfall (af kjósendum síðast): 4.5%","Kaus síðast: Framsóknarflokkurinn<br />Kaus nú: Björt Framtíð<br />Hlutfall (af kjósendum síðast): 5.3%"],"type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(202,178,214,0.7)","line":{"width":1.88976377952756,"color":"transparent"}},"name":"Björt Framtíð","legendgroup":"Björt Framtíð","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"orientation":"v","width":[1,1],"base":[0.990049751243781,0.853932584269663],"x":[6,5],"y":[0.00995024875621886,0.0674157303370787],"text":["Kaus síðast: Framsóknarflokkurinn<br />Kaus nú: Viðreisn<br />Hlutfall (af kjósendum síðast): 1.0%","Kaus síðast: Framsóknarflokkurinn<br />Kaus nú: Viðreisn<br />Hlutfall (af kjósendum síðast): 6.7%"],"type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(255,127,0,0.7)","line":{"width":1.88976377952756,"color":"transparent"}},"name":"Viðreisn","legendgroup":"Viðreisn","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"orientation":"v","width":[1,1],"base":[0.985074626865672,0.786516853932584],"x":[6,5],"y":[0.00497512437810943,0.0674157303370786],"text":["Kaus síðast: Framsóknarflokkurinn<br />Kaus nú: Píratar<br />Hlutfall (af kjósendum síðast): 0.5%","Kaus síðast: Framsóknarflokkurinn<br />Kaus nú: Píratar<br />Hlutfall (af kjósendum síðast): 6.7%"],"type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(152,78,163,0.7)","line":{"width":1.88976377952756,"color":"transparent"}},"name":"Píratar","legendgroup":"Píratar","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"orientation":"v","width":[1,1],"base":[0.900497512437811,0.747191011235955],"x":[6,5],"y":[0.0845771144278608,0.0393258426966293],"text":["Kaus síðast: Framsóknarflokkurinn<br />Kaus nú: Flokkur Fólksins<br />Hlutfall (af kjósendum síðast): 8.5%","Kaus síðast: Framsóknarflokkurinn<br />Kaus nú: Flokkur Fólksins<br />Hlutfall (af kjósendum síðast): 3.9%"],"type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(254,227,145,0.7)","line":{"width":1.88976377952756,"color":"transparent"}},"name":"Flokkur Fólksins","legendgroup":"Flokkur Fólksins","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"orientation":"v","width":[1,1,1,1,1,1],"base":[0.885572139303483,0.668539325842697,0.876106194690265,0.825396825396825,0.885350318471338,0.885572139303483],"x":[6,5,4,3,2,1],"y":[0.0149253731343283,0.0786516853932584,0.0353982300884956,0.134920634920635,0.0636942675159236,0.0746268656716418],"text":["Kaus síðast: Framsóknarflokkurinn<br />Kaus nú: Vinstri Græn<br />Hlutfall (af kjósendum síðast): 1.5%","Kaus síðast: Framsóknarflokkurinn<br />Kaus nú: Vinstri Græn<br />Hlutfall (af kjósendum síðast): 7.9%","Kaus síðast: Framsóknarflokkurinn<br />Kaus nú: Vinstri Græn<br />Hlutfall (af kjósendum síðast): 3.5%","Kaus síðast: Framsóknarflokkurinn<br />Kaus nú: Vinstri Græn<br />Hlutfall (af kjósendum síðast): 13.5%","Kaus síðast: Framsóknarflokkurinn<br />Kaus nú: Vinstri Græn<br />Hlutfall (af kjósendum síðast): 6.4%","Kaus síðast: Framsóknarflokkurinn<br />Kaus nú: Vinstri Græn<br />Hlutfall (af kjósendum síðast): 7.5%"],"type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(35,139,69,0.7)","line":{"width":1.88976377952756,"color":"transparent"}},"name":"Vinstri Græn","legendgroup":"Vinstri Græn","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"orientation":"v","width":[1,1,1,1,1,1],"base":[0.860696517412935,0.657303370786517,0.867256637168142,0.674603174603175,0.751592356687898,0.676616915422886],"x":[6,5,4,3,2,1],"y":[0.0248756218905474,0.0112359550561798,0.0088495575221238,0.150793650793651,0.133757961783439,0.208955223880597],"text":["Kaus síðast: Framsóknarflokkurinn<br />Kaus nú: Samfylkingin<br />Hlutfall (af kjósendum síðast): 2.5%","Kaus síðast: Framsóknarflokkurinn<br />Kaus nú: Samfylkingin<br />Hlutfall (af kjósendum síðast): 1.1%","Kaus síðast: Framsóknarflokkurinn<br />Kaus nú: Samfylkingin<br />Hlutfall (af kjósendum síðast): 0.9%","Kaus síðast: Framsóknarflokkurinn<br />Kaus nú: Samfylkingin<br />Hlutfall (af kjósendum síðast): 15.1%","Kaus síðast: Framsóknarflokkurinn<br />Kaus nú: Samfylkingin<br />Hlutfall (af kjósendum síðast): 13.4%","Kaus síðast: Framsóknarflokkurinn<br />Kaus nú: Samfylkingin<br />Hlutfall (af kjósendum síðast): 20.9%"],"type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(228,26,28,0.7)","line":{"width":1.88976377952756,"color":"transparent"}},"name":"Samfylkingin","legendgroup":"Samfylkingin","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"orientation":"v","width":[1,1,1,1,1,1],"base":[0.751243781094527,0.404494382022472,0.761061946902655,0.595238095238095,0.547770700636943,0.582089552238806],"x":[6,5,4,3,2,1],"y":[0.109452736318408,0.252808988764045,0.106194690265487,0.0793650793650794,0.203821656050955,0.0945273631840796],"text":["Kaus síðast: Framsóknarflokkurinn<br />Kaus nú: Sjálfstæðisflokkurinn<br />Hlutfall (af kjósendum síðast): 10.9%","Kaus síðast: Framsóknarflokkurinn<br />Kaus nú: Sjálfstæðisflokkurinn<br />Hlutfall (af kjósendum síðast): 25.3%","Kaus síðast: Framsóknarflokkurinn<br />Kaus nú: Sjálfstæðisflokkurinn<br />Hlutfall (af kjósendum síðast): 10.6%","Kaus síðast: Framsóknarflokkurinn<br />Kaus nú: Sjálfstæðisflokkurinn<br />Hlutfall (af kjósendum síðast): 7.9%","Kaus síðast: Framsóknarflokkurinn<br />Kaus nú: Sjálfstæðisflokkurinn<br />Hlutfall (af kjósendum síðast): 20.4%","Kaus síðast: Framsóknarflokkurinn<br />Kaus nú: Sjálfstæðisflokkurinn<br />Hlutfall (af kjósendum síðast): 9.5%"],"type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(55,126,184,0.7)","line":{"width":1.88976377952756,"color":"transparent"}},"name":"Sjálfstæðisflokkurinn","legendgroup":"Sjálfstæðisflokkurinn","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"orientation":"v","width":1,"base":0.412935323383085,"x":[6],"y":[0.338308457711443],"text":"Kaus síðast: Framsóknarflokkurinn<br />Kaus nú: Miðflokkurinn<br />Hlutfall (af kjósendum síðast): 33.8%","type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(8,48,107,0.7)","line":{"width":1.88976377952756,"color":"transparent"}},"name":"Miðflokkurinn","legendgroup":"Miðflokkurinn","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"orientation":"v","width":[1,1,1,1,1,1],"base":[0,0,0,0,0,0],"x":[6,5,4,3,2,1],"y":[0.412935323383085,0.404494382022472,0.761061946902655,0.595238095238095,0.547770700636943,0.582089552238806],"text":["Kaus síðast: Framsóknarflokkurinn<br />Kaus nú: Framsóknarflokkurinn<br />Hlutfall (af kjósendum síðast): 41.3%","Kaus síðast: Framsóknarflokkurinn<br />Kaus nú: Framsóknarflokkurinn<br />Hlutfall (af kjósendum síðast): 40.4%","Kaus síðast: Framsóknarflokkurinn<br />Kaus nú: Framsóknarflokkurinn<br />Hlutfall (af kjósendum síðast): 76.1%","Kaus síðast: Framsóknarflokkurinn<br />Kaus nú: Framsóknarflokkurinn<br />Hlutfall (af kjósendum síðast): 59.5%","Kaus síðast: Framsóknarflokkurinn<br />Kaus nú: Framsóknarflokkurinn<br />Hlutfall (af kjósendum síðast): 54.8%","Kaus síðast: Framsóknarflokkurinn<br />Kaus nú: Framsóknarflokkurinn<br />Hlutfall (af kjósendum síðast): 58.2%"],"type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(178,223,138,0.7)","line":{"width":1.88976377952756,"color":"transparent"}},"name":"Framsóknarflokkurinn","legendgroup":"Framsóknarflokkurinn","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null}],"layout":{"margin":{"t":47.3111545988258,"r":7.30593607305936,"b":30.7893020221787,"l":36.0078277886497},"font":{"color":"rgba(0,0,0,1)","family":"serif","size":14.6118721461187},"title":{"text":"<b> Hvert missir Framsóknarflokkurinn kjósendur sína? <\/b>","font":{"color":"rgba(0,0,0,1)","family":"serif","size":16.6992824527071},"x":0,"xref":"paper"},"xaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[0.5,6.5],"tickmode":"array","ticktext":[2003,2007,2009,2013,2016,2017],"tickvals":[1,2,3,4,5,6],"categoryorder":"array","categoryarray":[2003,2007,2009,2013,2016,2017],"nticks":null,"ticks":"outside","tickcolor":"rgba(0,0,0,1)","ticklen":3.65296803652968,"tickwidth":0.66417600664176,"showticklabels":true,"tickfont":{"color":"rgba(0,0,0,1)","family":"serif","size":12.5244618395303},"tickangle":-0,"showline":true,"linecolor":"rgba(0,0,0,1)","linewidth":0.66417600664176,"showgrid":false,"gridcolor":null,"gridwidth":0,"zeroline":false,"anchor":"y","title":{"text":"","font":{"color":"rgba(0,0,0,1)","family":"serif","size":14.6118721461187}},"hoverformat":".2f"},"yaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[0,1],"tickmode":"array","ticktext":["0%","25%","50%","75%","100%"],"tickvals":[0,0.25,0.5,0.75,1],"categoryorder":"array","categoryarray":["0%","25%","50%","75%","100%"],"nticks":null,"ticks":"outside","tickcolor":"rgba(0,0,0,1)","ticklen":3.65296803652968,"tickwidth":0.66417600664176,"showticklabels":true,"tickfont":{"color":"rgba(0,0,0,1)","family":"serif","size":12.5244618395303},"tickangle":-0,"showline":true,"linecolor":"rgba(0,0,0,1)","linewidth":0.66417600664176,"showgrid":false,"gridcolor":null,"gridwidth":0,"zeroline":false,"anchor":"x","title":{"text":"","font":{"color":"rgba(0,0,0,1)","family":"serif","size":14.6118721461187}},"hoverformat":".2f"},"shapes":[{"type":"rect","fillcolor":null,"line":{"color":null,"width":0,"linetype":[]},"yref":"paper","xref":"paper","x0":0,"x1":1,"y0":0,"y1":1}],"showlegend":true,"legend":{"bgcolor":null,"bordercolor":null,"borderwidth":0,"font":{"color":"rgba(0,0,0,1)","family":"serif","size":12.5244618395303},"title":{"text":"","font":{"color":"rgba(0,0,0,1)","family":"serif","size":14.6118721461187}}},"hovermode":"closest","barmode":"relative"},"config":{"doubleClick":"reset","modeBarButtonsToAdd":["hoverclosest","hovercompare"],"showSendToCloud":false},"source":"A","attrs":{"11e127680b168":{"x":{},"y":{},"text":{},"fill":{},"type":"bar"}},"cur_data":"11e127680b168","visdat":{"11e127680b168":["function (y) ","x"]},"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.2,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
</div>
</div>
</div>
<div id="tabset-1-4" class="tab-pane" role="tabpanel" aria-labelledby="tabset-1-4-tab">
<div class="cell" data-fig.asp="0.5">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a>p <span class="ot">&lt;-</span> d_retention <span class="sc">|&gt;</span> </span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">filter</span>(former <span class="sc">==</span> <span class="st">"Vinstri Græn"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">current =</span> <span class="fu">ifelse</span>(current <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"Samfylkingin"</span>,</span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a>                                           <span class="st">"Flokkur Fólksins"</span>,</span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a>                                           <span class="st">"Vinstri Græn"</span>,</span>
<span id="cb9-6"><a href="#cb9-6" aria-hidden="true" tabindex="-1"></a>                                           <span class="st">"Sjálfstæðisflokkurinn"</span>, </span>
<span id="cb9-7"><a href="#cb9-7" aria-hidden="true" tabindex="-1"></a>                                           <span class="st">"Píratar"</span>,</span>
<span id="cb9-8"><a href="#cb9-8" aria-hidden="true" tabindex="-1"></a>                                           <span class="st">"Framsóknarflokkurinn"</span>, </span>
<span id="cb9-9"><a href="#cb9-9" aria-hidden="true" tabindex="-1"></a>                                           <span class="st">"Píratar"</span>,</span>
<span id="cb9-10"><a href="#cb9-10" aria-hidden="true" tabindex="-1"></a>                                           <span class="st">"Björt Framtíð"</span>,</span>
<span id="cb9-11"><a href="#cb9-11" aria-hidden="true" tabindex="-1"></a>                                           <span class="st">"Viðreisn"</span>,</span>
<span id="cb9-12"><a href="#cb9-12" aria-hidden="true" tabindex="-1"></a>                                           <span class="st">"Miðflokkurinn"</span>),</span>
<span id="cb9-13"><a href="#cb9-13" aria-hidden="true" tabindex="-1"></a>                            current,</span>
<span id="cb9-14"><a href="#cb9-14" aria-hidden="true" tabindex="-1"></a>                            <span class="st">"Annað"</span>)) <span class="sc">|&gt;</span> </span>
<span id="cb9-15"><a href="#cb9-15" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">current =</span> <span class="fu">as_factor</span>(current),</span>
<span id="cb9-16"><a href="#cb9-16" aria-hidden="true" tabindex="-1"></a>           <span class="at">current =</span> <span class="fu">fct_reorder</span>(current, p <span class="sc">*</span> (current <span class="sc">!=</span> <span class="st">"Annað"</span>), <span class="at">.fun =</span> max),</span>
<span id="cb9-17"><a href="#cb9-17" aria-hidden="true" tabindex="-1"></a>           <span class="at">curent =</span> <span class="fu">factor</span>(current, <span class="at">levels =</span> <span class="fu">rev</span>(<span class="fu">levels</span>(current)))) <span class="sc">|&gt;</span> </span>
<span id="cb9-18"><a href="#cb9-18" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">election =</span> <span class="fu">as.numeric</span>(<span class="fu">as.factor</span>(year)),</span>
<span id="cb9-19"><a href="#cb9-19" aria-hidden="true" tabindex="-1"></a>           <span class="at">text =</span> <span class="fu">str_c</span>(<span class="st">"Kaus síðast: "</span>, former, <span class="st">"</span><span class="sc">\n</span><span class="st">"</span>,</span>
<span id="cb9-20"><a href="#cb9-20" aria-hidden="true" tabindex="-1"></a>                        <span class="st">"Kaus nú: "</span>, current, <span class="st">"</span><span class="sc">\n</span><span class="st">"</span>,</span>
<span id="cb9-21"><a href="#cb9-21" aria-hidden="true" tabindex="-1"></a>                        <span class="st">"Hlutfall (af kjósendum síðast): "</span>, <span class="fu">percent</span>(p, <span class="at">accuracy =</span> <span class="fl">0.1</span>))) <span class="sc">|&gt;</span></span>
<span id="cb9-22"><a href="#cb9-22" aria-hidden="true" tabindex="-1"></a>    <span class="fu">ggplot</span>(<span class="fu">aes</span>(election, p, <span class="at">text =</span> text)) <span class="sc">+</span></span>
<span id="cb9-23"><a href="#cb9-23" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_col</span>(<span class="fu">aes</span>(<span class="at">fill =</span> current), <span class="at">position =</span> <span class="st">"stack"</span>, <span class="at">width =</span> <span class="dv">1</span>, <span class="at">alpha =</span> <span class="fl">0.7</span>) <span class="sc">+</span></span>
<span id="cb9-24"><a href="#cb9-24" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scale_x_continuous</span>(<span class="at">breaks =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">6</span>, <span class="at">labels =</span> <span class="fu">rev</span>(<span class="fu">unique</span>(d_retention<span class="sc">$</span>year))) <span class="sc">+</span></span>
<span id="cb9-25"><a href="#cb9-25" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scale_y_continuous</span>(<span class="at">labels =</span> <span class="fu">label_percent</span>()) <span class="sc">+</span></span>
<span id="cb9-26"><a href="#cb9-26" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scale_fill_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(Annad,</span>
<span id="cb9-27"><a href="#cb9-27" aria-hidden="true" tabindex="-1"></a>                                 xM,</span>
<span id="cb9-28"><a href="#cb9-28" aria-hidden="true" tabindex="-1"></a>                                 xFF,</span>
<span id="cb9-29"><a href="#cb9-29" aria-hidden="true" tabindex="-1"></a>                                 xC,</span>
<span id="cb9-30"><a href="#cb9-30" aria-hidden="true" tabindex="-1"></a>                                 xD,</span>
<span id="cb9-31"><a href="#cb9-31" aria-hidden="true" tabindex="-1"></a>                                 xBF,</span>
<span id="cb9-32"><a href="#cb9-32" aria-hidden="true" tabindex="-1"></a>                                 xB,</span>
<span id="cb9-33"><a href="#cb9-33" aria-hidden="true" tabindex="-1"></a>                                 xP,</span>
<span id="cb9-34"><a href="#cb9-34" aria-hidden="true" tabindex="-1"></a>                                 xS,</span>
<span id="cb9-35"><a href="#cb9-35" aria-hidden="true" tabindex="-1"></a>                                 xV)) <span class="sc">+</span></span>
<span id="cb9-36"><a href="#cb9-36" aria-hidden="true" tabindex="-1"></a>    <span class="fu">coord_cartesian</span>(<span class="at">expand =</span> F) <span class="sc">+</span></span>
<span id="cb9-37"><a href="#cb9-37" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme_cowplot</span>(<span class="at">font_size =</span> <span class="dv">11</span>, <span class="at">font_family =</span> <span class="st">"serif"</span>) <span class="sc">+</span></span>
<span id="cb9-38"><a href="#cb9-38" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme</span>(<span class="at">plot.caption =</span> <span class="fu">element_text</span>(<span class="at">hjust =</span> <span class="dv">0</span>)) <span class="sc">+</span></span>
<span id="cb9-39"><a href="#cb9-39" aria-hidden="true" tabindex="-1"></a>    <span class="fu">labs</span>(<span class="at">x =</span> <span class="cn">NULL</span>,</span>
<span id="cb9-40"><a href="#cb9-40" aria-hidden="true" tabindex="-1"></a>         <span class="at">y =</span> <span class="cn">NULL</span>,</span>
<span id="cb9-41"><a href="#cb9-41" aria-hidden="true" tabindex="-1"></a>         <span class="at">fill =</span> <span class="cn">NULL</span>,</span>
<span id="cb9-42"><a href="#cb9-42" aria-hidden="true" tabindex="-1"></a>         <span class="at">title =</span> <span class="st">"Hvert missa Vinstri Græn kjósendur sína?"</span>)</span>
<span id="cb9-43"><a href="#cb9-43" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-44"><a href="#cb9-44" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplotly</span>(p, <span class="at">tooltip =</span> <span class="st">"text"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div id="htmlwidget-b9e0d7225aa45636d723" style="width:100%;height:480px;" class="plotly html-widget"></div>
<script type="application/json" data-for="htmlwidget-b9e0d7225aa45636d723">{"x":{"data":[{"orientation":"v","width":[1,1,1,1,1,1,1,1,1,1,1,1,1,1],"base":[0.971631205673759,0.99290780141844,0.878923766816143,0.910313901345291,0.941704035874439,0.968609865470852,0.986547085201794,0.995515695067265,0.917241379310345,0.993103448275862,0.941666666666667,0.975,0.897058823529412,0.955882352941177],"x":[5,5,4,4,4,4,4,4,3,3,2,2,1,1],"y":[0.0212765957446809,0.00709219858156029,0.031390134529148,0.031390134529148,0.0269058295964126,0.0179372197309416,0.00896860986547088,0.00448430493273544,0.0758620689655173,0.00689655172413794,0.0333333333333333,0.0249999999999999,0.0588235294117647,0.0441176470588235],"text":["Kaus síðast: Vinstri Græn<br />Kaus nú: Annað<br />Hlutfall (af kjósendum síðast): 2.1%","Kaus síðast: Vinstri Græn<br />Kaus nú: Annað<br />Hlutfall (af kjósendum síðast): 0.7%","Kaus síðast: Vinstri Græn<br />Kaus nú: Annað<br />Hlutfall (af kjósendum síðast): 3.1%","Kaus síðast: Vinstri Græn<br />Kaus nú: Annað<br />Hlutfall (af kjósendum síðast): 3.1%","Kaus síðast: Vinstri Græn<br />Kaus nú: Annað<br />Hlutfall (af kjósendum síðast): 2.7%","Kaus síðast: Vinstri Græn<br />Kaus nú: Annað<br />Hlutfall (af kjósendum síðast): 1.8%","Kaus síðast: Vinstri Græn<br />Kaus nú: Annað<br />Hlutfall (af kjósendum síðast): 0.9%","Kaus síðast: Vinstri Græn<br />Kaus nú: Annað<br />Hlutfall (af kjósendum síðast): 0.4%","Kaus síðast: Vinstri Græn<br />Kaus nú: Annað<br />Hlutfall (af kjósendum síðast): 7.6%","Kaus síðast: Vinstri Græn<br />Kaus nú: Annað<br />Hlutfall (af kjósendum síðast): 0.7%","Kaus síðast: Vinstri Græn<br />Kaus nú: Annað<br />Hlutfall (af kjósendum síðast): 3.3%","Kaus síðast: Vinstri Græn<br />Kaus nú: Annað<br />Hlutfall (af kjósendum síðast): 2.5%","Kaus síðast: Vinstri Græn<br />Kaus nú: Annað<br />Hlutfall (af kjósendum síðast): 5.9%","Kaus síðast: Vinstri Græn<br />Kaus nú: Annað<br />Hlutfall (af kjósendum síðast): 4.4%"],"type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(229,216,189,0.7)","line":{"width":1.88976377952756,"color":"transparent"}},"name":"Annað","legendgroup":"Annað","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"orientation":"v","width":1,"base":0.996527777777778,"x":[6],"y":[0.00347222222222221],"text":"Kaus síðast: Vinstri Græn<br />Kaus nú: Miðflokkurinn<br />Hlutfall (af kjósendum síðast): 0.3%","type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(8,48,107,0.7)","line":{"width":1.88976377952756,"color":"transparent"}},"name":"Miðflokkurinn","legendgroup":"Miðflokkurinn","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"orientation":"v","width":1,"base":0.975694444444444,"x":[6],"y":[0.0208333333333334],"text":"Kaus síðast: Vinstri Græn<br />Kaus nú: Flokkur Fólksins<br />Hlutfall (af kjósendum síðast): 2.1%","type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(254,227,145,0.7)","line":{"width":1.88976377952756,"color":"transparent"}},"name":"Flokkur Fólksins","legendgroup":"Flokkur Fólksins","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"orientation":"v","width":[1,1],"base":[0.951388888888889,0.936170212765957],"x":[6,5],"y":[0.0243055555555556,0.0354609929078014],"text":["Kaus síðast: Vinstri Græn<br />Kaus nú: Viðreisn<br />Hlutfall (af kjósendum síðast): 2.4%","Kaus síðast: Vinstri Græn<br />Kaus nú: Viðreisn<br />Hlutfall (af kjósendum síðast): 3.5%"],"type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(255,127,0,0.7)","line":{"width":1.88976377952756,"color":"transparent"}},"name":"Viðreisn","legendgroup":"Viðreisn","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"orientation":"v","width":[1,1,1,1,1,1],"base":[0.934027777777778,0.900709219858156,0.834080717488789,0.903448275862069,0.908333333333333,0.882352941176471],"x":[6,5,4,3,2,1],"y":[0.017361111111111,0.0354609929078015,0.0448430493273543,0.0137931034482759,0.0333333333333333,0.0147058823529412],"text":["Kaus síðast: Vinstri Græn<br />Kaus nú: Sjálfstæðisflokkurinn<br />Hlutfall (af kjósendum síðast): 1.7%","Kaus síðast: Vinstri Græn<br />Kaus nú: Sjálfstæðisflokkurinn<br />Hlutfall (af kjósendum síðast): 3.5%","Kaus síðast: Vinstri Græn<br />Kaus nú: Sjálfstæðisflokkurinn<br />Hlutfall (af kjósendum síðast): 4.5%","Kaus síðast: Vinstri Græn<br />Kaus nú: Sjálfstæðisflokkurinn<br />Hlutfall (af kjósendum síðast): 1.4%","Kaus síðast: Vinstri Græn<br />Kaus nú: Sjálfstæðisflokkurinn<br />Hlutfall (af kjósendum síðast): 3.3%","Kaus síðast: Vinstri Græn<br />Kaus nú: Sjálfstæðisflokkurinn<br />Hlutfall (af kjósendum síðast): 1.5%"],"type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(55,126,184,0.7)","line":{"width":1.88976377952756,"color":"transparent"}},"name":"Sjálfstæðisflokkurinn","legendgroup":"Sjálfstæðisflokkurinn","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"orientation":"v","width":[1,1,1],"base":[0.927083333333333,0.765957446808511,0.789237668161435],"x":[6,5,4],"y":[0.00694444444444453,0.134751773049645,0.0448430493273543],"text":["Kaus síðast: Vinstri Græn<br />Kaus nú: Björt Framtíð<br />Hlutfall (af kjósendum síðast): 0.7%","Kaus síðast: Vinstri Græn<br />Kaus nú: Björt Framtíð<br />Hlutfall (af kjósendum síðast): 13.5%","Kaus síðast: Vinstri Græn<br />Kaus nú: Björt Framtíð<br />Hlutfall (af kjósendum síðast): 4.5%"],"type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(202,178,214,0.7)","line":{"width":1.88976377952756,"color":"transparent"}},"name":"Björt Framtíð","legendgroup":"Björt Framtíð","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"orientation":"v","width":[1,1,1,1,1,1],"base":[0.868055555555556,0.737588652482269,0.609865470852018,0.848275862068965,0.883333333333333,0.794117647058824],"x":[6,5,4,3,2,1],"y":[0.0590277777777777,0.0283687943262412,0.179372197309417,0.0551724137931034,0.025,0.088235294117647],"text":["Kaus síðast: Vinstri Græn<br />Kaus nú: Framsóknarflokkurinn<br />Hlutfall (af kjósendum síðast): 5.9%","Kaus síðast: Vinstri Græn<br />Kaus nú: Framsóknarflokkurinn<br />Hlutfall (af kjósendum síðast): 2.8%","Kaus síðast: Vinstri Græn<br />Kaus nú: Framsóknarflokkurinn<br />Hlutfall (af kjósendum síðast): 17.9%","Kaus síðast: Vinstri Græn<br />Kaus nú: Framsóknarflokkurinn<br />Hlutfall (af kjósendum síðast): 5.5%","Kaus síðast: Vinstri Græn<br />Kaus nú: Framsóknarflokkurinn<br />Hlutfall (af kjósendum síðast): 2.5%","Kaus síðast: Vinstri Græn<br />Kaus nú: Framsóknarflokkurinn<br />Hlutfall (af kjósendum síðast): 8.8%"],"type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(178,223,138,0.7)","line":{"width":1.88976377952756,"color":"transparent"}},"name":"Framsóknarflokkurinn","legendgroup":"Framsóknarflokkurinn","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"orientation":"v","width":[1,1,1],"base":[0.829861111111111,0.517730496453901,0.542600896860987],"x":[6,5,4],"y":[0.0381944444444445,0.219858156028369,0.0672645739910314],"text":["Kaus síðast: Vinstri Græn<br />Kaus nú: Píratar<br />Hlutfall (af kjósendum síðast): 3.8%","Kaus síðast: Vinstri Græn<br />Kaus nú: Píratar<br />Hlutfall (af kjósendum síðast): 22.0%","Kaus síðast: Vinstri Græn<br />Kaus nú: Píratar<br />Hlutfall (af kjósendum síðast): 6.7%"],"type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(152,78,163,0.7)","line":{"width":1.88976377952756,"color":"transparent"}},"name":"Píratar","legendgroup":"Píratar","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"orientation":"v","width":[1,1,1,1,1,1],"base":[0.666666666666667,0.51063829787234,0.439461883408072,0.751724137931034,0.766666666666667,0.455882352941176],"x":[6,5,4,3,2,1],"y":[0.163194444444444,0.00709219858156029,0.103139013452915,0.096551724137931,0.116666666666667,0.338235294117647],"text":["Kaus síðast: Vinstri Græn<br />Kaus nú: Samfylkingin<br />Hlutfall (af kjósendum síðast): 16.3%","Kaus síðast: Vinstri Græn<br />Kaus nú: Samfylkingin<br />Hlutfall (af kjósendum síðast): 0.7%","Kaus síðast: Vinstri Græn<br />Kaus nú: Samfylkingin<br />Hlutfall (af kjósendum síðast): 10.3%","Kaus síðast: Vinstri Græn<br />Kaus nú: Samfylkingin<br />Hlutfall (af kjósendum síðast): 9.7%","Kaus síðast: Vinstri Græn<br />Kaus nú: Samfylkingin<br />Hlutfall (af kjósendum síðast): 11.7%","Kaus síðast: Vinstri Græn<br />Kaus nú: Samfylkingin<br />Hlutfall (af kjósendum síðast): 33.8%"],"type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(228,26,28,0.7)","line":{"width":1.88976377952756,"color":"transparent"}},"name":"Samfylkingin","legendgroup":"Samfylkingin","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"orientation":"v","width":[1,1,1,1,1,1],"base":[0,0,0,0,0,0],"x":[6,5,4,3,2,1],"y":[0.666666666666667,0.51063829787234,0.439461883408072,0.751724137931034,0.766666666666667,0.455882352941176],"text":["Kaus síðast: Vinstri Græn<br />Kaus nú: Vinstri Græn<br />Hlutfall (af kjósendum síðast): 66.7%","Kaus síðast: Vinstri Græn<br />Kaus nú: Vinstri Græn<br />Hlutfall (af kjósendum síðast): 51.1%","Kaus síðast: Vinstri Græn<br />Kaus nú: Vinstri Græn<br />Hlutfall (af kjósendum síðast): 43.9%","Kaus síðast: Vinstri Græn<br />Kaus nú: Vinstri Græn<br />Hlutfall (af kjósendum síðast): 75.2%","Kaus síðast: Vinstri Græn<br />Kaus nú: Vinstri Græn<br />Hlutfall (af kjósendum síðast): 76.7%","Kaus síðast: Vinstri Græn<br />Kaus nú: Vinstri Græn<br />Hlutfall (af kjósendum síðast): 45.6%"],"type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(35,139,69,0.7)","line":{"width":1.88976377952756,"color":"transparent"}},"name":"Vinstri Græn","legendgroup":"Vinstri Græn","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null}],"layout":{"margin":{"t":47.3111545988258,"r":7.30593607305936,"b":30.7893020221787,"l":36.0078277886497},"font":{"color":"rgba(0,0,0,1)","family":"serif","size":14.6118721461187},"title":{"text":"<b> Hvert missa Vinstri Græn kjósendur sína? <\/b>","font":{"color":"rgba(0,0,0,1)","family":"serif","size":16.6992824527071},"x":0,"xref":"paper"},"xaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[0.5,6.5],"tickmode":"array","ticktext":[2003,2007,2009,2013,2016,2017],"tickvals":[1,2,3,4,5,6],"categoryorder":"array","categoryarray":[2003,2007,2009,2013,2016,2017],"nticks":null,"ticks":"outside","tickcolor":"rgba(0,0,0,1)","ticklen":3.65296803652968,"tickwidth":0.66417600664176,"showticklabels":true,"tickfont":{"color":"rgba(0,0,0,1)","family":"serif","size":12.5244618395303},"tickangle":-0,"showline":true,"linecolor":"rgba(0,0,0,1)","linewidth":0.66417600664176,"showgrid":false,"gridcolor":null,"gridwidth":0,"zeroline":false,"anchor":"y","title":{"text":"","font":{"color":"rgba(0,0,0,1)","family":"serif","size":14.6118721461187}},"hoverformat":".2f"},"yaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[0,1],"tickmode":"array","ticktext":["0%","25%","50%","75%","100%"],"tickvals":[0,0.25,0.5,0.75,1],"categoryorder":"array","categoryarray":["0%","25%","50%","75%","100%"],"nticks":null,"ticks":"outside","tickcolor":"rgba(0,0,0,1)","ticklen":3.65296803652968,"tickwidth":0.66417600664176,"showticklabels":true,"tickfont":{"color":"rgba(0,0,0,1)","family":"serif","size":12.5244618395303},"tickangle":-0,"showline":true,"linecolor":"rgba(0,0,0,1)","linewidth":0.66417600664176,"showgrid":false,"gridcolor":null,"gridwidth":0,"zeroline":false,"anchor":"x","title":{"text":"","font":{"color":"rgba(0,0,0,1)","family":"serif","size":14.6118721461187}},"hoverformat":".2f"},"shapes":[{"type":"rect","fillcolor":null,"line":{"color":null,"width":0,"linetype":[]},"yref":"paper","xref":"paper","x0":0,"x1":1,"y0":0,"y1":1}],"showlegend":true,"legend":{"bgcolor":null,"bordercolor":null,"borderwidth":0,"font":{"color":"rgba(0,0,0,1)","family":"serif","size":12.5244618395303},"title":{"text":"","font":{"color":"rgba(0,0,0,1)","family":"serif","size":14.6118721461187}}},"hovermode":"closest","barmode":"relative"},"config":{"doubleClick":"reset","modeBarButtonsToAdd":["hoverclosest","hovercompare"],"showSendToCloud":false},"source":"A","attrs":{"11e122e4fe8b1":{"x":{},"y":{},"text":{},"fill":{},"type":"bar"}},"cur_data":"11e122e4fe8b1","visdat":{"11e122e4fe8b1":["function (y) ","x"]},"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.2,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
</div>
</div>
</div>
</div>
</div>
</section>
</section>
<section id="hvaðan-koma-atkvæðin" class="level1">
<h1>Hvaðan koma atkvæðin?</h1>
<p>Flokkar missa kjósendur, en einhverja nýja þurfa þau að fá, annars hefði enginn flokkur neina kjósendur! Hérna skoðum við spurninguna:</p>
<p>“Af öllum sem kusu flokk X í nýliðnum kosningum, hversu há % kaus aðra flokka í kosningum þar á undan?”</p>
<section id="útbúa-gögnin-1" class="level2">
<h2 class="anchored" data-anchor-id="útbúa-gögnin-1">Útbúa gögnin</h2>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a>preprocess_data_recruitment <span class="ot">&lt;-</span> <span class="cf">function</span>(doi, filename, year) {</span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">get_dataframe_by_name</span>(filename,</span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a>                          doi,</span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a>                          <span class="at">original =</span> <span class="cn">TRUE</span>,</span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true" tabindex="-1"></a>                          <span class="at">.f =</span> haven<span class="sc">::</span>read_sav) <span class="sc">|&gt;</span> </span>
<span id="cb10-6"><a href="#cb10-6" aria-hidden="true" tabindex="-1"></a>        <span class="fu">select</span>(<span class="at">current =</span> <span class="fu">starts_with</span>(<span class="st">"prtvote"</span>), <span class="at">former =</span> <span class="fu">starts_with</span>(<span class="st">"prtfvote"</span>), age) <span class="sc">|&gt;</span> </span>
<span id="cb10-7"><a href="#cb10-7" aria-hidden="true" tabindex="-1"></a>        <span class="fu">mutate_at</span>(<span class="fu">vars</span>(<span class="fu">everything</span>(), <span class="sc">-</span>age), as_factor) <span class="sc">|&gt;</span> </span>
<span id="cb10-8"><a href="#cb10-8" aria-hidden="true" tabindex="-1"></a>        <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">as.character</span>(former) <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"No, did not vote"</span>,</span>
<span id="cb10-9"><a href="#cb10-9" aria-hidden="true" tabindex="-1"></a>                                            <span class="st">"Not applicable"</span>,</span>
<span id="cb10-10"><a href="#cb10-10" aria-hidden="true" tabindex="-1"></a>                                            <span class="st">"Don‘t remember what I voted"</span>,</span>
<span id="cb10-11"><a href="#cb10-11" aria-hidden="true" tabindex="-1"></a>                                            <span class="st">"95"</span>,</span>
<span id="cb10-12"><a href="#cb10-12" aria-hidden="true" tabindex="-1"></a>                                            <span class="st">"Cast a blank or invalid ballot"</span>,</span>
<span id="cb10-13"><a href="#cb10-13" aria-hidden="true" tabindex="-1"></a>                                            <span class="st">"Voted, refuses to say for what party"</span>,</span>
<span id="cb10-14"><a href="#cb10-14" aria-hidden="true" tabindex="-1"></a>                                            <span class="st">"Other party, what party"</span>,</span>
<span id="cb10-15"><a href="#cb10-15" aria-hidden="true" tabindex="-1"></a>                                            <span class="st">"Refuses to answer (volunteered)"</span>,</span>
<span id="cb10-16"><a href="#cb10-16" aria-hidden="true" tabindex="-1"></a>                                            <span class="st">"Don’t know (volunteered)"</span>,</span>
<span id="cb10-17"><a href="#cb10-17" aria-hidden="true" tabindex="-1"></a>                                            <span class="st">"Voted, does not want to say which party"</span>,</span>
<span id="cb10-18"><a href="#cb10-18" aria-hidden="true" tabindex="-1"></a>                                            <span class="st">"Cast a blank ballot"</span>,</span>
<span id="cb10-19"><a href="#cb10-19" aria-hidden="true" tabindex="-1"></a>                                            <span class="st">"Cast an invalid vote"</span>,</span>
<span id="cb10-20"><a href="#cb10-20" aria-hidden="true" tabindex="-1"></a>                                            <span class="st">"Missing"</span>,</span>
<span id="cb10-21"><a href="#cb10-21" aria-hidden="true" tabindex="-1"></a>                                            <span class="st">"Voted, doesn‘t want to say for what party"</span>,</span>
<span id="cb10-22"><a href="#cb10-22" aria-hidden="true" tabindex="-1"></a>                                            <span class="st">"Another party or party list, which?"</span>,</span>
<span id="cb10-23"><a href="#cb10-23" aria-hidden="true" tabindex="-1"></a>                                            <span class="st">"Refuses to answer"</span>)) <span class="sc">|&gt;</span> </span>
<span id="cb10-24"><a href="#cb10-24" aria-hidden="true" tabindex="-1"></a>        <span class="fu">drop_na</span>(former) <span class="sc">|&gt;</span> </span>
<span id="cb10-25"><a href="#cb10-25" aria-hidden="true" tabindex="-1"></a>        <span class="fu">group_by</span>(current, former) <span class="sc">|&gt;</span> </span>
<span id="cb10-26"><a href="#cb10-26" aria-hidden="true" tabindex="-1"></a>        <span class="fu">summarise</span>(<span class="at">n =</span> <span class="fu">n</span>(),</span>
<span id="cb10-27"><a href="#cb10-27" aria-hidden="true" tabindex="-1"></a>                  <span class="at">age =</span> <span class="fu">mean</span>(age),</span>
<span id="cb10-28"><a href="#cb10-28" aria-hidden="true" tabindex="-1"></a>                  <span class="at">.groups =</span> <span class="st">"drop"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb10-29"><a href="#cb10-29" aria-hidden="true" tabindex="-1"></a>        <span class="fu">arrange</span>(current, <span class="fu">desc</span>(n)) <span class="sc">|&gt;</span> </span>
<span id="cb10-30"><a href="#cb10-30" aria-hidden="true" tabindex="-1"></a>        <span class="fu">group_by</span>(current) <span class="sc">|&gt;</span> </span>
<span id="cb10-31"><a href="#cb10-31" aria-hidden="true" tabindex="-1"></a>        <span class="fu">mutate</span>(<span class="at">p =</span> n <span class="sc">/</span> <span class="fu">sum</span>(n),</span>
<span id="cb10-32"><a href="#cb10-32" aria-hidden="true" tabindex="-1"></a>               <span class="at">cum_p =</span> <span class="fu">cumsum</span>(p)) <span class="sc">|&gt;</span> </span>
<span id="cb10-33"><a href="#cb10-33" aria-hidden="true" tabindex="-1"></a>        <span class="fu">ungroup</span>() <span class="sc">|&gt;</span> </span>
<span id="cb10-34"><a href="#cb10-34" aria-hidden="true" tabindex="-1"></a>        <span class="fu">mutate</span>(<span class="at">year =</span> year)</span>
<span id="cb10-35"><a href="#cb10-35" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb10-36"><a href="#cb10-36" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-37"><a href="#cb10-37" aria-hidden="true" tabindex="-1"></a>translate_parties <span class="ot">&lt;-</span> <span class="cf">function</span>(name) {</span>
<span id="cb10-38"><a href="#cb10-38" aria-hidden="true" tabindex="-1"></a>    parties <span class="ot">&lt;-</span> <span class="fu">c</span>(</span>
<span id="cb10-39"><a href="#cb10-39" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Independence Party"</span> <span class="ot">=</span> <span class="st">"Sjálfstæðisflokkurinn"</span>,</span>
<span id="cb10-40"><a href="#cb10-40" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Progressive Party"</span> <span class="ot">=</span> <span class="st">"Framsóknarflokkurinn"</span>,</span>
<span id="cb10-41"><a href="#cb10-41" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Social Democratic Alliance"</span> <span class="ot">=</span> <span class="st">"Samfylkingin"</span>,</span>
<span id="cb10-42"><a href="#cb10-42" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Left Green Movement"</span> <span class="ot">=</span> <span class="st">"Vinstri Græn"</span>,</span>
<span id="cb10-43"><a href="#cb10-43" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Pirate Party"</span> <span class="ot">=</span> <span class="st">"Píratar"</span>,</span>
<span id="cb10-44"><a href="#cb10-44" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Reform Party"</span> <span class="ot">=</span> <span class="st">"Viðreisn"</span>,</span>
<span id="cb10-45"><a href="#cb10-45" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Centre Party"</span> <span class="ot">=</span> <span class="st">"Miðflokkurinn"</span>,</span>
<span id="cb10-46"><a href="#cb10-46" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Bright Future"</span> <span class="ot">=</span> <span class="st">"Björt Framtíð"</span>,</span>
<span id="cb10-47"><a href="#cb10-47" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Peoples party"</span> <span class="ot">=</span> <span class="st">"Flokkur Fólksins"</span>,</span>
<span id="cb10-48"><a href="#cb10-48" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Civic Movement"</span> <span class="ot">=</span> <span class="st">"Borgarahreyfingin"</span>,</span>
<span id="cb10-49"><a href="#cb10-49" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Dawn"</span> <span class="ot">=</span> <span class="st">"Dögun"</span>,</span>
<span id="cb10-50"><a href="#cb10-50" aria-hidden="true" tabindex="-1"></a>        <span class="st">"Liberal Party"</span> <span class="ot">=</span> <span class="st">"Frjálslyndi flokkurinn"</span></span>
<span id="cb10-51"><a href="#cb10-51" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb10-52"><a href="#cb10-52" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb10-53"><a href="#cb10-53" aria-hidden="true" tabindex="-1"></a>    <span class="fu">ifelse</span>(name <span class="sc">%in%</span> <span class="fu">names</span>(parties), parties[name], name)</span>
<span id="cb10-54"><a href="#cb10-54" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb10-55"><a href="#cb10-55" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-56"><a href="#cb10-56" aria-hidden="true" tabindex="-1"></a>d_recruitment <span class="ot">&lt;-</span> <span class="fu">pmap</span>(<span class="fu">list</span>(<span class="at">doi =</span> doi, <span class="at">filename =</span> filename, <span class="at">year =</span> year), preprocess_data_recruitment) <span class="sc">|&gt;</span> </span>
<span id="cb10-57"><a href="#cb10-57" aria-hidden="true" tabindex="-1"></a>    <span class="fu">reduce</span>(bind_rows) <span class="sc">|&gt;</span> </span>
<span id="cb10-58"><a href="#cb10-58" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate_at</span>(<span class="fu">vars</span>(current, former), as.character) <span class="sc">|&gt;</span> </span>
<span id="cb10-59"><a href="#cb10-59" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate_at</span>(<span class="fu">vars</span>(current, former), translate_parties)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section>
<section id="nýliðun-frá-öðrum-flokkum" class="level2">
<h2 class="anchored" data-anchor-id="nýliðun-frá-öðrum-flokkum">Nýliðun frá öðrum flokkum</h2>
<div class="cell" data-fig.asp="0.5">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a>plot_dat <span class="ot">&lt;-</span> d_recruitment <span class="sc">|&gt;</span> </span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">filter</span>(current <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"Framsóknarflokkurinn"</span>,</span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a>                          <span class="st">"Píratar"</span>,</span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a>                          <span class="st">"Samfylkingin"</span>,</span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a>                          <span class="st">"Sjálfstæðisflokkurinn"</span>,</span>
<span id="cb11-6"><a href="#cb11-6" aria-hidden="true" tabindex="-1"></a>                          <span class="st">"Vinstri Græn"</span>),</span>
<span id="cb11-7"><a href="#cb11-7" aria-hidden="true" tabindex="-1"></a>           current <span class="sc">!=</span> former,</span>
<span id="cb11-8"><a href="#cb11-8" aria-hidden="true" tabindex="-1"></a>           <span class="sc">!</span>former <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"No, did not vote"</span>,</span>
<span id="cb11-9"><a href="#cb11-9" aria-hidden="true" tabindex="-1"></a>                          <span class="st">"Not applicable"</span>,</span>
<span id="cb11-10"><a href="#cb11-10" aria-hidden="true" tabindex="-1"></a>                          <span class="st">"Don‘t remember what I voted"</span>,</span>
<span id="cb11-11"><a href="#cb11-11" aria-hidden="true" tabindex="-1"></a>                          <span class="st">"Nýr kjósandi"</span>,</span>
<span id="cb11-12"><a href="#cb11-12" aria-hidden="true" tabindex="-1"></a>                          <span class="st">"Skilaði auðu"</span>,</span>
<span id="cb11-13"><a href="#cb11-13" aria-hidden="true" tabindex="-1"></a>                          <span class="st">"Voted, refuses to say for what party"</span>,</span>
<span id="cb11-14"><a href="#cb11-14" aria-hidden="true" tabindex="-1"></a>                          <span class="st">"Other party, what party"</span>,</span>
<span id="cb11-15"><a href="#cb11-15" aria-hidden="true" tabindex="-1"></a>                          <span class="st">"Refuses to answer (volunteered)"</span>,</span>
<span id="cb11-16"><a href="#cb11-16" aria-hidden="true" tabindex="-1"></a>                          <span class="st">"Don’t know (volunteered)"</span>),</span>
<span id="cb11-17"><a href="#cb11-17" aria-hidden="true" tabindex="-1"></a>           <span class="sc">!</span>(current <span class="sc">==</span> <span class="st">"Píratar"</span> <span class="sc">&amp;</span> year <span class="sc">==</span> <span class="dv">2013</span>), <span class="sc">!</span>(current <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"Flokkur Fólksins"</span>, <span class="st">"Viðreisn"</span>) <span class="sc">&amp;</span> year <span class="sc">==</span> <span class="dv">2016</span>)) <span class="sc">|&gt;</span> </span>
<span id="cb11-18"><a href="#cb11-18" aria-hidden="true" tabindex="-1"></a>    <span class="fu">group_by</span>(current, year) <span class="sc">|&gt;</span> </span>
<span id="cb11-19"><a href="#cb11-19" aria-hidden="true" tabindex="-1"></a>    <span class="fu">summarise</span>(<span class="at">p =</span> <span class="fu">sum</span>(p),</span>
<span id="cb11-20"><a href="#cb11-20" aria-hidden="true" tabindex="-1"></a>              <span class="at">.groups =</span> <span class="st">"drop"</span>)</span>
<span id="cb11-21"><a href="#cb11-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-22"><a href="#cb11-22" aria-hidden="true" tabindex="-1"></a>plot_text <span class="ot">&lt;-</span> plot_dat <span class="sc">|&gt;</span> </span>
<span id="cb11-23"><a href="#cb11-23" aria-hidden="true" tabindex="-1"></a>    <span class="fu">filter</span>(year <span class="sc">==</span> <span class="fu">max</span>(year)) <span class="sc">|&gt;</span> </span>
<span id="cb11-24"><a href="#cb11-24" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">p =</span> <span class="fu">case_when</span>(current <span class="sc">==</span> <span class="st">"Flokkur Fólksins"</span> <span class="sc">~</span> p <span class="sc">+</span> <span class="fl">0.025</span>,</span>
<span id="cb11-25"><a href="#cb11-25" aria-hidden="true" tabindex="-1"></a>                         current <span class="sc">==</span> <span class="st">"Framsóknarflokkurinn"</span> <span class="sc">~</span> p <span class="sc">-</span> <span class="fl">0.01</span>,</span>
<span id="cb11-26"><a href="#cb11-26" aria-hidden="true" tabindex="-1"></a>                         current <span class="sc">==</span> <span class="st">"Viðreisn"</span> <span class="sc">~</span> p <span class="sc">-</span> <span class="fl">0.01</span>,</span>
<span id="cb11-27"><a href="#cb11-27" aria-hidden="true" tabindex="-1"></a>                         <span class="cn">TRUE</span> <span class="sc">~</span> p))</span>
<span id="cb11-28"><a href="#cb11-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-29"><a href="#cb11-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-30"><a href="#cb11-30" aria-hidden="true" tabindex="-1"></a>p <span class="ot">&lt;-</span> plot_dat <span class="sc">|&gt;</span> </span>
<span id="cb11-31"><a href="#cb11-31" aria-hidden="true" tabindex="-1"></a>    <span class="fu">ggplot</span>(<span class="fu">aes</span>(year, p)) <span class="sc">+</span></span>
<span id="cb11-32"><a href="#cb11-32" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_line</span>(<span class="fu">aes</span>(<span class="at">col =</span> current, <span class="at">group =</span> current)) <span class="sc">+</span></span>
<span id="cb11-33"><a href="#cb11-33" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">col =</span> current, <span class="at">group =</span> current)) <span class="sc">+</span></span>
<span id="cb11-34"><a href="#cb11-34" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_text</span>(<span class="at">data =</span> plot_text, </span>
<span id="cb11-35"><a href="#cb11-35" aria-hidden="true" tabindex="-1"></a>              <span class="fu">aes</span>(<span class="at">label =</span> current, <span class="at">col =</span> current), <span class="at">hjust =</span> <span class="dv">0</span>, <span class="at">nudge_x =</span> <span class="fl">0.2</span>) <span class="sc">+</span></span>
<span id="cb11-36"><a href="#cb11-36" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_rangeframe</span>() <span class="sc">+</span></span>
<span id="cb11-37"><a href="#cb11-37" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scale_y_continuous</span>(<span class="at">limits =</span> <span class="fu">range</span>(plot_dat<span class="sc">$</span>p), </span>
<span id="cb11-38"><a href="#cb11-38" aria-hidden="true" tabindex="-1"></a>                       <span class="at">labels =</span> <span class="fu">label_percent</span>(),</span>
<span id="cb11-39"><a href="#cb11-39" aria-hidden="true" tabindex="-1"></a>                       <span class="at">breaks =</span> <span class="fu">c</span>(<span class="fu">range</span>(plot_dat<span class="sc">$</span>p), <span class="fl">0.1</span>, <span class="fl">0.2</span>, <span class="fl">0.3</span>, <span class="fl">0.4</span>, <span class="fl">0.5</span>, <span class="fl">0.6</span>)) <span class="sc">+</span></span>
<span id="cb11-40"><a href="#cb11-40" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scale_x_continuous</span>(<span class="at">breaks =</span> <span class="fu">c</span>(<span class="dv">2003</span>, <span class="dv">2007</span>, <span class="dv">2009</span>, <span class="dv">2013</span>, <span class="dv">2016</span>, <span class="dv">2017</span>),</span>
<span id="cb11-41"><a href="#cb11-41" aria-hidden="true" tabindex="-1"></a>                       <span class="at">limits =</span> <span class="fu">c</span>(<span class="dv">2003</span>, <span class="fl">2021.5</span>)) <span class="sc">+</span></span>
<span id="cb11-42"><a href="#cb11-42" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scale_colour_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(xB,</span>
<span id="cb11-43"><a href="#cb11-43" aria-hidden="true" tabindex="-1"></a>                                   xP,</span>
<span id="cb11-44"><a href="#cb11-44" aria-hidden="true" tabindex="-1"></a>                                   xS,</span>
<span id="cb11-45"><a href="#cb11-45" aria-hidden="true" tabindex="-1"></a>                                   xD,</span>
<span id="cb11-46"><a href="#cb11-46" aria-hidden="true" tabindex="-1"></a>                                   xV)) <span class="sc">+</span></span>
<span id="cb11-47"><a href="#cb11-47" aria-hidden="true" tabindex="-1"></a>    <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Nýliðun kjósenda frá öðrum flokkum í alþingiskosningum frá 2003 - 2017"</span>,</span>
<span id="cb11-48"><a href="#cb11-48" aria-hidden="true" tabindex="-1"></a>         <span class="at">subtitle =</span> <span class="st">"Hlutfall kjósenda sem kusu annan flokk í síðustu kosningum"</span>,</span>
<span id="cb11-49"><a href="#cb11-49" aria-hidden="true" tabindex="-1"></a>         <span class="at">x =</span> <span class="cn">NULL</span>,</span>
<span id="cb11-50"><a href="#cb11-50" aria-hidden="true" tabindex="-1"></a>         <span class="at">y =</span> <span class="cn">NULL</span>) <span class="sc">+</span></span>
<span id="cb11-51"><a href="#cb11-51" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme_tufte</span>() <span class="sc">+</span></span>
<span id="cb11-52"><a href="#cb11-52" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme</span>(<span class="at">plot.caption =</span> <span class="fu">element_text</span>(<span class="at">hjust =</span> <span class="dv">0</span>),</span>
<span id="cb11-53"><a href="#cb11-53" aria-hidden="true" tabindex="-1"></a>          <span class="at">legend.position =</span> <span class="st">"none"</span>,</span>
<span id="cb11-54"><a href="#cb11-54" aria-hidden="true" tabindex="-1"></a>          <span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">face =</span> <span class="st">"bold"</span>))</span>
<span id="cb11-55"><a href="#cb11-55" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-56"><a href="#cb11-56" aria-hidden="true" tabindex="-1"></a>p</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img src="index_files/figure-html/unnamed-chunk-11-1.png" class="img-fluid" style="width:100.0%"></p>
</div>
</div>
</section>
<section id="hvaðan-sækja-flokkar-kjósendur-sína" class="level2">
<h2 class="anchored" data-anchor-id="hvaðan-sækja-flokkar-kjósendur-sína">Hvaðan sækja flokkar kjósendur sína?</h2>
<div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-2-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-2-1" role="tab" aria-controls="tabset-2-1" aria-selected="true">Samfylkingin</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-2-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-2-2" role="tab" aria-controls="tabset-2-2" aria-selected="false">Sjálfstæðisflokkurinn</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-2-3-tab" data-bs-toggle="tab" data-bs-target="#tabset-2-3" role="tab" aria-controls="tabset-2-3" aria-selected="false">Framsóknarflokkurinn</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-2-4-tab" data-bs-toggle="tab" data-bs-target="#tabset-2-4" role="tab" aria-controls="tabset-2-4" aria-selected="false">Vinstri Græn</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-2-5-tab" data-bs-toggle="tab" data-bs-target="#tabset-2-5" role="tab" aria-controls="tabset-2-5" aria-selected="false">Viðreisn</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-2-6-tab" data-bs-toggle="tab" data-bs-target="#tabset-2-6" role="tab" aria-controls="tabset-2-6" aria-selected="false">Píratar</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-2-7-tab" data-bs-toggle="tab" data-bs-target="#tabset-2-7" role="tab" aria-controls="tabset-2-7" aria-selected="false">Miðflokurinn</a></li></ul>
<div class="tab-content">
<div id="tabset-2-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-2-1-tab">
<div class="cell" data-fig.asp="0.5">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a>p <span class="ot">&lt;-</span> d_recruitment <span class="sc">|&gt;</span> </span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">filter</span>(current <span class="sc">==</span> <span class="st">"Samfylkingin"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">former =</span> <span class="fu">ifelse</span>(former <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"Samfylkingin"</span>,</span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a>                                         <span class="st">"Vinstri Græn"</span>,</span>
<span id="cb12-5"><a href="#cb12-5" aria-hidden="true" tabindex="-1"></a>                                         <span class="st">"Sjálfstæðisflokkurinn"</span>, </span>
<span id="cb12-6"><a href="#cb12-6" aria-hidden="true" tabindex="-1"></a>                                         <span class="st">"Píratar"</span>,</span>
<span id="cb12-7"><a href="#cb12-7" aria-hidden="true" tabindex="-1"></a>                                         <span class="st">"Framsóknarflokkurinn"</span>, </span>
<span id="cb12-8"><a href="#cb12-8" aria-hidden="true" tabindex="-1"></a>                                         <span class="st">"Flokkur Fólksins"</span>,</span>
<span id="cb12-9"><a href="#cb12-9" aria-hidden="true" tabindex="-1"></a>                                         <span class="st">"Píratar"</span>,</span>
<span id="cb12-10"><a href="#cb12-10" aria-hidden="true" tabindex="-1"></a>                                         <span class="st">"Björt Framtíð"</span>,</span>
<span id="cb12-11"><a href="#cb12-11" aria-hidden="true" tabindex="-1"></a>                                         <span class="st">"Viðreisn"</span>,</span>
<span id="cb12-12"><a href="#cb12-12" aria-hidden="true" tabindex="-1"></a>                                         <span class="st">"Miðflokkurinn"</span>),</span>
<span id="cb12-13"><a href="#cb12-13" aria-hidden="true" tabindex="-1"></a>                           former,</span>
<span id="cb12-14"><a href="#cb12-14" aria-hidden="true" tabindex="-1"></a>                           <span class="st">"Annað"</span>)) <span class="sc">|&gt;</span> </span>
<span id="cb12-15"><a href="#cb12-15" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">former =</span> <span class="fu">as_factor</span>(former),</span>
<span id="cb12-16"><a href="#cb12-16" aria-hidden="true" tabindex="-1"></a>           <span class="at">former =</span> <span class="fu">fct_reorder</span>(former, p <span class="sc">*</span> (former <span class="sc">!=</span> <span class="st">"Annað"</span>) <span class="sc">+</span> <span class="fl">1e-8</span> <span class="sc">*</span> (former <span class="sc">==</span> <span class="st">"Miðflokkurinn"</span>), <span class="at">.fun =</span> max),</span>
<span id="cb12-17"><a href="#cb12-17" aria-hidden="true" tabindex="-1"></a>           <span class="at">election =</span> <span class="fu">as.numeric</span>(<span class="fu">as.factor</span>(year)),</span>
<span id="cb12-18"><a href="#cb12-18" aria-hidden="true" tabindex="-1"></a>           <span class="at">text =</span> <span class="fu">str_c</span>(<span class="st">"Kaus síðast: "</span>, former, <span class="st">"</span><span class="sc">\n</span><span class="st">"</span>,</span>
<span id="cb12-19"><a href="#cb12-19" aria-hidden="true" tabindex="-1"></a>                        <span class="st">"Kaus nú: "</span>, current, <span class="st">"</span><span class="sc">\n</span><span class="st">"</span>,</span>
<span id="cb12-20"><a href="#cb12-20" aria-hidden="true" tabindex="-1"></a>                        <span class="st">"Hlutfall (af kjósendum núna): "</span>, <span class="fu">percent</span>(p, <span class="at">accuracy =</span> <span class="fl">0.1</span>))) <span class="sc">|&gt;</span></span>
<span id="cb12-21"><a href="#cb12-21" aria-hidden="true" tabindex="-1"></a>    <span class="fu">ggplot</span>(<span class="fu">aes</span>(election, p, <span class="at">text =</span> text)) <span class="sc">+</span></span>
<span id="cb12-22"><a href="#cb12-22" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_col</span>(<span class="fu">aes</span>(<span class="at">fill =</span> former), <span class="at">position =</span> <span class="st">"stack"</span>, <span class="at">width =</span> <span class="dv">1</span>, <span class="at">alpha =</span> <span class="fl">0.7</span>) <span class="sc">+</span></span>
<span id="cb12-23"><a href="#cb12-23" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scale_x_continuous</span>(<span class="at">breaks =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">6</span>, <span class="at">labels =</span> <span class="fu">rev</span>(<span class="fu">unique</span>(d_retention<span class="sc">$</span>year))) <span class="sc">+</span></span>
<span id="cb12-24"><a href="#cb12-24" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scale_y_continuous</span>(<span class="at">labels =</span> <span class="fu">label_percent</span>()) <span class="sc">+</span></span>
<span id="cb12-25"><a href="#cb12-25" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scale_fill_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(Annad,</span>
<span id="cb12-26"><a href="#cb12-26" aria-hidden="true" tabindex="-1"></a>                                 xC,</span>
<span id="cb12-27"><a href="#cb12-27" aria-hidden="true" tabindex="-1"></a>                                 xP,</span>
<span id="cb12-28"><a href="#cb12-28" aria-hidden="true" tabindex="-1"></a>                                 xBF,</span>
<span id="cb12-29"><a href="#cb12-29" aria-hidden="true" tabindex="-1"></a>                                 xB,</span>
<span id="cb12-30"><a href="#cb12-30" aria-hidden="true" tabindex="-1"></a>                                 xD,</span>
<span id="cb12-31"><a href="#cb12-31" aria-hidden="true" tabindex="-1"></a>                                 xV,</span>
<span id="cb12-32"><a href="#cb12-32" aria-hidden="true" tabindex="-1"></a>                                 xS)) <span class="sc">+</span></span>
<span id="cb12-33"><a href="#cb12-33" aria-hidden="true" tabindex="-1"></a>    <span class="fu">coord_cartesian</span>(<span class="at">expand =</span> F) <span class="sc">+</span></span>
<span id="cb12-34"><a href="#cb12-34" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme_cowplot</span>(<span class="at">font_size =</span> <span class="dv">11</span>, <span class="at">font_family =</span> <span class="st">"serif"</span>) <span class="sc">+</span></span>
<span id="cb12-35"><a href="#cb12-35" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme</span>(<span class="at">plot.caption =</span> <span class="fu">element_text</span>(<span class="at">hjust =</span> <span class="dv">0</span>)) <span class="sc">+</span></span>
<span id="cb12-36"><a href="#cb12-36" aria-hidden="true" tabindex="-1"></a>    <span class="fu">labs</span>(<span class="at">x =</span> <span class="cn">NULL</span>,</span>
<span id="cb12-37"><a href="#cb12-37" aria-hidden="true" tabindex="-1"></a>         <span class="at">y =</span> <span class="cn">NULL</span>,</span>
<span id="cb12-38"><a href="#cb12-38" aria-hidden="true" tabindex="-1"></a>         <span class="at">fill =</span> <span class="cn">NULL</span>,</span>
<span id="cb12-39"><a href="#cb12-39" aria-hidden="true" tabindex="-1"></a>         <span class="at">title =</span> <span class="st">"Hvert sækir Samfylkingin kjósendur sína?"</span>)</span>
<span id="cb12-40"><a href="#cb12-40" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-41"><a href="#cb12-41" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplotly</span>(p, <span class="at">tooltip =</span> <span class="st">"text"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div id="htmlwidget-fb0cf196e528490453cb" style="width:100%;height:480px;" class="plotly html-widget"></div>
<script type="application/json" data-for="htmlwidget-fb0cf196e528490453cb">{"x":{"data":[{"orientation":"v","width":[1,1,1,1,1,1,1,1,1,1],"base":[0.995391705069124,0.964912280701754,0.982456140350877,0.993670886075949,0.958904109589041,0.993150684931507,0.974169741697417,0.996309963099631,0.985507246376812,0.996376811594203],"x":[6,5,5,4,3,3,2,2,1,1],"y":[0.00460829493087556,0.0175438596491228,0.0175438596491229,0.00632911392405067,0.0342465753424658,0.00684931506849318,0.0221402214022141,0.00369003690036895,0.0108695652173912,0.00362318840579712],"text":["Kaus síðast: Annað<br />Kaus nú: Samfylkingin<br />Hlutfall (af kjósendum núna): 0.5%","Kaus síðast: Annað<br />Kaus nú: Samfylkingin<br />Hlutfall (af kjósendum núna): 1.8%","Kaus síðast: Annað<br />Kaus nú: Samfylkingin<br />Hlutfall (af kjósendum núna): 1.8%","Kaus síðast: Annað<br />Kaus nú: Samfylkingin<br />Hlutfall (af kjósendum núna): 0.6%","Kaus síðast: Annað<br />Kaus nú: Samfylkingin<br />Hlutfall (af kjósendum núna): 3.4%","Kaus síðast: Annað<br />Kaus nú: Samfylkingin<br />Hlutfall (af kjósendum núna): 0.7%","Kaus síðast: Annað<br />Kaus nú: Samfylkingin<br />Hlutfall (af kjósendum núna): 2.2%","Kaus síðast: Annað<br />Kaus nú: Samfylkingin<br />Hlutfall (af kjósendum núna): 0.4%","Kaus síðast: Annað<br />Kaus nú: Samfylkingin<br />Hlutfall (af kjósendum núna): 1.1%","Kaus síðast: Annað<br />Kaus nú: Samfylkingin<br />Hlutfall (af kjósendum núna): 0.4%"],"type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(229,216,189,0.7)","line":{"width":1.88976377952756,"color":"transparent"}},"name":"Annað","legendgroup":"Annað","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"orientation":"v","width":1,"base":0.921658986175115,"x":[6],"y":[0.0737327188940092],"text":"Kaus síðast: Viðreisn<br />Kaus nú: Samfylkingin<br />Hlutfall (af kjósendum núna): 7.4%","type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(255,127,0,0.7)","line":{"width":1.88976377952756,"color":"transparent"}},"name":"Viðreisn","legendgroup":"Viðreisn","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"orientation":"v","width":[1,1],"base":[0.797235023041475,0.947368421052632],"x":[6,5],"y":[0.124423963133641,0.0175438596491228],"text":["Kaus síðast: Píratar<br />Kaus nú: Samfylkingin<br />Hlutfall (af kjósendum núna): 12.4%","Kaus síðast: Píratar<br />Kaus nú: Samfylkingin<br />Hlutfall (af kjósendum núna): 1.8%"],"type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(152,78,163,0.7)","line":{"width":1.88976377952756,"color":"transparent"}},"name":"Píratar","legendgroup":"Píratar","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"orientation":"v","width":[1,1],"base":[0.654377880184332,0.894736842105263],"x":[6,5],"y":[0.142857142857143,0.0526315789473685],"text":["Kaus síðast: Björt Framtíð<br />Kaus nú: Samfylkingin<br />Hlutfall (af kjósendum núna): 14.3%","Kaus síðast: Björt Framtíð<br />Kaus nú: Samfylkingin<br />Hlutfall (af kjósendum núna): 5.3%"],"type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(202,178,214,0.7)","line":{"width":1.88976377952756,"color":"transparent"}},"name":"Björt Framtíð","legendgroup":"Björt Framtíð","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"orientation":"v","width":[1,1,1,1,1,1],"base":[0.631336405529954,0.859649122807018,0.987341772151899,0.893835616438356,0.896678966789668,0.833333333333333],"x":[6,5,4,3,2,1],"y":[0.0230414746543779,0.0350877192982456,0.00632911392405067,0.0650684931506849,0.0774907749077491,0.152173913043478],"text":["Kaus síðast: Framsóknarflokkurinn<br />Kaus nú: Samfylkingin<br />Hlutfall (af kjósendum núna): 2.3%","Kaus síðast: Framsóknarflokkurinn<br />Kaus nú: Samfylkingin<br />Hlutfall (af kjósendum núna): 3.5%","Kaus síðast: Framsóknarflokkurinn<br />Kaus nú: Samfylkingin<br />Hlutfall (af kjósendum núna): 0.6%","Kaus síðast: Framsóknarflokkurinn<br />Kaus nú: Samfylkingin<br />Hlutfall (af kjósendum núna): 6.5%","Kaus síðast: Framsóknarflokkurinn<br />Kaus nú: Samfylkingin<br />Hlutfall (af kjósendum núna): 7.7%","Kaus síðast: Framsóknarflokkurinn<br />Kaus nú: Samfylkingin<br />Hlutfall (af kjósendum núna): 15.2%"],"type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(178,223,138,0.7)","line":{"width":1.88976377952756,"color":"transparent"}},"name":"Framsóknarflokkurinn","legendgroup":"Framsóknarflokkurinn","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"orientation":"v","width":[1,1,1,1,1,1],"base":[0.612903225806452,0.807017543859649,0.949367088607595,0.712328767123288,0.789667896678967,0.739130434782609],"x":[6,5,4,3,2,1],"y":[0.0184331797235023,0.0526315789473684,0.0379746835443038,0.181506849315069,0.107011070110701,0.0942028985507246],"text":["Kaus síðast: Sjálfstæðisflokkurinn<br />Kaus nú: Samfylkingin<br />Hlutfall (af kjósendum núna): 1.8%","Kaus síðast: Sjálfstæðisflokkurinn<br />Kaus nú: Samfylkingin<br />Hlutfall (af kjósendum núna): 5.3%","Kaus síðast: Sjálfstæðisflokkurinn<br />Kaus nú: Samfylkingin<br />Hlutfall (af kjósendum núna): 3.8%","Kaus síðast: Sjálfstæðisflokkurinn<br />Kaus nú: Samfylkingin<br />Hlutfall (af kjósendum núna): 18.2%","Kaus síðast: Sjálfstæðisflokkurinn<br />Kaus nú: Samfylkingin<br />Hlutfall (af kjósendum núna): 10.7%","Kaus síðast: Sjálfstæðisflokkurinn<br />Kaus nú: Samfylkingin<br />Hlutfall (af kjósendum núna): 9.4%"],"type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(55,126,184,0.7)","line":{"width":1.88976377952756,"color":"transparent"}},"name":"Sjálfstæðisflokkurinn","legendgroup":"Sjálfstæðisflokkurinn","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"orientation":"v","width":[1,1,1,1,1,1],"base":[0.3963133640553,0.789473684210526,0.80379746835443,0.664383561643836,0.738007380073801,0.655797101449275],"x":[6,5,4,3,2,1],"y":[0.216589861751152,0.0175438596491229,0.145569620253165,0.047945205479452,0.051660516605166,0.0833333333333334],"text":["Kaus síðast: Vinstri Græn<br />Kaus nú: Samfylkingin<br />Hlutfall (af kjósendum núna): 21.7%","Kaus síðast: Vinstri Græn<br />Kaus nú: Samfylkingin<br />Hlutfall (af kjósendum núna): 1.8%","Kaus síðast: Vinstri Græn<br />Kaus nú: Samfylkingin<br />Hlutfall (af kjósendum núna): 14.6%","Kaus síðast: Vinstri Græn<br />Kaus nú: Samfylkingin<br />Hlutfall (af kjósendum núna): 4.8%","Kaus síðast: Vinstri Græn<br />Kaus nú: Samfylkingin<br />Hlutfall (af kjósendum núna): 5.2%","Kaus síðast: Vinstri Græn<br />Kaus nú: Samfylkingin<br />Hlutfall (af kjósendum núna): 8.3%"],"type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(35,139,69,0.7)","line":{"width":1.88976377952756,"color":"transparent"}},"name":"Vinstri Græn","legendgroup":"Vinstri Græn","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"orientation":"v","width":[1,1,1,1,1,1],"base":[0,0,0,0,0,0],"x":[6,5,4,3,2,1],"y":[0.3963133640553,0.789473684210526,0.80379746835443,0.664383561643836,0.738007380073801,0.655797101449275],"text":["Kaus síðast: Samfylkingin<br />Kaus nú: Samfylkingin<br />Hlutfall (af kjósendum núna): 39.6%","Kaus síðast: Samfylkingin<br />Kaus nú: Samfylkingin<br />Hlutfall (af kjósendum núna): 78.9%","Kaus síðast: Samfylkingin<br />Kaus nú: Samfylkingin<br />Hlutfall (af kjósendum núna): 80.4%","Kaus síðast: Samfylkingin<br />Kaus nú: Samfylkingin<br />Hlutfall (af kjósendum núna): 66.4%","Kaus síðast: Samfylkingin<br />Kaus nú: Samfylkingin<br />Hlutfall (af kjósendum núna): 73.8%","Kaus síðast: Samfylkingin<br />Kaus nú: Samfylkingin<br />Hlutfall (af kjósendum núna): 65.6%"],"type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(228,26,28,0.7)","line":{"width":1.88976377952756,"color":"transparent"}},"name":"Samfylkingin","legendgroup":"Samfylkingin","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null}],"layout":{"margin":{"t":47.3111545988258,"r":7.30593607305936,"b":30.7893020221787,"l":36.0078277886497},"font":{"color":"rgba(0,0,0,1)","family":"serif","size":14.6118721461187},"title":{"text":"<b> Hvert sækir Samfylkingin kjósendur sína? <\/b>","font":{"color":"rgba(0,0,0,1)","family":"serif","size":16.6992824527071},"x":0,"xref":"paper"},"xaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[0.5,6.5],"tickmode":"array","ticktext":[2003,2007,2009,2013,2016,2017],"tickvals":[1,2,3,4,5,6],"categoryorder":"array","categoryarray":[2003,2007,2009,2013,2016,2017],"nticks":null,"ticks":"outside","tickcolor":"rgba(0,0,0,1)","ticklen":3.65296803652968,"tickwidth":0.66417600664176,"showticklabels":true,"tickfont":{"color":"rgba(0,0,0,1)","family":"serif","size":12.5244618395303},"tickangle":-0,"showline":true,"linecolor":"rgba(0,0,0,1)","linewidth":0.66417600664176,"showgrid":false,"gridcolor":null,"gridwidth":0,"zeroline":false,"anchor":"y","title":{"text":"","font":{"color":"rgba(0,0,0,1)","family":"serif","size":14.6118721461187}},"hoverformat":".2f"},"yaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[0,1],"tickmode":"array","ticktext":["0%","25%","50%","75%","100%"],"tickvals":[0,0.25,0.5,0.75,1],"categoryorder":"array","categoryarray":["0%","25%","50%","75%","100%"],"nticks":null,"ticks":"outside","tickcolor":"rgba(0,0,0,1)","ticklen":3.65296803652968,"tickwidth":0.66417600664176,"showticklabels":true,"tickfont":{"color":"rgba(0,0,0,1)","family":"serif","size":12.5244618395303},"tickangle":-0,"showline":true,"linecolor":"rgba(0,0,0,1)","linewidth":0.66417600664176,"showgrid":false,"gridcolor":null,"gridwidth":0,"zeroline":false,"anchor":"x","title":{"text":"","font":{"color":"rgba(0,0,0,1)","family":"serif","size":14.6118721461187}},"hoverformat":".2f"},"shapes":[{"type":"rect","fillcolor":null,"line":{"color":null,"width":0,"linetype":[]},"yref":"paper","xref":"paper","x0":0,"x1":1,"y0":0,"y1":1}],"showlegend":true,"legend":{"bgcolor":null,"bordercolor":null,"borderwidth":0,"font":{"color":"rgba(0,0,0,1)","family":"serif","size":12.5244618395303},"title":{"text":"","font":{"color":"rgba(0,0,0,1)","family":"serif","size":14.6118721461187}}},"hovermode":"closest","barmode":"relative"},"config":{"doubleClick":"reset","modeBarButtonsToAdd":["hoverclosest","hovercompare"],"showSendToCloud":false},"source":"A","attrs":{"11e12adbe5fe":{"x":{},"y":{},"text":{},"fill":{},"type":"bar"}},"cur_data":"11e12adbe5fe","visdat":{"11e12adbe5fe":["function (y) ","x"]},"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.2,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
</div>
</div>
</div>
<div id="tabset-2-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-2-2-tab">
<div class="cell" data-fig.asp="0.5">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a>p <span class="ot">&lt;-</span> d_recruitment <span class="sc">|&gt;</span> </span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">filter</span>(current <span class="sc">==</span> <span class="st">"Sjálfstæðisflokkurinn"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">former =</span> <span class="fu">ifelse</span>(former <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"Samfylkingin"</span>,</span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a>                                         <span class="st">"Vinstri Græn"</span>,</span>
<span id="cb13-5"><a href="#cb13-5" aria-hidden="true" tabindex="-1"></a>                                         <span class="st">"Sjálfstæðisflokkurinn"</span>, </span>
<span id="cb13-6"><a href="#cb13-6" aria-hidden="true" tabindex="-1"></a>                                         <span class="st">"Píratar"</span>,</span>
<span id="cb13-7"><a href="#cb13-7" aria-hidden="true" tabindex="-1"></a>                                         <span class="st">"Framsóknarflokkurinn"</span>, </span>
<span id="cb13-8"><a href="#cb13-8" aria-hidden="true" tabindex="-1"></a>                                         <span class="st">"Píratar"</span>,</span>
<span id="cb13-9"><a href="#cb13-9" aria-hidden="true" tabindex="-1"></a>                                         <span class="st">"Björt Framtíð"</span>,</span>
<span id="cb13-10"><a href="#cb13-10" aria-hidden="true" tabindex="-1"></a>                                         <span class="st">"Viðreisn"</span>,</span>
<span id="cb13-11"><a href="#cb13-11" aria-hidden="true" tabindex="-1"></a>                                         <span class="st">"Miðflokkurinn"</span>),</span>
<span id="cb13-12"><a href="#cb13-12" aria-hidden="true" tabindex="-1"></a>                           former,</span>
<span id="cb13-13"><a href="#cb13-13" aria-hidden="true" tabindex="-1"></a>                           <span class="st">"Annað"</span>)) <span class="sc">|&gt;</span> </span>
<span id="cb13-14"><a href="#cb13-14" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">former =</span> <span class="fu">as_factor</span>(former),</span>
<span id="cb13-15"><a href="#cb13-15" aria-hidden="true" tabindex="-1"></a>           <span class="at">former =</span> <span class="fu">fct_reorder</span>(former, p <span class="sc">*</span> (former <span class="sc">!=</span> <span class="st">"Annað"</span>), <span class="at">.fun =</span> max),</span>
<span id="cb13-16"><a href="#cb13-16" aria-hidden="true" tabindex="-1"></a>           <span class="at">election =</span> <span class="fu">as.numeric</span>(<span class="fu">as.factor</span>(year)),</span>
<span id="cb13-17"><a href="#cb13-17" aria-hidden="true" tabindex="-1"></a>           <span class="at">text =</span> <span class="fu">str_c</span>(<span class="st">"Kaus síðast: "</span>, former, <span class="st">"</span><span class="sc">\n</span><span class="st">"</span>,</span>
<span id="cb13-18"><a href="#cb13-18" aria-hidden="true" tabindex="-1"></a>                        <span class="st">"Kaus nú: "</span>, current, <span class="st">"</span><span class="sc">\n</span><span class="st">"</span>,</span>
<span id="cb13-19"><a href="#cb13-19" aria-hidden="true" tabindex="-1"></a>                        <span class="st">"Hlutfall (af kjósendum núna): "</span>, <span class="fu">percent</span>(p, <span class="at">accuracy =</span> <span class="fl">0.1</span>))) <span class="sc">|&gt;</span></span>
<span id="cb13-20"><a href="#cb13-20" aria-hidden="true" tabindex="-1"></a>    <span class="fu">ggplot</span>(<span class="fu">aes</span>(election, p, <span class="at">text =</span> text)) <span class="sc">+</span></span>
<span id="cb13-21"><a href="#cb13-21" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_col</span>(<span class="fu">aes</span>(<span class="at">fill =</span> former), <span class="at">position =</span> <span class="st">"stack"</span>, <span class="at">width =</span> <span class="dv">1</span>, <span class="at">alpha =</span> <span class="fl">0.7</span>) <span class="sc">+</span></span>
<span id="cb13-22"><a href="#cb13-22" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scale_x_continuous</span>(<span class="at">breaks =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">6</span>, <span class="at">labels =</span> <span class="fu">rev</span>(<span class="fu">unique</span>(d_retention<span class="sc">$</span>year))) <span class="sc">+</span></span>
<span id="cb13-23"><a href="#cb13-23" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scale_y_continuous</span>(<span class="at">labels =</span> <span class="fu">label_percent</span>()) <span class="sc">+</span></span>
<span id="cb13-24"><a href="#cb13-24" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scale_fill_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(Annad,</span>
<span id="cb13-25"><a href="#cb13-25" aria-hidden="true" tabindex="-1"></a>                                 xBF,</span>
<span id="cb13-26"><a href="#cb13-26" aria-hidden="true" tabindex="-1"></a>                                 xP,</span>
<span id="cb13-27"><a href="#cb13-27" aria-hidden="true" tabindex="-1"></a>                                 xV,</span>
<span id="cb13-28"><a href="#cb13-28" aria-hidden="true" tabindex="-1"></a>                                 xC,</span>
<span id="cb13-29"><a href="#cb13-29" aria-hidden="true" tabindex="-1"></a>                                 xS,</span>
<span id="cb13-30"><a href="#cb13-30" aria-hidden="true" tabindex="-1"></a>                                 xB,</span>
<span id="cb13-31"><a href="#cb13-31" aria-hidden="true" tabindex="-1"></a>                                 xD)) <span class="sc">+</span></span>
<span id="cb13-32"><a href="#cb13-32" aria-hidden="true" tabindex="-1"></a>    <span class="fu">coord_cartesian</span>(<span class="at">expand =</span> F) <span class="sc">+</span></span>
<span id="cb13-33"><a href="#cb13-33" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme_cowplot</span>(<span class="at">font_size =</span> <span class="dv">11</span>, <span class="at">font_family =</span> <span class="st">"serif"</span>) <span class="sc">+</span></span>
<span id="cb13-34"><a href="#cb13-34" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme</span>(<span class="at">plot.caption =</span> <span class="fu">element_text</span>(<span class="at">hjust =</span> <span class="dv">0</span>)) <span class="sc">+</span></span>
<span id="cb13-35"><a href="#cb13-35" aria-hidden="true" tabindex="-1"></a>    <span class="fu">labs</span>(<span class="at">x =</span> <span class="cn">NULL</span>,</span>
<span id="cb13-36"><a href="#cb13-36" aria-hidden="true" tabindex="-1"></a>         <span class="at">y =</span> <span class="cn">NULL</span>,</span>
<span id="cb13-37"><a href="#cb13-37" aria-hidden="true" tabindex="-1"></a>         <span class="at">fill =</span> <span class="cn">NULL</span>,</span>
<span id="cb13-38"><a href="#cb13-38" aria-hidden="true" tabindex="-1"></a>         <span class="at">title =</span> <span class="st">"Hvert sækir Sjálfstæðisflokkurinn kjósendur sína?"</span>)</span>
<span id="cb13-39"><a href="#cb13-39" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-40"><a href="#cb13-40" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplotly</span>(p, <span class="at">tooltip =</span> <span class="st">"text"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div id="htmlwidget-6b0e1fd2c5c628722ddb" style="width:100%;height:480px;" class="plotly html-widget"></div>
<script type="application/json" data-for="htmlwidget-6b0e1fd2c5c628722ddb">{"x":{"data":[{"orientation":"v","width":[1,1,1,1,1,1,1,1,1,1,1,1],"base":[0.991957104557641,0.994638069705094,0.997319034852547,0.982222222222222,0.995555555555556,0.98501872659176,0.99625468164794,0.995535714285714,0.988038277511962,0.997607655502392,0.990415335463259,0.996805111821086],"x":[6,6,6,5,5,4,4,3,2,2,1,1],"y":[0.00268096514745308,0.00268096514745308,0.00268096514745308,0.0133333333333333,0.00444444444444447,0.0112359550561798,0.00374531835205993,0.00446428571428581,0.00956937799043067,0.00239234449760761,0.00638977635782756,0.00319488817891367],"text":["Kaus síðast: Annað<br />Kaus nú: Sjálfstæðisflokkurinn<br />Hlutfall (af kjósendum núna): 0.3%","Kaus síðast: Annað<br />Kaus nú: Sjálfstæðisflokkurinn<br />Hlutfall (af kjósendum núna): 0.3%","Kaus síðast: Annað<br />Kaus nú: Sjálfstæðisflokkurinn<br />Hlutfall (af kjósendum núna): 0.3%","Kaus síðast: Annað<br />Kaus nú: Sjálfstæðisflokkurinn<br />Hlutfall (af kjósendum núna): 1.3%","Kaus síðast: Annað<br />Kaus nú: Sjálfstæðisflokkurinn<br />Hlutfall (af kjósendum núna): 0.4%","Kaus síðast: Annað<br />Kaus nú: Sjálfstæðisflokkurinn<br />Hlutfall (af kjósendum núna): 1.1%","Kaus síðast: Annað<br />Kaus nú: Sjálfstæðisflokkurinn<br />Hlutfall (af kjósendum núna): 0.4%","Kaus síðast: Annað<br />Kaus nú: Sjálfstæðisflokkurinn<br />Hlutfall (af kjósendum núna): 0.4%","Kaus síðast: Annað<br />Kaus nú: Sjálfstæðisflokkurinn<br />Hlutfall (af kjósendum núna): 1.0%","Kaus síðast: Annað<br />Kaus nú: Sjálfstæðisflokkurinn<br />Hlutfall (af kjósendum núna): 0.2%","Kaus síðast: Annað<br />Kaus nú: Sjálfstæðisflokkurinn<br />Hlutfall (af kjósendum núna): 0.6%","Kaus síðast: Annað<br />Kaus nú: Sjálfstæðisflokkurinn<br />Hlutfall (af kjósendum núna): 0.3%"],"type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(229,216,189,0.7)","line":{"width":1.88976377952756,"color":"transparent"}},"name":"Annað","legendgroup":"Annað","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"orientation":"v","width":[1,1],"base":[0.986595174262735,0.977777777777778],"x":[6,5],"y":[0.00536193029490617,0.00444444444444447],"text":["Kaus síðast: Björt Framtíð<br />Kaus nú: Sjálfstæðisflokkurinn<br />Hlutfall (af kjósendum núna): 0.5%","Kaus síðast: Björt Framtíð<br />Kaus nú: Sjálfstæðisflokkurinn<br />Hlutfall (af kjósendum núna): 0.4%"],"type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(202,178,214,0.7)","line":{"width":1.88976377952756,"color":"transparent"}},"name":"Björt Framtíð","legendgroup":"Björt Framtíð","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"orientation":"v","width":1,"base":0.978552278820375,"x":[6],"y":[0.00804289544235925],"text":"Kaus síðast: Píratar<br />Kaus nú: Sjálfstæðisflokkurinn<br />Hlutfall (af kjósendum núna): 0.8%","type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(152,78,163,0.7)","line":{"width":1.88976377952756,"color":"transparent"}},"name":"Píratar","legendgroup":"Píratar","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"orientation":"v","width":[1,1,1,1,1,1],"base":[0.96514745308311,0.955555555555555,0.947565543071161,0.986607142857143,0.978468899521531,0.987220447284345],"x":[6,5,4,3,2,1],"y":[0.0134048257372654,0.0222222222222223,0.0374531835205992,0.0089285714285714,0.00956937799043056,0.00319488817891367],"text":["Kaus síðast: Vinstri Græn<br />Kaus nú: Sjálfstæðisflokkurinn<br />Hlutfall (af kjósendum núna): 1.3%","Kaus síðast: Vinstri Græn<br />Kaus nú: Sjálfstæðisflokkurinn<br />Hlutfall (af kjósendum núna): 2.2%","Kaus síðast: Vinstri Græn<br />Kaus nú: Sjálfstæðisflokkurinn<br />Hlutfall (af kjósendum núna): 3.7%","Kaus síðast: Vinstri Græn<br />Kaus nú: Sjálfstæðisflokkurinn<br />Hlutfall (af kjósendum núna): 0.9%","Kaus síðast: Vinstri Græn<br />Kaus nú: Sjálfstæðisflokkurinn<br />Hlutfall (af kjósendum núna): 1.0%","Kaus síðast: Vinstri Græn<br />Kaus nú: Sjálfstæðisflokkurinn<br />Hlutfall (af kjósendum núna): 0.3%"],"type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(35,139,69,0.7)","line":{"width":1.88976377952756,"color":"transparent"}},"name":"Vinstri Græn","legendgroup":"Vinstri Græn","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"orientation":"v","width":1,"base":0.903485254691689,"x":[6],"y":[0.0616621983914208],"text":"Kaus síðast: Viðreisn<br />Kaus nú: Sjálfstæðisflokkurinn<br />Hlutfall (af kjósendum núna): 6.2%","type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(255,127,0,0.7)","line":{"width":1.88976377952756,"color":"transparent"}},"name":"Viðreisn","legendgroup":"Viðreisn","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"orientation":"v","width":[1,1,1,1,1,1],"base":[0.89544235924933,0.933333333333333,0.846441947565543,0.964285714285714,0.944976076555024,0.961661341853035],"x":[6,5,4,3,2,1],"y":[0.00804289544235925,0.0222222222222221,0.101123595505618,0.0223214285714286,0.0334928229665072,0.0255591054313099],"text":["Kaus síðast: Samfylkingin<br />Kaus nú: Sjálfstæðisflokkurinn<br />Hlutfall (af kjósendum núna): 0.8%","Kaus síðast: Samfylkingin<br />Kaus nú: Sjálfstæðisflokkurinn<br />Hlutfall (af kjósendum núna): 2.2%","Kaus síðast: Samfylkingin<br />Kaus nú: Sjálfstæðisflokkurinn<br />Hlutfall (af kjósendum núna): 10.1%","Kaus síðast: Samfylkingin<br />Kaus nú: Sjálfstæðisflokkurinn<br />Hlutfall (af kjósendum núna): 2.2%","Kaus síðast: Samfylkingin<br />Kaus nú: Sjálfstæðisflokkurinn<br />Hlutfall (af kjósendum núna): 3.3%","Kaus síðast: Samfylkingin<br />Kaus nú: Sjálfstæðisflokkurinn<br />Hlutfall (af kjósendum núna): 2.6%"],"type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(228,26,28,0.7)","line":{"width":1.88976377952756,"color":"transparent"}},"name":"Samfylkingin","legendgroup":"Samfylkingin","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"orientation":"v","width":[1,1,1,1,1,1],"base":[0.836461126005362,0.733333333333333,0.801498127340824,0.919642857142857,0.868421052631579,0.900958466453674],"x":[6,5,4,3,2,1],"y":[0.0589812332439679,0.2,0.0449438202247191,0.0446428571428571,0.0765550239234449,0.060702875399361],"text":["Kaus síðast: Framsóknarflokkurinn<br />Kaus nú: Sjálfstæðisflokkurinn<br />Hlutfall (af kjósendum núna): 5.9%","Kaus síðast: Framsóknarflokkurinn<br />Kaus nú: Sjálfstæðisflokkurinn<br />Hlutfall (af kjósendum núna): 20.0%","Kaus síðast: Framsóknarflokkurinn<br />Kaus nú: Sjálfstæðisflokkurinn<br />Hlutfall (af kjósendum núna): 4.5%","Kaus síðast: Framsóknarflokkurinn<br />Kaus nú: Sjálfstæðisflokkurinn<br />Hlutfall (af kjósendum núna): 4.5%","Kaus síðast: Framsóknarflokkurinn<br />Kaus nú: Sjálfstæðisflokkurinn<br />Hlutfall (af kjósendum núna): 7.7%","Kaus síðast: Framsóknarflokkurinn<br />Kaus nú: Sjálfstæðisflokkurinn<br />Hlutfall (af kjósendum núna): 6.1%"],"type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(178,223,138,0.7)","line":{"width":1.88976377952756,"color":"transparent"}},"name":"Framsóknarflokkurinn","legendgroup":"Framsóknarflokkurinn","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"orientation":"v","width":[1,1,1,1,1,1],"base":[0,0,0,0,0,0],"x":[6,5,4,3,2,1],"y":[0.836461126005362,0.733333333333333,0.801498127340824,0.919642857142857,0.868421052631579,0.900958466453674],"text":["Kaus síðast: Sjálfstæðisflokkurinn<br />Kaus nú: Sjálfstæðisflokkurinn<br />Hlutfall (af kjósendum núna): 83.6%","Kaus síðast: Sjálfstæðisflokkurinn<br />Kaus nú: Sjálfstæðisflokkurinn<br />Hlutfall (af kjósendum núna): 73.3%","Kaus síðast: Sjálfstæðisflokkurinn<br />Kaus nú: Sjálfstæðisflokkurinn<br />Hlutfall (af kjósendum núna): 80.1%","Kaus síðast: Sjálfstæðisflokkurinn<br />Kaus nú: Sjálfstæðisflokkurinn<br />Hlutfall (af kjósendum núna): 92.0%","Kaus síðast: Sjálfstæðisflokkurinn<br />Kaus nú: Sjálfstæðisflokkurinn<br />Hlutfall (af kjósendum núna): 86.8%","Kaus síðast: Sjálfstæðisflokkurinn<br />Kaus nú: Sjálfstæðisflokkurinn<br />Hlutfall (af kjósendum núna): 90.1%"],"type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(55,126,184,0.7)","line":{"width":1.88976377952756,"color":"transparent"}},"name":"Sjálfstæðisflokkurinn","legendgroup":"Sjálfstæðisflokkurinn","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null}],"layout":{"margin":{"t":47.3111545988258,"r":7.30593607305936,"b":30.7893020221787,"l":36.0078277886497},"font":{"color":"rgba(0,0,0,1)","family":"serif","size":14.6118721461187},"title":{"text":"<b> Hvert sækir Sjálfstæðisflokkurinn kjósendur sína? <\/b>","font":{"color":"rgba(0,0,0,1)","family":"serif","size":16.6992824527071},"x":0,"xref":"paper"},"xaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[0.5,6.5],"tickmode":"array","ticktext":[2003,2007,2009,2013,2016,2017],"tickvals":[1,2,3,4,5,6],"categoryorder":"array","categoryarray":[2003,2007,2009,2013,2016,2017],"nticks":null,"ticks":"outside","tickcolor":"rgba(0,0,0,1)","ticklen":3.65296803652968,"tickwidth":0.66417600664176,"showticklabels":true,"tickfont":{"color":"rgba(0,0,0,1)","family":"serif","size":12.5244618395303},"tickangle":-0,"showline":true,"linecolor":"rgba(0,0,0,1)","linewidth":0.66417600664176,"showgrid":false,"gridcolor":null,"gridwidth":0,"zeroline":false,"anchor":"y","title":{"text":"","font":{"color":"rgba(0,0,0,1)","family":"serif","size":14.6118721461187}},"hoverformat":".2f"},"yaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[0,1],"tickmode":"array","ticktext":["0%","25%","50%","75%","100%"],"tickvals":[0,0.25,0.5,0.75,1],"categoryorder":"array","categoryarray":["0%","25%","50%","75%","100%"],"nticks":null,"ticks":"outside","tickcolor":"rgba(0,0,0,1)","ticklen":3.65296803652968,"tickwidth":0.66417600664176,"showticklabels":true,"tickfont":{"color":"rgba(0,0,0,1)","family":"serif","size":12.5244618395303},"tickangle":-0,"showline":true,"linecolor":"rgba(0,0,0,1)","linewidth":0.66417600664176,"showgrid":false,"gridcolor":null,"gridwidth":0,"zeroline":false,"anchor":"x","title":{"text":"","font":{"color":"rgba(0,0,0,1)","family":"serif","size":14.6118721461187}},"hoverformat":".2f"},"shapes":[{"type":"rect","fillcolor":null,"line":{"color":null,"width":0,"linetype":[]},"yref":"paper","xref":"paper","x0":0,"x1":1,"y0":0,"y1":1}],"showlegend":true,"legend":{"bgcolor":null,"bordercolor":null,"borderwidth":0,"font":{"color":"rgba(0,0,0,1)","family":"serif","size":12.5244618395303},"title":{"text":"","font":{"color":"rgba(0,0,0,1)","family":"serif","size":14.6118721461187}}},"hovermode":"closest","barmode":"relative"},"config":{"doubleClick":"reset","modeBarButtonsToAdd":["hoverclosest","hovercompare"],"showSendToCloud":false},"source":"A","attrs":{"11e12446ca3de":{"x":{},"y":{},"text":{},"fill":{},"type":"bar"}},"cur_data":"11e12446ca3de","visdat":{"11e12446ca3de":["function (y) ","x"]},"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.2,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
</div>
</div>
</div>
<div id="tabset-2-3" class="tab-pane" role="tabpanel" aria-labelledby="tabset-2-3-tab">
<div class="cell" data-fig.asp="0.5">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a>p <span class="ot">&lt;-</span> d_recruitment <span class="sc">|&gt;</span> </span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">filter</span>(current <span class="sc">==</span> <span class="st">"Framsóknarflokkurinn"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">former =</span> <span class="fu">ifelse</span>(former <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"Samfylkingin"</span>,</span>
<span id="cb14-4"><a href="#cb14-4" aria-hidden="true" tabindex="-1"></a>                                         <span class="st">"Vinstri Græn"</span>,</span>
<span id="cb14-5"><a href="#cb14-5" aria-hidden="true" tabindex="-1"></a>                                         <span class="st">"Sjálfstæðisflokkurinn"</span>, </span>
<span id="cb14-6"><a href="#cb14-6" aria-hidden="true" tabindex="-1"></a>                                         <span class="st">"Píratar"</span>,</span>
<span id="cb14-7"><a href="#cb14-7" aria-hidden="true" tabindex="-1"></a>                                         <span class="st">"Framsóknarflokkurinn"</span>, </span>
<span id="cb14-8"><a href="#cb14-8" aria-hidden="true" tabindex="-1"></a>                                         <span class="st">"Píratar"</span>,</span>
<span id="cb14-9"><a href="#cb14-9" aria-hidden="true" tabindex="-1"></a>                                         <span class="st">"Björt Framtíð"</span>,</span>
<span id="cb14-10"><a href="#cb14-10" aria-hidden="true" tabindex="-1"></a>                                         <span class="st">"Viðreisn"</span>,</span>
<span id="cb14-11"><a href="#cb14-11" aria-hidden="true" tabindex="-1"></a>                                         <span class="st">"Miðflokkurinn"</span>),</span>
<span id="cb14-12"><a href="#cb14-12" aria-hidden="true" tabindex="-1"></a>                           former,</span>
<span id="cb14-13"><a href="#cb14-13" aria-hidden="true" tabindex="-1"></a>                           <span class="st">"Annað"</span>)) <span class="sc">|&gt;</span> </span>
<span id="cb14-14"><a href="#cb14-14" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">former =</span> <span class="fu">as_factor</span>(former),</span>
<span id="cb14-15"><a href="#cb14-15" aria-hidden="true" tabindex="-1"></a>           <span class="at">former =</span> <span class="fu">fct_reorder</span>(former, p <span class="sc">*</span> (former <span class="sc">!=</span> <span class="st">"Annað"</span>), <span class="at">.fun =</span> max),</span>
<span id="cb14-16"><a href="#cb14-16" aria-hidden="true" tabindex="-1"></a>           <span class="at">election =</span> <span class="fu">as.numeric</span>(<span class="fu">as.factor</span>(year)),</span>
<span id="cb14-17"><a href="#cb14-17" aria-hidden="true" tabindex="-1"></a>           <span class="at">text =</span> <span class="fu">str_c</span>(<span class="st">"Kaus síðast: "</span>, former, <span class="st">"</span><span class="sc">\n</span><span class="st">"</span>,</span>
<span id="cb14-18"><a href="#cb14-18" aria-hidden="true" tabindex="-1"></a>                        <span class="st">"Kaus nú: "</span>, current, <span class="st">"</span><span class="sc">\n</span><span class="st">"</span>,</span>
<span id="cb14-19"><a href="#cb14-19" aria-hidden="true" tabindex="-1"></a>                        <span class="st">"Hlutfall (af kjósendum núna): "</span>, <span class="fu">percent</span>(p, <span class="at">accuracy =</span> <span class="fl">0.1</span>))) <span class="sc">|&gt;</span></span>
<span id="cb14-20"><a href="#cb14-20" aria-hidden="true" tabindex="-1"></a>    <span class="fu">ggplot</span>(<span class="fu">aes</span>(election, p, <span class="at">text =</span> text)) <span class="sc">+</span></span>
<span id="cb14-21"><a href="#cb14-21" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_col</span>(<span class="fu">aes</span>(<span class="at">fill =</span> former), <span class="at">position =</span> <span class="st">"stack"</span>, <span class="at">width =</span> <span class="dv">1</span>, <span class="at">alpha =</span> <span class="fl">0.7</span>) <span class="sc">+</span></span>
<span id="cb14-22"><a href="#cb14-22" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scale_x_continuous</span>(<span class="at">breaks =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">6</span>, <span class="at">labels =</span> <span class="fu">rev</span>(<span class="fu">unique</span>(d_retention<span class="sc">$</span>year))) <span class="sc">+</span></span>
<span id="cb14-23"><a href="#cb14-23" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scale_y_continuous</span>(<span class="at">labels =</span> <span class="fu">label_percent</span>()) <span class="sc">+</span></span>
<span id="cb14-24"><a href="#cb14-24" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scale_fill_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(Annad,</span>
<span id="cb14-25"><a href="#cb14-25" aria-hidden="true" tabindex="-1"></a>                                 xP,</span>
<span id="cb14-26"><a href="#cb14-26" aria-hidden="true" tabindex="-1"></a>                                 xBF,</span>
<span id="cb14-27"><a href="#cb14-27" aria-hidden="true" tabindex="-1"></a>                                 xC,</span>
<span id="cb14-28"><a href="#cb14-28" aria-hidden="true" tabindex="-1"></a>                                 xV,</span>
<span id="cb14-29"><a href="#cb14-29" aria-hidden="true" tabindex="-1"></a>                                 xS,</span>
<span id="cb14-30"><a href="#cb14-30" aria-hidden="true" tabindex="-1"></a>                                 xD,</span>
<span id="cb14-31"><a href="#cb14-31" aria-hidden="true" tabindex="-1"></a>                                 xB)) <span class="sc">+</span></span>
<span id="cb14-32"><a href="#cb14-32" aria-hidden="true" tabindex="-1"></a>    <span class="fu">coord_cartesian</span>(<span class="at">expand =</span> F) <span class="sc">+</span></span>
<span id="cb14-33"><a href="#cb14-33" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme_cowplot</span>(<span class="at">font_size =</span> <span class="dv">11</span>, <span class="at">font_family =</span> <span class="st">"serif"</span>) <span class="sc">+</span></span>
<span id="cb14-34"><a href="#cb14-34" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme</span>(<span class="at">plot.caption =</span> <span class="fu">element_text</span>(<span class="at">hjust =</span> <span class="dv">0</span>)) <span class="sc">+</span></span>
<span id="cb14-35"><a href="#cb14-35" aria-hidden="true" tabindex="-1"></a>    <span class="fu">labs</span>(<span class="at">x =</span> <span class="cn">NULL</span>,</span>
<span id="cb14-36"><a href="#cb14-36" aria-hidden="true" tabindex="-1"></a>         <span class="at">y =</span> <span class="cn">NULL</span>,</span>
<span id="cb14-37"><a href="#cb14-37" aria-hidden="true" tabindex="-1"></a>         <span class="at">fill =</span> <span class="cn">NULL</span>,</span>
<span id="cb14-38"><a href="#cb14-38" aria-hidden="true" tabindex="-1"></a>         <span class="at">title =</span> <span class="st">"Hvert sækir Framsóknarflokurinn kjósendur sína?"</span>)</span>
<span id="cb14-39"><a href="#cb14-39" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-40"><a href="#cb14-40" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplotly</span>(p, <span class="at">tooltip =</span> <span class="st">"text"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div id="htmlwidget-70076143fa5e8ae6307e" style="width:100%;height:480px;" class="plotly html-widget"></div>
<script type="application/json" data-for="htmlwidget-70076143fa5e8ae6307e">{"x":{"data":[{"orientation":"v","width":[1,1,1,1,1,1,1,1,1],"base":[0.955974842767296,0.987421383647799,0.979591836734694,0.963636363636364,0.981818181818182,0.995454545454545,0.958620689655172,0.990476190476191,0.994219653179191],"x":[6,6,5,4,4,4,3,2,1],"y":[0.0314465408805031,0.0125786163522013,0.0204081632653061,0.0181818181818182,0.0136363636363637,0.00454545454545452,0.0413793103448276,0.00952380952380949,0.00578034682080919],"text":["Kaus síðast: Annað<br />Kaus nú: Framsóknarflokkurinn<br />Hlutfall (af kjósendum núna): 3.1%","Kaus síðast: Annað<br />Kaus nú: Framsóknarflokkurinn<br />Hlutfall (af kjósendum núna): 1.3%","Kaus síðast: Annað<br />Kaus nú: Framsóknarflokkurinn<br />Hlutfall (af kjósendum núna): 2.0%","Kaus síðast: Annað<br />Kaus nú: Framsóknarflokkurinn<br />Hlutfall (af kjósendum núna): 1.8%","Kaus síðast: Annað<br />Kaus nú: Framsóknarflokkurinn<br />Hlutfall (af kjósendum núna): 1.4%","Kaus síðast: Annað<br />Kaus nú: Framsóknarflokkurinn<br />Hlutfall (af kjósendum núna): 0.5%","Kaus síðast: Annað<br />Kaus nú: Framsóknarflokkurinn<br />Hlutfall (af kjósendum núna): 4.1%","Kaus síðast: Annað<br />Kaus nú: Framsóknarflokkurinn<br />Hlutfall (af kjósendum núna): 1.0%","Kaus síðast: Annað<br />Kaus nú: Framsóknarflokkurinn<br />Hlutfall (af kjósendum núna): 0.6%"],"type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(229,216,189,0.7)","line":{"width":1.88976377952756,"color":"transparent"}},"name":"Annað","legendgroup":"Annað","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"orientation":"v","width":1,"base":0.930817610062893,"x":[6],"y":[0.0251572327044025],"text":"Kaus síðast: Píratar<br />Kaus nú: Framsóknarflokkurinn<br />Hlutfall (af kjósendum núna): 2.5%","type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(152,78,163,0.7)","line":{"width":1.88976377952756,"color":"transparent"}},"name":"Píratar","legendgroup":"Píratar","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"orientation":"v","width":[1,1],"base":[0.880503144654088,0.959183673469388],"x":[6,5],"y":[0.050314465408805,0.020408163265306],"text":["Kaus síðast: Björt Framtíð<br />Kaus nú: Framsóknarflokkurinn<br />Hlutfall (af kjósendum núna): 5.0%","Kaus síðast: Björt Framtíð<br />Kaus nú: Framsóknarflokkurinn<br />Hlutfall (af kjósendum núna): 2.0%"],"type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(202,178,214,0.7)","line":{"width":1.88976377952756,"color":"transparent"}},"name":"Björt Framtíð","legendgroup":"Björt Framtíð","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"orientation":"v","width":1,"base":0.786163522012579,"x":[6],"y":[0.0943396226415094],"text":"Kaus síðast: Viðreisn<br />Kaus nú: Framsóknarflokkurinn<br />Hlutfall (af kjósendum núna): 9.4%","type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(255,127,0,0.7)","line":{"width":1.88976377952756,"color":"transparent"}},"name":"Viðreisn","legendgroup":"Viðreisn","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"orientation":"v","width":[1,1,1,1,1,1],"base":[0.679245283018868,0.918367346938776,0.781818181818182,0.903448275862069,0.961904761904762,0.959537572254335],"x":[6,5,4,3,2,1],"y":[0.106918238993711,0.0408163265306123,0.181818181818182,0.0551724137931034,0.0285714285714286,0.0346820809248555],"text":["Kaus síðast: Vinstri Græn<br />Kaus nú: Framsóknarflokkurinn<br />Hlutfall (af kjósendum núna): 10.7%","Kaus síðast: Vinstri Græn<br />Kaus nú: Framsóknarflokkurinn<br />Hlutfall (af kjósendum núna): 4.1%","Kaus síðast: Vinstri Græn<br />Kaus nú: Framsóknarflokkurinn<br />Hlutfall (af kjósendum núna): 18.2%","Kaus síðast: Vinstri Græn<br />Kaus nú: Framsóknarflokkurinn<br />Hlutfall (af kjósendum núna): 5.5%","Kaus síðast: Vinstri Græn<br />Kaus nú: Framsóknarflokkurinn<br />Hlutfall (af kjósendum núna): 2.9%","Kaus síðast: Vinstri Græn<br />Kaus nú: Framsóknarflokkurinn<br />Hlutfall (af kjósendum núna): 3.5%"],"type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(35,139,69,0.7)","line":{"width":1.88976377952756,"color":"transparent"}},"name":"Vinstri Græn","legendgroup":"Vinstri Græn","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"orientation":"v","width":[1,1,1,1,1,1],"base":[0.654088050314465,0.897959183673469,0.577272727272727,0.8,0.895238095238095,0.913294797687861],"x":[6,5,4,3,2,1],"y":[0.0251572327044025,0.0204081632653061,0.204545454545455,0.103448275862069,0.0666666666666668,0.046242774566474],"text":["Kaus síðast: Samfylkingin<br />Kaus nú: Framsóknarflokkurinn<br />Hlutfall (af kjósendum núna): 2.5%","Kaus síðast: Samfylkingin<br />Kaus nú: Framsóknarflokkurinn<br />Hlutfall (af kjósendum núna): 2.0%","Kaus síðast: Samfylkingin<br />Kaus nú: Framsóknarflokkurinn<br />Hlutfall (af kjósendum núna): 20.5%","Kaus síðast: Samfylkingin<br />Kaus nú: Framsóknarflokkurinn<br />Hlutfall (af kjósendum núna): 10.3%","Kaus síðast: Samfylkingin<br />Kaus nú: Framsóknarflokkurinn<br />Hlutfall (af kjósendum núna): 6.7%","Kaus síðast: Samfylkingin<br />Kaus nú: Framsóknarflokkurinn<br />Hlutfall (af kjósendum núna): 4.6%"],"type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(228,26,28,0.7)","line":{"width":1.88976377952756,"color":"transparent"}},"name":"Samfylkingin","legendgroup":"Samfylkingin","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"orientation":"v","width":[1,1,1,1,1,1],"base":[0.522012578616352,0.73469387755102,0.390909090909091,0.517241379310345,0.819047619047619,0.676300578034682],"x":[6,5,4,3,2,1],"y":[0.132075471698113,0.163265306122449,0.186363636363636,0.282758620689655,0.0761904761904761,0.236994219653179],"text":["Kaus síðast: Sjálfstæðisflokkurinn<br />Kaus nú: Framsóknarflokkurinn<br />Hlutfall (af kjósendum núna): 13.2%","Kaus síðast: Sjálfstæðisflokkurinn<br />Kaus nú: Framsóknarflokkurinn<br />Hlutfall (af kjósendum núna): 16.3%","Kaus síðast: Sjálfstæðisflokkurinn<br />Kaus nú: Framsóknarflokkurinn<br />Hlutfall (af kjósendum núna): 18.6%","Kaus síðast: Sjálfstæðisflokkurinn<br />Kaus nú: Framsóknarflokkurinn<br />Hlutfall (af kjósendum núna): 28.3%","Kaus síðast: Sjálfstæðisflokkurinn<br />Kaus nú: Framsóknarflokkurinn<br />Hlutfall (af kjósendum núna): 7.6%","Kaus síðast: Sjálfstæðisflokkurinn<br />Kaus nú: Framsóknarflokkurinn<br />Hlutfall (af kjósendum núna): 23.7%"],"type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(55,126,184,0.7)","line":{"width":1.88976377952756,"color":"transparent"}},"name":"Sjálfstæðisflokkurinn","legendgroup":"Sjálfstæðisflokkurinn","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"orientation":"v","width":[1,1,1,1,1,1],"base":[0,0,0,0,0,0],"x":[6,5,4,3,2,1],"y":[0.522012578616352,0.73469387755102,0.390909090909091,0.517241379310345,0.819047619047619,0.676300578034682],"text":["Kaus síðast: Framsóknarflokkurinn<br />Kaus nú: Framsóknarflokkurinn<br />Hlutfall (af kjósendum núna): 52.2%","Kaus síðast: Framsóknarflokkurinn<br />Kaus nú: Framsóknarflokkurinn<br />Hlutfall (af kjósendum núna): 73.5%","Kaus síðast: Framsóknarflokkurinn<br />Kaus nú: Framsóknarflokkurinn<br />Hlutfall (af kjósendum núna): 39.1%","Kaus síðast: Framsóknarflokkurinn<br />Kaus nú: Framsóknarflokkurinn<br />Hlutfall (af kjósendum núna): 51.7%","Kaus síðast: Framsóknarflokkurinn<br />Kaus nú: Framsóknarflokkurinn<br />Hlutfall (af kjósendum núna): 81.9%","Kaus síðast: Framsóknarflokkurinn<br />Kaus nú: Framsóknarflokkurinn<br />Hlutfall (af kjósendum núna): 67.6%"],"type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(178,223,138,0.7)","line":{"width":1.88976377952756,"color":"transparent"}},"name":"Framsóknarflokkurinn","legendgroup":"Framsóknarflokkurinn","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null}],"layout":{"margin":{"t":47.3111545988258,"r":7.30593607305936,"b":30.7893020221787,"l":36.0078277886497},"font":{"color":"rgba(0,0,0,1)","family":"serif","size":14.6118721461187},"title":{"text":"<b> Hvert sækir Framsóknarflokurinn kjósendur sína? <\/b>","font":{"color":"rgba(0,0,0,1)","family":"serif","size":16.6992824527071},"x":0,"xref":"paper"},"xaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[0.5,6.5],"tickmode":"array","ticktext":[2003,2007,2009,2013,2016,2017],"tickvals":[1,2,3,4,5,6],"categoryorder":"array","categoryarray":[2003,2007,2009,2013,2016,2017],"nticks":null,"ticks":"outside","tickcolor":"rgba(0,0,0,1)","ticklen":3.65296803652968,"tickwidth":0.66417600664176,"showticklabels":true,"tickfont":{"color":"rgba(0,0,0,1)","family":"serif","size":12.5244618395303},"tickangle":-0,"showline":true,"linecolor":"rgba(0,0,0,1)","linewidth":0.66417600664176,"showgrid":false,"gridcolor":null,"gridwidth":0,"zeroline":false,"anchor":"y","title":{"text":"","font":{"color":"rgba(0,0,0,1)","family":"serif","size":14.6118721461187}},"hoverformat":".2f"},"yaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[0,1],"tickmode":"array","ticktext":["0%","25%","50%","75%","100%"],"tickvals":[0,0.25,0.5,0.75,1],"categoryorder":"array","categoryarray":["0%","25%","50%","75%","100%"],"nticks":null,"ticks":"outside","tickcolor":"rgba(0,0,0,1)","ticklen":3.65296803652968,"tickwidth":0.66417600664176,"showticklabels":true,"tickfont":{"color":"rgba(0,0,0,1)","family":"serif","size":12.5244618395303},"tickangle":-0,"showline":true,"linecolor":"rgba(0,0,0,1)","linewidth":0.66417600664176,"showgrid":false,"gridcolor":null,"gridwidth":0,"zeroline":false,"anchor":"x","title":{"text":"","font":{"color":"rgba(0,0,0,1)","family":"serif","size":14.6118721461187}},"hoverformat":".2f"},"shapes":[{"type":"rect","fillcolor":null,"line":{"color":null,"width":0,"linetype":[]},"yref":"paper","xref":"paper","x0":0,"x1":1,"y0":0,"y1":1}],"showlegend":true,"legend":{"bgcolor":null,"bordercolor":null,"borderwidth":0,"font":{"color":"rgba(0,0,0,1)","family":"serif","size":12.5244618395303},"title":{"text":"","font":{"color":"rgba(0,0,0,1)","family":"serif","size":14.6118721461187}}},"hovermode":"closest","barmode":"relative"},"config":{"doubleClick":"reset","modeBarButtonsToAdd":["hoverclosest","hovercompare"],"showSendToCloud":false},"source":"A","attrs":{"11e1218d94ccd":{"x":{},"y":{},"text":{},"fill":{},"type":"bar"}},"cur_data":"11e1218d94ccd","visdat":{"11e1218d94ccd":["function (y) ","x"]},"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.2,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
</div>
</div>
</div>
<div id="tabset-2-4" class="tab-pane" role="tabpanel" aria-labelledby="tabset-2-4-tab">
<div class="cell" data-fig.asp="0.5">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a>p <span class="ot">&lt;-</span> d_recruitment <span class="sc">|&gt;</span> </span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">filter</span>(current <span class="sc">==</span> <span class="st">"Vinstri Græn"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">former =</span> <span class="fu">ifelse</span>(former <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"Samfylkingin"</span>,</span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"></a>                                         <span class="st">"Vinstri Græn"</span>,</span>
<span id="cb15-5"><a href="#cb15-5" aria-hidden="true" tabindex="-1"></a>                                         <span class="st">"Sjálfstæðisflokkurinn"</span>, </span>
<span id="cb15-6"><a href="#cb15-6" aria-hidden="true" tabindex="-1"></a>                                         <span class="st">"Píratar"</span>,</span>
<span id="cb15-7"><a href="#cb15-7" aria-hidden="true" tabindex="-1"></a>                                         <span class="st">"Framsóknarflokkurinn"</span>, </span>
<span id="cb15-8"><a href="#cb15-8" aria-hidden="true" tabindex="-1"></a>                                         <span class="st">"Píratar"</span>,</span>
<span id="cb15-9"><a href="#cb15-9" aria-hidden="true" tabindex="-1"></a>                                         <span class="st">"Björt Framtíð"</span>,</span>
<span id="cb15-10"><a href="#cb15-10" aria-hidden="true" tabindex="-1"></a>                                         <span class="st">"Viðreisn"</span>,</span>
<span id="cb15-11"><a href="#cb15-11" aria-hidden="true" tabindex="-1"></a>                                         <span class="st">"Miðflokkurinn"</span>),</span>
<span id="cb15-12"><a href="#cb15-12" aria-hidden="true" tabindex="-1"></a>                           former,</span>
<span id="cb15-13"><a href="#cb15-13" aria-hidden="true" tabindex="-1"></a>                           <span class="st">"Annað"</span>)) <span class="sc">|&gt;</span> </span>
<span id="cb15-14"><a href="#cb15-14" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">former =</span> <span class="fu">as_factor</span>(former),</span>
<span id="cb15-15"><a href="#cb15-15" aria-hidden="true" tabindex="-1"></a>           <span class="at">former =</span> <span class="fu">fct_reorder</span>(former, p <span class="sc">*</span> (former <span class="sc">!=</span> <span class="st">"Annað"</span>), <span class="at">.fun =</span> max),</span>
<span id="cb15-16"><a href="#cb15-16" aria-hidden="true" tabindex="-1"></a>           <span class="at">election =</span> <span class="fu">as.numeric</span>(<span class="fu">as.factor</span>(year)),</span>
<span id="cb15-17"><a href="#cb15-17" aria-hidden="true" tabindex="-1"></a>           <span class="at">text =</span> <span class="fu">str_c</span>(<span class="st">"Kaus síðast: "</span>, former, <span class="st">"</span><span class="sc">\n</span><span class="st">"</span>,</span>
<span id="cb15-18"><a href="#cb15-18" aria-hidden="true" tabindex="-1"></a>                        <span class="st">"Kaus nú: "</span>, current, <span class="st">"</span><span class="sc">\n</span><span class="st">"</span>,</span>
<span id="cb15-19"><a href="#cb15-19" aria-hidden="true" tabindex="-1"></a>                        <span class="st">"Hlutfall (af kjósendum núna): "</span>, <span class="fu">percent</span>(p, <span class="at">accuracy =</span> <span class="fl">0.1</span>))) <span class="sc">|&gt;</span></span>
<span id="cb15-20"><a href="#cb15-20" aria-hidden="true" tabindex="-1"></a>    <span class="fu">ggplot</span>(<span class="fu">aes</span>(election, p, <span class="at">text =</span> text)) <span class="sc">+</span></span>
<span id="cb15-21"><a href="#cb15-21" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_col</span>(<span class="fu">aes</span>(<span class="at">fill =</span> former), <span class="at">position =</span> <span class="st">"stack"</span>, <span class="at">width =</span> <span class="dv">1</span>, <span class="at">alpha =</span> <span class="fl">0.7</span>) <span class="sc">+</span></span>
<span id="cb15-22"><a href="#cb15-22" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scale_x_continuous</span>(<span class="at">breaks =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">6</span>, <span class="at">labels =</span> <span class="fu">rev</span>(<span class="fu">unique</span>(d_retention<span class="sc">$</span>year))) <span class="sc">+</span></span>
<span id="cb15-23"><a href="#cb15-23" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scale_y_continuous</span>(<span class="at">labels =</span> <span class="fu">label_percent</span>()) <span class="sc">+</span></span>
<span id="cb15-24"><a href="#cb15-24" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scale_fill_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(Annad,</span>
<span id="cb15-25"><a href="#cb15-25" aria-hidden="true" tabindex="-1"></a>                                 xC,</span>
<span id="cb15-26"><a href="#cb15-26" aria-hidden="true" tabindex="-1"></a>                                 xBF,</span>
<span id="cb15-27"><a href="#cb15-27" aria-hidden="true" tabindex="-1"></a>                                 xD,</span>
<span id="cb15-28"><a href="#cb15-28" aria-hidden="true" tabindex="-1"></a>                                 xP,</span>
<span id="cb15-29"><a href="#cb15-29" aria-hidden="true" tabindex="-1"></a>                                 xB,</span>
<span id="cb15-30"><a href="#cb15-30" aria-hidden="true" tabindex="-1"></a>                                 xS,</span>
<span id="cb15-31"><a href="#cb15-31" aria-hidden="true" tabindex="-1"></a>                                 xV)) <span class="sc">+</span></span>
<span id="cb15-32"><a href="#cb15-32" aria-hidden="true" tabindex="-1"></a>    <span class="fu">coord_cartesian</span>(<span class="at">expand =</span> F) <span class="sc">+</span></span>
<span id="cb15-33"><a href="#cb15-33" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme_cowplot</span>(<span class="at">font_size =</span> <span class="dv">11</span>, <span class="at">font_family =</span> <span class="st">"serif"</span>) <span class="sc">+</span></span>
<span id="cb15-34"><a href="#cb15-34" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme</span>(<span class="at">plot.caption =</span> <span class="fu">element_text</span>(<span class="at">hjust =</span> <span class="dv">0</span>)) <span class="sc">+</span></span>
<span id="cb15-35"><a href="#cb15-35" aria-hidden="true" tabindex="-1"></a>    <span class="fu">labs</span>(<span class="at">x =</span> <span class="cn">NULL</span>,</span>
<span id="cb15-36"><a href="#cb15-36" aria-hidden="true" tabindex="-1"></a>         <span class="at">y =</span> <span class="cn">NULL</span>,</span>
<span id="cb15-37"><a href="#cb15-37" aria-hidden="true" tabindex="-1"></a>         <span class="at">fill =</span> <span class="cn">NULL</span>,</span>
<span id="cb15-38"><a href="#cb15-38" aria-hidden="true" tabindex="-1"></a>         <span class="at">title =</span> <span class="st">"Hvaðan sækja Vinstri Græn kjósendur sína?"</span>)</span>
<span id="cb15-39"><a href="#cb15-39" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-40"><a href="#cb15-40" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplotly</span>(p, <span class="at">tooltip =</span> <span class="st">"text"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div id="htmlwidget-4f5289000aa9fb06612e" style="width:100%;height:480px;" class="plotly html-widget"></div>
<script type="application/json" data-for="htmlwidget-4f5289000aa9fb06612e">{"x":{"data":[{"orientation":"v","width":[1,1,1,1,1,1,1,1,1,1,1,1,1],"base":[0.986577181208054,0.993288590604027,0.996644295302013,0.974193548387097,0.987096774193548,0.993548387096774,0.977611940298508,0.944723618090452,0.974874371859296,0.974842767295597,0.993710691823899,0.955223880597015,0.985074626865672],"x":[6,6,6,5,5,5,4,3,3,2,2,1,1],"y":[0.00671140939597314,0.00335570469798663,0.00335570469798663,0.0129032258064516,0.00645161290322571,0.00645161290322582,0.0223880597014925,0.0301507537688441,0.0251256281407035,0.0188679245283019,0.00628930817610063,0.0298507462686567,0.0149253731343284],"text":["Kaus síðast: Annað<br />Kaus nú: Vinstri Græn<br />Hlutfall (af kjósendum núna): 0.7%","Kaus síðast: Annað<br />Kaus nú: Vinstri Græn<br />Hlutfall (af kjósendum núna): 0.3%","Kaus síðast: Annað<br />Kaus nú: Vinstri Græn<br />Hlutfall (af kjósendum núna): 0.3%","Kaus síðast: Annað<br />Kaus nú: Vinstri Græn<br />Hlutfall (af kjósendum núna): 1.3%","Kaus síðast: Annað<br />Kaus nú: Vinstri Græn<br />Hlutfall (af kjósendum núna): 0.6%","Kaus síðast: Annað<br />Kaus nú: Vinstri Græn<br />Hlutfall (af kjósendum núna): 0.6%","Kaus síðast: Annað<br />Kaus nú: Vinstri Græn<br />Hlutfall (af kjósendum núna): 2.2%","Kaus síðast: Annað<br />Kaus nú: Vinstri Græn<br />Hlutfall (af kjósendum núna): 3.0%","Kaus síðast: Annað<br />Kaus nú: Vinstri Græn<br />Hlutfall (af kjósendum núna): 2.5%","Kaus síðast: Annað<br />Kaus nú: Vinstri Græn<br />Hlutfall (af kjósendum núna): 1.9%","Kaus síðast: Annað<br />Kaus nú: Vinstri Græn<br />Hlutfall (af kjósendum núna): 0.6%","Kaus síðast: Annað<br />Kaus nú: Vinstri Græn<br />Hlutfall (af kjósendum núna): 3.0%","Kaus síðast: Annað<br />Kaus nú: Vinstri Græn<br />Hlutfall (af kjósendum núna): 1.5%"],"type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(229,216,189,0.7)","line":{"width":1.88976377952756,"color":"transparent"}},"name":"Annað","legendgroup":"Annað","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"orientation":"v","width":1,"base":0.953020134228188,"x":[6],"y":[0.0335570469798657],"text":"Kaus síðast: Viðreisn<br />Kaus nú: Vinstri Græn<br />Hlutfall (af kjósendum núna): 3.4%","type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(255,127,0,0.7)","line":{"width":1.88976377952756,"color":"transparent"}},"name":"Viðreisn","legendgroup":"Viðreisn","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"orientation":"v","width":[1,1],"base":[0.86241610738255,0.87741935483871],"x":[6,5],"y":[0.0906040268456376,0.0967741935483871],"text":["Kaus síðast: Björt Framtíð<br />Kaus nú: Vinstri Græn<br />Hlutfall (af kjósendum núna): 9.1%","Kaus síðast: Björt Framtíð<br />Kaus nú: Vinstri Græn<br />Hlutfall (af kjósendum núna): 9.7%"],"type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(202,178,214,0.7)","line":{"width":1.88976377952756,"color":"transparent"}},"name":"Björt Framtíð","legendgroup":"Björt Framtíð","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"orientation":"v","width":[1,1,1,1,1,1],"base":[0.835570469798658,0.845161290322581,0.970149253731343,0.85929648241206,0.880503144654088,0.850746268656716],"x":[6,5,4,3,2,1],"y":[0.0268456375838926,0.032258064516129,0.0074626865671642,0.085427135678392,0.0943396226415094,0.104477611940298],"text":["Kaus síðast: Sjálfstæðisflokkurinn<br />Kaus nú: Vinstri Græn<br />Hlutfall (af kjósendum núna): 2.7%","Kaus síðast: Sjálfstæðisflokkurinn<br />Kaus nú: Vinstri Græn<br />Hlutfall (af kjósendum núna): 3.2%","Kaus síðast: Sjálfstæðisflokkurinn<br />Kaus nú: Vinstri Græn<br />Hlutfall (af kjósendum núna): 0.7%","Kaus síðast: Sjálfstæðisflokkurinn<br />Kaus nú: Vinstri Græn<br />Hlutfall (af kjósendum núna): 8.5%","Kaus síðast: Sjálfstæðisflokkurinn<br />Kaus nú: Vinstri Græn<br />Hlutfall (af kjósendum núna): 9.4%","Kaus síðast: Sjálfstæðisflokkurinn<br />Kaus nú: Vinstri Græn<br />Hlutfall (af kjósendum núna): 10.4%"],"type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(55,126,184,0.7)","line":{"width":1.88976377952756,"color":"transparent"}},"name":"Sjálfstæðisflokkurinn","legendgroup":"Sjálfstæðisflokkurinn","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"orientation":"v","width":[1,1],"base":[0.718120805369127,0.825806451612903],"x":[6,5],"y":[0.11744966442953,0.0193548387096775],"text":["Kaus síðast: Píratar<br />Kaus nú: Vinstri Græn<br />Hlutfall (af kjósendum núna): 11.7%","Kaus síðast: Píratar<br />Kaus nú: Vinstri Græn<br />Hlutfall (af kjósendum núna): 1.9%"],"type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(152,78,163,0.7)","line":{"width":1.88976377952756,"color":"transparent"}},"name":"Píratar","legendgroup":"Píratar","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"orientation":"v","width":[1,1,1,1,1,1],"base":[0.708053691275168,0.735483870967742,0.940298507462687,0.773869346733668,0.817610062893082,0.626865671641791],"x":[6,5,4,3,2,1],"y":[0.0100671140939598,0.0903225806451612,0.0298507462686567,0.085427135678392,0.0628930817610063,0.223880597014925],"text":["Kaus síðast: Framsóknarflokkurinn<br />Kaus nú: Vinstri Græn<br />Hlutfall (af kjósendum núna): 1.0%","Kaus síðast: Framsóknarflokkurinn<br />Kaus nú: Vinstri Græn<br />Hlutfall (af kjósendum núna): 9.0%","Kaus síðast: Framsóknarflokkurinn<br />Kaus nú: Vinstri Græn<br />Hlutfall (af kjósendum núna): 3.0%","Kaus síðast: Framsóknarflokkurinn<br />Kaus nú: Vinstri Græn<br />Hlutfall (af kjósendum núna): 8.5%","Kaus síðast: Framsóknarflokkurinn<br />Kaus nú: Vinstri Græn<br />Hlutfall (af kjósendum núna): 6.3%","Kaus síðast: Framsóknarflokkurinn<br />Kaus nú: Vinstri Græn<br />Hlutfall (af kjósendum núna): 22.4%"],"type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(178,223,138,0.7)","line":{"width":1.88976377952756,"color":"transparent"}},"name":"Framsóknarflokkurinn","legendgroup":"Framsóknarflokkurinn","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"orientation":"v","width":[1,1,1,1,1,1],"base":[0.644295302013423,0.464516129032258,0.73134328358209,0.547738693467337,0.578616352201258,0.462686567164179],"x":[6,5,4,3,2,1],"y":[0.0637583892617449,0.270967741935484,0.208955223880597,0.226130653266332,0.238993710691824,0.164179104477612],"text":["Kaus síðast: Samfylkingin<br />Kaus nú: Vinstri Græn<br />Hlutfall (af kjósendum núna): 6.4%","Kaus síðast: Samfylkingin<br />Kaus nú: Vinstri Græn<br />Hlutfall (af kjósendum núna): 27.1%","Kaus síðast: Samfylkingin<br />Kaus nú: Vinstri Græn<br />Hlutfall (af kjósendum núna): 20.9%","Kaus síðast: Samfylkingin<br />Kaus nú: Vinstri Græn<br />Hlutfall (af kjósendum núna): 22.6%","Kaus síðast: Samfylkingin<br />Kaus nú: Vinstri Græn<br />Hlutfall (af kjósendum núna): 23.9%","Kaus síðast: Samfylkingin<br />Kaus nú: Vinstri Græn<br />Hlutfall (af kjósendum núna): 16.4%"],"type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(228,26,28,0.7)","line":{"width":1.88976377952756,"color":"transparent"}},"name":"Samfylkingin","legendgroup":"Samfylkingin","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"orientation":"v","width":[1,1,1,1,1,1],"base":[0,0,0,0,0,0],"x":[6,5,4,3,2,1],"y":[0.644295302013423,0.464516129032258,0.73134328358209,0.547738693467337,0.578616352201258,0.462686567164179],"text":["Kaus síðast: Vinstri Græn<br />Kaus nú: Vinstri Græn<br />Hlutfall (af kjósendum núna): 64.4%","Kaus síðast: Vinstri Græn<br />Kaus nú: Vinstri Græn<br />Hlutfall (af kjósendum núna): 46.5%","Kaus síðast: Vinstri Græn<br />Kaus nú: Vinstri Græn<br />Hlutfall (af kjósendum núna): 73.1%","Kaus síðast: Vinstri Græn<br />Kaus nú: Vinstri Græn<br />Hlutfall (af kjósendum núna): 54.8%","Kaus síðast: Vinstri Græn<br />Kaus nú: Vinstri Græn<br />Hlutfall (af kjósendum núna): 57.9%","Kaus síðast: Vinstri Græn<br />Kaus nú: Vinstri Græn<br />Hlutfall (af kjósendum núna): 46.3%"],"type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(35,139,69,0.7)","line":{"width":1.88976377952756,"color":"transparent"}},"name":"Vinstri Græn","legendgroup":"Vinstri Græn","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null}],"layout":{"margin":{"t":47.3111545988258,"r":7.30593607305936,"b":30.7893020221787,"l":36.0078277886497},"font":{"color":"rgba(0,0,0,1)","family":"serif","size":14.6118721461187},"title":{"text":"<b> Hvaðan sækja Vinstri Græn kjósendur sína? <\/b>","font":{"color":"rgba(0,0,0,1)","family":"serif","size":16.6992824527071},"x":0,"xref":"paper"},"xaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[0.5,6.5],"tickmode":"array","ticktext":[2003,2007,2009,2013,2016,2017],"tickvals":[1,2,3,4,5,6],"categoryorder":"array","categoryarray":[2003,2007,2009,2013,2016,2017],"nticks":null,"ticks":"outside","tickcolor":"rgba(0,0,0,1)","ticklen":3.65296803652968,"tickwidth":0.66417600664176,"showticklabels":true,"tickfont":{"color":"rgba(0,0,0,1)","family":"serif","size":12.5244618395303},"tickangle":-0,"showline":true,"linecolor":"rgba(0,0,0,1)","linewidth":0.66417600664176,"showgrid":false,"gridcolor":null,"gridwidth":0,"zeroline":false,"anchor":"y","title":{"text":"","font":{"color":"rgba(0,0,0,1)","family":"serif","size":14.6118721461187}},"hoverformat":".2f"},"yaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[0,1],"tickmode":"array","ticktext":["0%","25%","50%","75%","100%"],"tickvals":[0,0.25,0.5,0.75,1],"categoryorder":"array","categoryarray":["0%","25%","50%","75%","100%"],"nticks":null,"ticks":"outside","tickcolor":"rgba(0,0,0,1)","ticklen":3.65296803652968,"tickwidth":0.66417600664176,"showticklabels":true,"tickfont":{"color":"rgba(0,0,0,1)","family":"serif","size":12.5244618395303},"tickangle":-0,"showline":true,"linecolor":"rgba(0,0,0,1)","linewidth":0.66417600664176,"showgrid":false,"gridcolor":null,"gridwidth":0,"zeroline":false,"anchor":"x","title":{"text":"","font":{"color":"rgba(0,0,0,1)","family":"serif","size":14.6118721461187}},"hoverformat":".2f"},"shapes":[{"type":"rect","fillcolor":null,"line":{"color":null,"width":0,"linetype":[]},"yref":"paper","xref":"paper","x0":0,"x1":1,"y0":0,"y1":1}],"showlegend":true,"legend":{"bgcolor":null,"bordercolor":null,"borderwidth":0,"font":{"color":"rgba(0,0,0,1)","family":"serif","size":12.5244618395303},"title":{"text":"","font":{"color":"rgba(0,0,0,1)","family":"serif","size":14.6118721461187}}},"hovermode":"closest","barmode":"relative"},"config":{"doubleClick":"reset","modeBarButtonsToAdd":["hoverclosest","hovercompare"],"showSendToCloud":false},"source":"A","attrs":{"11e12d96d212":{"x":{},"y":{},"text":{},"fill":{},"type":"bar"}},"cur_data":"11e12d96d212","visdat":{"11e12d96d212":["function (y) ","x"]},"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.2,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
</div>
</div>
</div>
<div id="tabset-2-5" class="tab-pane" role="tabpanel" aria-labelledby="tabset-2-5-tab">
<div class="cell" data-fig.asp="0.5">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a>p <span class="ot">&lt;-</span> d_recruitment <span class="sc">|&gt;</span> </span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">filter</span>(current <span class="sc">==</span> <span class="st">"Viðreisn"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">former =</span> <span class="fu">ifelse</span>(former <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"Samfylkingin"</span>,</span>
<span id="cb16-4"><a href="#cb16-4" aria-hidden="true" tabindex="-1"></a>                                         <span class="st">"Vinstri Græn"</span>,</span>
<span id="cb16-5"><a href="#cb16-5" aria-hidden="true" tabindex="-1"></a>                                         <span class="st">"Sjálfstæðisflokkurinn"</span>, </span>
<span id="cb16-6"><a href="#cb16-6" aria-hidden="true" tabindex="-1"></a>                                         <span class="st">"Píratar"</span>,</span>
<span id="cb16-7"><a href="#cb16-7" aria-hidden="true" tabindex="-1"></a>                                         <span class="st">"Framsóknarflokkurinn"</span>, </span>
<span id="cb16-8"><a href="#cb16-8" aria-hidden="true" tabindex="-1"></a>                                         <span class="st">"Píratar"</span>,</span>
<span id="cb16-9"><a href="#cb16-9" aria-hidden="true" tabindex="-1"></a>                                         <span class="st">"Björt Framtíð"</span>,</span>
<span id="cb16-10"><a href="#cb16-10" aria-hidden="true" tabindex="-1"></a>                                         <span class="st">"Viðreisn"</span>,</span>
<span id="cb16-11"><a href="#cb16-11" aria-hidden="true" tabindex="-1"></a>                                         <span class="st">"Miðflokkurinn"</span>),</span>
<span id="cb16-12"><a href="#cb16-12" aria-hidden="true" tabindex="-1"></a>                           former,</span>
<span id="cb16-13"><a href="#cb16-13" aria-hidden="true" tabindex="-1"></a>                           <span class="st">"Annað"</span>)) <span class="sc">|&gt;</span> </span>
<span id="cb16-14"><a href="#cb16-14" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">former =</span> <span class="fu">as_factor</span>(former),</span>
<span id="cb16-15"><a href="#cb16-15" aria-hidden="true" tabindex="-1"></a>           <span class="at">former =</span> <span class="fu">fct_reorder</span>(former, p <span class="sc">*</span> (former <span class="sc">!=</span> <span class="st">"Annað"</span>), <span class="at">.fun =</span> max),</span>
<span id="cb16-16"><a href="#cb16-16" aria-hidden="true" tabindex="-1"></a>           <span class="at">election =</span> <span class="fu">as.numeric</span>(<span class="fu">as.factor</span>(year)),</span>
<span id="cb16-17"><a href="#cb16-17" aria-hidden="true" tabindex="-1"></a>           <span class="at">text =</span> <span class="fu">str_c</span>(<span class="st">"Kaus síðast: "</span>, former, <span class="st">"</span><span class="sc">\n</span><span class="st">"</span>,</span>
<span id="cb16-18"><a href="#cb16-18" aria-hidden="true" tabindex="-1"></a>                        <span class="st">"Kaus nú: "</span>, current, <span class="st">"</span><span class="sc">\n</span><span class="st">"</span>,</span>
<span id="cb16-19"><a href="#cb16-19" aria-hidden="true" tabindex="-1"></a>                        <span class="st">"Hlutfall (af kjósendum núna): "</span>, <span class="fu">percent</span>(p, <span class="at">accuracy =</span> <span class="fl">0.1</span>))) <span class="sc">|&gt;</span></span>
<span id="cb16-20"><a href="#cb16-20" aria-hidden="true" tabindex="-1"></a>    <span class="fu">ggplot</span>(<span class="fu">aes</span>(election, p, <span class="at">text =</span> text)) <span class="sc">+</span></span>
<span id="cb16-21"><a href="#cb16-21" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_col</span>(<span class="fu">aes</span>(<span class="at">fill =</span> former), <span class="at">position =</span> <span class="st">"stack"</span>, <span class="at">width =</span> <span class="dv">1</span>, <span class="at">alpha =</span> <span class="fl">0.7</span>) <span class="sc">+</span></span>
<span id="cb16-22"><a href="#cb16-22" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scale_x_continuous</span>(<span class="at">breaks =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">2</span>, <span class="at">labels =</span> <span class="fu">c</span>(<span class="dv">2016</span>, <span class="dv">2017</span>)) <span class="sc">+</span></span>
<span id="cb16-23"><a href="#cb16-23" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scale_y_continuous</span>(<span class="at">labels =</span> <span class="fu">label_percent</span>()) <span class="sc">+</span></span>
<span id="cb16-24"><a href="#cb16-24" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scale_fill_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(Annad,</span>
<span id="cb16-25"><a href="#cb16-25" aria-hidden="true" tabindex="-1"></a>                                 xP,</span>
<span id="cb16-26"><a href="#cb16-26" aria-hidden="true" tabindex="-1"></a>                                 xV,</span>
<span id="cb16-27"><a href="#cb16-27" aria-hidden="true" tabindex="-1"></a>                                 xBF,</span>
<span id="cb16-28"><a href="#cb16-28" aria-hidden="true" tabindex="-1"></a>                                 xB,</span>
<span id="cb16-29"><a href="#cb16-29" aria-hidden="true" tabindex="-1"></a>                                 xS,</span>
<span id="cb16-30"><a href="#cb16-30" aria-hidden="true" tabindex="-1"></a>                                 xD,</span>
<span id="cb16-31"><a href="#cb16-31" aria-hidden="true" tabindex="-1"></a>                                 xC)) <span class="sc">+</span></span>
<span id="cb16-32"><a href="#cb16-32" aria-hidden="true" tabindex="-1"></a>    <span class="fu">coord_cartesian</span>(<span class="at">expand =</span> F) <span class="sc">+</span></span>
<span id="cb16-33"><a href="#cb16-33" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme_cowplot</span>(<span class="at">font_size =</span> <span class="dv">11</span>, <span class="at">font_family =</span> <span class="st">"serif"</span>) <span class="sc">+</span></span>
<span id="cb16-34"><a href="#cb16-34" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme</span>(<span class="at">plot.caption =</span> <span class="fu">element_text</span>(<span class="at">hjust =</span> <span class="dv">0</span>)) <span class="sc">+</span></span>
<span id="cb16-35"><a href="#cb16-35" aria-hidden="true" tabindex="-1"></a>    <span class="fu">labs</span>(<span class="at">x =</span> <span class="cn">NULL</span>,</span>
<span id="cb16-36"><a href="#cb16-36" aria-hidden="true" tabindex="-1"></a>         <span class="at">y =</span> <span class="cn">NULL</span>,</span>
<span id="cb16-37"><a href="#cb16-37" aria-hidden="true" tabindex="-1"></a>         <span class="at">fill =</span> <span class="cn">NULL</span>,</span>
<span id="cb16-38"><a href="#cb16-38" aria-hidden="true" tabindex="-1"></a>         <span class="at">title =</span> <span class="st">"Hvert sækir Viðreisn kjósendur sína?"</span>)</span>
<span id="cb16-39"><a href="#cb16-39" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-40"><a href="#cb16-40" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplotly</span>(p, <span class="at">tooltip =</span> <span class="st">"text"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div id="htmlwidget-f9f00bc1a15cf6455009" style="width:100%;height:480px;" class="plotly html-widget"></div>
<script type="application/json" data-for="htmlwidget-f9f00bc1a15cf6455009">{"x":{"data":[{"orientation":"v","width":[1,1,1,1,1,1],"base":[0.982758620689655,0.991379310344828,0.928571428571429,0.957142857142857,0.971428571428571,0.985714285714286],"x":[2,2,1,1,1,1],"y":[0.00862068965517238,0.00862068965517238,0.0285714285714285,0.0142857142857143,0.0142857142857142,0.0142857142857143],"text":["Kaus síðast: Annað<br />Kaus nú: Viðreisn<br />Hlutfall (af kjósendum núna): 0.9%","Kaus síðast: Annað<br />Kaus nú: Viðreisn<br />Hlutfall (af kjósendum núna): 0.9%","Kaus síðast: Annað<br />Kaus nú: Viðreisn<br />Hlutfall (af kjósendum núna): 2.9%","Kaus síðast: Annað<br />Kaus nú: Viðreisn<br />Hlutfall (af kjósendum núna): 1.4%","Kaus síðast: Annað<br />Kaus nú: Viðreisn<br />Hlutfall (af kjósendum núna): 1.4%","Kaus síðast: Annað<br />Kaus nú: Viðreisn<br />Hlutfall (af kjósendum núna): 1.4%"],"type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(229,216,189,0.7)","line":{"width":1.88976377952756,"color":"transparent"}},"name":"Annað","legendgroup":"Annað","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"orientation":"v","width":[1,1],"base":[0.939655172413793,0.885714285714286],"x":[2,1],"y":[0.0431034482758621,0.0428571428571429],"text":"Kaus síðast: Píratar<br />Kaus nú: Viðreisn<br />Hlutfall (af kjósendum núna): 4.3%","type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(152,78,163,0.7)","line":{"width":1.88976377952756,"color":"transparent"}},"name":"Píratar","legendgroup":"Píratar","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"orientation":"v","width":[1,1],"base":[0.879310344827586,0.814285714285714],"x":[2,1],"y":[0.060344827586207,0.0714285714285714],"text":["Kaus síðast: Vinstri Græn<br />Kaus nú: Viðreisn<br />Hlutfall (af kjósendum núna): 6.0%","Kaus síðast: Vinstri Græn<br />Kaus nú: Viðreisn<br />Hlutfall (af kjósendum núna): 7.1%"],"type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(35,139,69,0.7)","line":{"width":1.88976377952756,"color":"transparent"}},"name":"Vinstri Græn","legendgroup":"Vinstri Græn","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"orientation":"v","width":[1,1],"base":[0.758620689655172,0.771428571428571],"x":[2,1],"y":[0.120689655172414,0.0428571428571429],"text":["Kaus síðast: Björt Framtíð<br />Kaus nú: Viðreisn<br />Hlutfall (af kjósendum núna): 12.1%","Kaus síðast: Björt Framtíð<br />Kaus nú: Viðreisn<br />Hlutfall (af kjósendum núna): 4.3%"],"type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(202,178,214,0.7)","line":{"width":1.88976377952756,"color":"transparent"}},"name":"Björt Framtíð","legendgroup":"Björt Framtíð","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"orientation":"v","width":[1,1],"base":[0.741379310344828,0.6],"x":[2,1],"y":[0.0172413793103449,0.171428571428571],"text":["Kaus síðast: Framsóknarflokkurinn<br />Kaus nú: Viðreisn<br />Hlutfall (af kjósendum núna): 1.7%","Kaus síðast: Framsóknarflokkurinn<br />Kaus nú: Viðreisn<br />Hlutfall (af kjósendum núna): 17.1%"],"type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(178,223,138,0.7)","line":{"width":1.88976377952756,"color":"transparent"}},"name":"Framsóknarflokkurinn","legendgroup":"Framsóknarflokkurinn","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"orientation":"v","width":[1,1],"base":[0.732758620689655,0.328571428571429],"x":[2,1],"y":[0.00862068965517238,0.271428571428571],"text":["Kaus síðast: Samfylkingin<br />Kaus nú: Viðreisn<br />Hlutfall (af kjósendum núna): 0.9%","Kaus síðast: Samfylkingin<br />Kaus nú: Viðreisn<br />Hlutfall (af kjósendum núna): 27.1%"],"type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(228,26,28,0.7)","line":{"width":1.88976377952756,"color":"transparent"}},"name":"Samfylkingin","legendgroup":"Samfylkingin","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"orientation":"v","width":[1,1],"base":[0.594827586206897,0],"x":[2,1],"y":[0.137931034482759,0.328571428571429],"text":["Kaus síðast: Sjálfstæðisflokkurinn<br />Kaus nú: Viðreisn<br />Hlutfall (af kjósendum núna): 13.8%","Kaus síðast: Sjálfstæðisflokkurinn<br />Kaus nú: Viðreisn<br />Hlutfall (af kjósendum núna): 32.9%"],"type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(55,126,184,0.7)","line":{"width":1.88976377952756,"color":"transparent"}},"name":"Sjálfstæðisflokkurinn","legendgroup":"Sjálfstæðisflokkurinn","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"orientation":"v","width":1,"base":0,"x":[2],"y":[0.594827586206897],"text":"Kaus síðast: Viðreisn<br />Kaus nú: Viðreisn<br />Hlutfall (af kjósendum núna): 59.5%","type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(255,127,0,0.7)","line":{"width":1.88976377952756,"color":"transparent"}},"name":"Viðreisn","legendgroup":"Viðreisn","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null}],"layout":{"margin":{"t":47.3111545988258,"r":7.30593607305936,"b":30.7893020221787,"l":36.0078277886497},"font":{"color":"rgba(0,0,0,1)","family":"serif","size":14.6118721461187},"title":{"text":"<b> Hvert sækir Viðreisn kjósendur sína? <\/b>","font":{"color":"rgba(0,0,0,1)","family":"serif","size":16.6992824527071},"x":0,"xref":"paper"},"xaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[0.5,2.5],"tickmode":"array","ticktext":[2016,2017],"tickvals":[1,2],"categoryorder":"array","categoryarray":[2016,2017],"nticks":null,"ticks":"outside","tickcolor":"rgba(0,0,0,1)","ticklen":3.65296803652968,"tickwidth":0.66417600664176,"showticklabels":true,"tickfont":{"color":"rgba(0,0,0,1)","family":"serif","size":12.5244618395303},"tickangle":-0,"showline":true,"linecolor":"rgba(0,0,0,1)","linewidth":0.66417600664176,"showgrid":false,"gridcolor":null,"gridwidth":0,"zeroline":false,"anchor":"y","title":{"text":"","font":{"color":"rgba(0,0,0,1)","family":"serif","size":14.6118721461187}},"hoverformat":".2f"},"yaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[0,1],"tickmode":"array","ticktext":["0%","25%","50%","75%","100%"],"tickvals":[0,0.25,0.5,0.75,1],"categoryorder":"array","categoryarray":["0%","25%","50%","75%","100%"],"nticks":null,"ticks":"outside","tickcolor":"rgba(0,0,0,1)","ticklen":3.65296803652968,"tickwidth":0.66417600664176,"showticklabels":true,"tickfont":{"color":"rgba(0,0,0,1)","family":"serif","size":12.5244618395303},"tickangle":-0,"showline":true,"linecolor":"rgba(0,0,0,1)","linewidth":0.66417600664176,"showgrid":false,"gridcolor":null,"gridwidth":0,"zeroline":false,"anchor":"x","title":{"text":"","font":{"color":"rgba(0,0,0,1)","family":"serif","size":14.6118721461187}},"hoverformat":".2f"},"shapes":[{"type":"rect","fillcolor":null,"line":{"color":null,"width":0,"linetype":[]},"yref":"paper","xref":"paper","x0":0,"x1":1,"y0":0,"y1":1}],"showlegend":true,"legend":{"bgcolor":null,"bordercolor":null,"borderwidth":0,"font":{"color":"rgba(0,0,0,1)","family":"serif","size":12.5244618395303},"title":{"text":"","font":{"color":"rgba(0,0,0,1)","family":"serif","size":14.6118721461187}}},"hovermode":"closest","barmode":"relative"},"config":{"doubleClick":"reset","modeBarButtonsToAdd":["hoverclosest","hovercompare"],"showSendToCloud":false},"source":"A","attrs":{"11e126d8cdeb3":{"x":{},"y":{},"text":{},"fill":{},"type":"bar"}},"cur_data":"11e126d8cdeb3","visdat":{"11e126d8cdeb3":["function (y) ","x"]},"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.2,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
</div>
</div>
</div>
<div id="tabset-2-6" class="tab-pane" role="tabpanel" aria-labelledby="tabset-2-6-tab">
<div class="cell" data-fig.asp="0.5">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a>p <span class="ot">&lt;-</span> d_recruitment <span class="sc">|&gt;</span> </span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">filter</span>(current <span class="sc">==</span> <span class="st">"Píratar"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">former =</span> <span class="fu">ifelse</span>(former <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"Samfylkingin"</span>,</span>
<span id="cb17-4"><a href="#cb17-4" aria-hidden="true" tabindex="-1"></a>                                         <span class="st">"Vinstri Græn"</span>,</span>
<span id="cb17-5"><a href="#cb17-5" aria-hidden="true" tabindex="-1"></a>                                         <span class="st">"Sjálfstæðisflokkurinn"</span>, </span>
<span id="cb17-6"><a href="#cb17-6" aria-hidden="true" tabindex="-1"></a>                                         <span class="st">"Píratar"</span>,</span>
<span id="cb17-7"><a href="#cb17-7" aria-hidden="true" tabindex="-1"></a>                                         <span class="st">"Framsóknarflokkurinn"</span>, </span>
<span id="cb17-8"><a href="#cb17-8" aria-hidden="true" tabindex="-1"></a>                                         <span class="st">"Píratar"</span>,</span>
<span id="cb17-9"><a href="#cb17-9" aria-hidden="true" tabindex="-1"></a>                                         <span class="st">"Björt Framtíð"</span>,</span>
<span id="cb17-10"><a href="#cb17-10" aria-hidden="true" tabindex="-1"></a>                                         <span class="st">"Viðreisn"</span>,</span>
<span id="cb17-11"><a href="#cb17-11" aria-hidden="true" tabindex="-1"></a>                                         <span class="st">"Miðflokkurinn"</span>),</span>
<span id="cb17-12"><a href="#cb17-12" aria-hidden="true" tabindex="-1"></a>                           former,</span>
<span id="cb17-13"><a href="#cb17-13" aria-hidden="true" tabindex="-1"></a>                           <span class="st">"Annað"</span>)) <span class="sc">|&gt;</span> </span>
<span id="cb17-14"><a href="#cb17-14" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">former =</span> <span class="fu">as_factor</span>(former),</span>
<span id="cb17-15"><a href="#cb17-15" aria-hidden="true" tabindex="-1"></a>           <span class="at">former =</span> <span class="fu">fct_reorder</span>(former, p <span class="sc">*</span> (former <span class="sc">!=</span> <span class="st">"Annað"</span>), <span class="at">.fun =</span> max),</span>
<span id="cb17-16"><a href="#cb17-16" aria-hidden="true" tabindex="-1"></a>           <span class="at">election =</span> <span class="fu">as.numeric</span>(<span class="fu">as.factor</span>(year)),</span>
<span id="cb17-17"><a href="#cb17-17" aria-hidden="true" tabindex="-1"></a>           <span class="at">text =</span> <span class="fu">str_c</span>(<span class="st">"Kaus síðast: "</span>, former, <span class="st">"</span><span class="sc">\n</span><span class="st">"</span>,</span>
<span id="cb17-18"><a href="#cb17-18" aria-hidden="true" tabindex="-1"></a>                        <span class="st">"Kaus nú: "</span>, current, <span class="st">"</span><span class="sc">\n</span><span class="st">"</span>,</span>
<span id="cb17-19"><a href="#cb17-19" aria-hidden="true" tabindex="-1"></a>                        <span class="st">"Hlutfall (af kjósendum núna): "</span>, <span class="fu">percent</span>(p, <span class="at">accuracy =</span> <span class="fl">0.1</span>))) <span class="sc">|&gt;</span></span>
<span id="cb17-20"><a href="#cb17-20" aria-hidden="true" tabindex="-1"></a>    <span class="fu">ggplot</span>(<span class="fu">aes</span>(election, p, <span class="at">text =</span> text)) <span class="sc">+</span></span>
<span id="cb17-21"><a href="#cb17-21" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_col</span>(<span class="fu">aes</span>(<span class="at">fill =</span> former), <span class="at">position =</span> <span class="st">"stack"</span>, <span class="at">width =</span> <span class="dv">1</span>, <span class="at">alpha =</span> <span class="fl">0.7</span>) <span class="sc">+</span></span>
<span id="cb17-22"><a href="#cb17-22" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scale_x_continuous</span>(<span class="at">breaks =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>, <span class="at">labels =</span> <span class="fu">c</span>(<span class="dv">2013</span>, <span class="dv">2016</span>, <span class="dv">2017</span>)) <span class="sc">+</span></span>
<span id="cb17-23"><a href="#cb17-23" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scale_y_continuous</span>(<span class="at">labels =</span> <span class="fu">label_percent</span>()) <span class="sc">+</span></span>
<span id="cb17-24"><a href="#cb17-24" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scale_fill_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(Annad,</span>
<span id="cb17-25"><a href="#cb17-25" aria-hidden="true" tabindex="-1"></a>                                 xC,</span>
<span id="cb17-26"><a href="#cb17-26" aria-hidden="true" tabindex="-1"></a>                                 xB,</span>
<span id="cb17-27"><a href="#cb17-27" aria-hidden="true" tabindex="-1"></a>                                 xD,</span>
<span id="cb17-28"><a href="#cb17-28" aria-hidden="true" tabindex="-1"></a>                                 xBF,</span>
<span id="cb17-29"><a href="#cb17-29" aria-hidden="true" tabindex="-1"></a>                                 xS,</span>
<span id="cb17-30"><a href="#cb17-30" aria-hidden="true" tabindex="-1"></a>                                 xV,</span>
<span id="cb17-31"><a href="#cb17-31" aria-hidden="true" tabindex="-1"></a>                                 xP)) <span class="sc">+</span></span>
<span id="cb17-32"><a href="#cb17-32" aria-hidden="true" tabindex="-1"></a>    <span class="fu">coord_cartesian</span>(<span class="at">expand =</span> F) <span class="sc">+</span></span>
<span id="cb17-33"><a href="#cb17-33" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme_cowplot</span>(<span class="at">font_size =</span> <span class="dv">11</span>, <span class="at">font_family =</span> <span class="st">"serif"</span>) <span class="sc">+</span></span>
<span id="cb17-34"><a href="#cb17-34" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme</span>(<span class="at">plot.caption =</span> <span class="fu">element_text</span>(<span class="at">hjust =</span> <span class="dv">0</span>)) <span class="sc">+</span></span>
<span id="cb17-35"><a href="#cb17-35" aria-hidden="true" tabindex="-1"></a>    <span class="fu">labs</span>(<span class="at">x =</span> <span class="cn">NULL</span>,</span>
<span id="cb17-36"><a href="#cb17-36" aria-hidden="true" tabindex="-1"></a>         <span class="at">y =</span> <span class="cn">NULL</span>,</span>
<span id="cb17-37"><a href="#cb17-37" aria-hidden="true" tabindex="-1"></a>         <span class="at">fill =</span> <span class="cn">NULL</span>,</span>
<span id="cb17-38"><a href="#cb17-38" aria-hidden="true" tabindex="-1"></a>         <span class="at">title =</span> <span class="st">"Hvaðan sækja Píratar kjósendur sína?"</span>)</span>
<span id="cb17-39"><a href="#cb17-39" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-40"><a href="#cb17-40" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplotly</span>(p, <span class="at">tooltip =</span> <span class="st">"text"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div id="htmlwidget-734528a56eb41a8298f8" style="width:100%;height:480px;" class="plotly html-widget"></div>
<script type="application/json" data-for="htmlwidget-734528a56eb41a8298f8">{"x":{"data":[{"orientation":"v","width":[1,1,1,1,1],"base":[0.982142857142857,0.938053097345133,0.964601769911504,0.991150442477876,0.85],"x":[3,2,2,2,1],"y":[0.0178571428571428,0.0265486725663716,0.0265486725663717,0.00884955752212391,0.15],"text":["Kaus síðast: Annað<br />Kaus nú: Píratar<br />Hlutfall (af kjósendum núna): 1.8%","Kaus síðast: Annað<br />Kaus nú: Píratar<br />Hlutfall (af kjósendum núna): 2.7%","Kaus síðast: Annað<br />Kaus nú: Píratar<br />Hlutfall (af kjósendum núna): 2.7%","Kaus síðast: Annað<br />Kaus nú: Píratar<br />Hlutfall (af kjósendum núna): 0.9%","Kaus síðast: Annað<br />Kaus nú: Píratar<br />Hlutfall (af kjósendum núna): 15.0%"],"type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(229,216,189,0.7)","line":{"width":1.88976377952756,"color":"transparent"}},"name":"Annað","legendgroup":"Annað","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"orientation":"v","width":1,"base":0.9375,"x":[3],"y":[0.0446428571428572],"text":"Kaus síðast: Viðreisn<br />Kaus nú: Píratar<br />Hlutfall (af kjósendum núna): 4.5%","type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(255,127,0,0.7)","line":{"width":1.88976377952756,"color":"transparent"}},"name":"Viðreisn","legendgroup":"Viðreisn","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"orientation":"v","width":[1,1],"base":[0.928571428571429,0.831858407079646],"x":[3,2],"y":[0.0089285714285714,0.106194690265487],"text":["Kaus síðast: Framsóknarflokkurinn<br />Kaus nú: Píratar<br />Hlutfall (af kjósendum núna): 0.9%","Kaus síðast: Framsóknarflokkurinn<br />Kaus nú: Píratar<br />Hlutfall (af kjósendum núna): 10.6%"],"type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(178,223,138,0.7)","line":{"width":1.88976377952756,"color":"transparent"}},"name":"Framsóknarflokkurinn","legendgroup":"Framsóknarflokkurinn","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"orientation":"v","width":[1,1,1],"base":[0.910714285714286,0.814159292035398,0.725],"x":[3,2,1],"y":[0.0178571428571429,0.0176991150442477,0.125],"text":["Kaus síðast: Sjálfstæðisflokkurinn<br />Kaus nú: Píratar<br />Hlutfall (af kjósendum núna): 1.8%","Kaus síðast: Sjálfstæðisflokkurinn<br />Kaus nú: Píratar<br />Hlutfall (af kjósendum núna): 1.8%","Kaus síðast: Sjálfstæðisflokkurinn<br />Kaus nú: Píratar<br />Hlutfall (af kjósendum núna): 12.5%"],"type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(55,126,184,0.7)","line":{"width":1.88976377952756,"color":"transparent"}},"name":"Sjálfstæðisflokkurinn","legendgroup":"Sjálfstæðisflokkurinn","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"orientation":"v","width":[1,1],"base":[0.741071428571429,0.716814159292035],"x":[3,2],"y":[0.169642857142857,0.0973451327433629],"text":["Kaus síðast: Björt Framtíð<br />Kaus nú: Píratar<br />Hlutfall (af kjósendum núna): 17.0%","Kaus síðast: Björt Framtíð<br />Kaus nú: Píratar<br />Hlutfall (af kjósendum núna): 9.7%"],"type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(202,178,214,0.7)","line":{"width":1.88976377952756,"color":"transparent"}},"name":"Björt Framtíð","legendgroup":"Björt Framtíð","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"orientation":"v","width":[1,1,1],"base":[0.714285714285714,0.513274336283186,0.375],"x":[3,2,1],"y":[0.0267857142857143,0.20353982300885,0.35],"text":["Kaus síðast: Samfylkingin<br />Kaus nú: Píratar<br />Hlutfall (af kjósendum núna): 2.7%","Kaus síðast: Samfylkingin<br />Kaus nú: Píratar<br />Hlutfall (af kjósendum núna): 20.4%","Kaus síðast: Samfylkingin<br />Kaus nú: Píratar<br />Hlutfall (af kjósendum núna): 35.0%"],"type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(228,26,28,0.7)","line":{"width":1.88976377952756,"color":"transparent"}},"name":"Samfylkingin","legendgroup":"Samfylkingin","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"orientation":"v","width":[1,1,1],"base":[0.616071428571429,0.238938053097345,0],"x":[3,2,1],"y":[0.0982142857142857,0.274336283185841,0.375],"text":["Kaus síðast: Vinstri Græn<br />Kaus nú: Píratar<br />Hlutfall (af kjósendum núna): 9.8%","Kaus síðast: Vinstri Græn<br />Kaus nú: Píratar<br />Hlutfall (af kjósendum núna): 27.4%","Kaus síðast: Vinstri Græn<br />Kaus nú: Píratar<br />Hlutfall (af kjósendum núna): 37.5%"],"type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(35,139,69,0.7)","line":{"width":1.88976377952756,"color":"transparent"}},"name":"Vinstri Græn","legendgroup":"Vinstri Græn","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"orientation":"v","width":[1,1],"base":[0,0],"x":[3,2],"y":[0.616071428571429,0.238938053097345],"text":["Kaus síðast: Píratar<br />Kaus nú: Píratar<br />Hlutfall (af kjósendum núna): 61.6%","Kaus síðast: Píratar<br />Kaus nú: Píratar<br />Hlutfall (af kjósendum núna): 23.9%"],"type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(152,78,163,0.7)","line":{"width":1.88976377952756,"color":"transparent"}},"name":"Píratar","legendgroup":"Píratar","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null}],"layout":{"margin":{"t":47.3111545988258,"r":7.30593607305936,"b":30.7893020221787,"l":36.0078277886497},"font":{"color":"rgba(0,0,0,1)","family":"serif","size":14.6118721461187},"title":{"text":"<b> Hvaðan sækja Píratar kjósendur sína? <\/b>","font":{"color":"rgba(0,0,0,1)","family":"serif","size":16.6992824527071},"x":0,"xref":"paper"},"xaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[0.5,3.5],"tickmode":"array","ticktext":[2013,2016,2017],"tickvals":[1,2,3],"categoryorder":"array","categoryarray":[2013,2016,2017],"nticks":null,"ticks":"outside","tickcolor":"rgba(0,0,0,1)","ticklen":3.65296803652968,"tickwidth":0.66417600664176,"showticklabels":true,"tickfont":{"color":"rgba(0,0,0,1)","family":"serif","size":12.5244618395303},"tickangle":-0,"showline":true,"linecolor":"rgba(0,0,0,1)","linewidth":0.66417600664176,"showgrid":false,"gridcolor":null,"gridwidth":0,"zeroline":false,"anchor":"y","title":{"text":"","font":{"color":"rgba(0,0,0,1)","family":"serif","size":14.6118721461187}},"hoverformat":".2f"},"yaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[0,1],"tickmode":"array","ticktext":["0%","25%","50%","75%","100%"],"tickvals":[0,0.25,0.5,0.75,1],"categoryorder":"array","categoryarray":["0%","25%","50%","75%","100%"],"nticks":null,"ticks":"outside","tickcolor":"rgba(0,0,0,1)","ticklen":3.65296803652968,"tickwidth":0.66417600664176,"showticklabels":true,"tickfont":{"color":"rgba(0,0,0,1)","family":"serif","size":12.5244618395303},"tickangle":-0,"showline":true,"linecolor":"rgba(0,0,0,1)","linewidth":0.66417600664176,"showgrid":false,"gridcolor":null,"gridwidth":0,"zeroline":false,"anchor":"x","title":{"text":"","font":{"color":"rgba(0,0,0,1)","family":"serif","size":14.6118721461187}},"hoverformat":".2f"},"shapes":[{"type":"rect","fillcolor":null,"line":{"color":null,"width":0,"linetype":[]},"yref":"paper","xref":"paper","x0":0,"x1":1,"y0":0,"y1":1}],"showlegend":true,"legend":{"bgcolor":null,"bordercolor":null,"borderwidth":0,"font":{"color":"rgba(0,0,0,1)","family":"serif","size":12.5244618395303},"title":{"text":"","font":{"color":"rgba(0,0,0,1)","family":"serif","size":14.6118721461187}}},"hovermode":"closest","barmode":"relative"},"config":{"doubleClick":"reset","modeBarButtonsToAdd":["hoverclosest","hovercompare"],"showSendToCloud":false},"source":"A","attrs":{"11e12485ab5e3":{"x":{},"y":{},"text":{},"fill":{},"type":"bar"}},"cur_data":"11e12485ab5e3","visdat":{"11e12485ab5e3":["function (y) ","x"]},"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.2,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
</div>
</div>
</div>
<div id="tabset-2-7" class="tab-pane" role="tabpanel" aria-labelledby="tabset-2-7-tab">
<div class="cell" data-fig.asp="0.5">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a>p <span class="ot">&lt;-</span> d_recruitment <span class="sc">|&gt;</span> </span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">filter</span>(current <span class="sc">==</span> <span class="st">"Miðflokkurinn"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">former =</span> <span class="fu">ifelse</span>(former <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"Samfylkingin"</span>,</span>
<span id="cb18-4"><a href="#cb18-4" aria-hidden="true" tabindex="-1"></a>                                         <span class="st">"Vinstri Græn"</span>,</span>
<span id="cb18-5"><a href="#cb18-5" aria-hidden="true" tabindex="-1"></a>                                         <span class="st">"Sjálfstæðisflokkurinn"</span>, </span>
<span id="cb18-6"><a href="#cb18-6" aria-hidden="true" tabindex="-1"></a>                                         <span class="st">"Píratar"</span>,</span>
<span id="cb18-7"><a href="#cb18-7" aria-hidden="true" tabindex="-1"></a>                                         <span class="st">"Framsóknarflokkurinn"</span>, </span>
<span id="cb18-8"><a href="#cb18-8" aria-hidden="true" tabindex="-1"></a>                                         <span class="st">"Píratar"</span>,</span>
<span id="cb18-9"><a href="#cb18-9" aria-hidden="true" tabindex="-1"></a>                                         <span class="st">"Björt Framtíð"</span>,</span>
<span id="cb18-10"><a href="#cb18-10" aria-hidden="true" tabindex="-1"></a>                                         <span class="st">"Viðreisn"</span>,</span>
<span id="cb18-11"><a href="#cb18-11" aria-hidden="true" tabindex="-1"></a>                                         <span class="st">"Miðflokkurinn"</span>),</span>
<span id="cb18-12"><a href="#cb18-12" aria-hidden="true" tabindex="-1"></a>                           former,</span>
<span id="cb18-13"><a href="#cb18-13" aria-hidden="true" tabindex="-1"></a>                           <span class="st">"Annað"</span>)) <span class="sc">|&gt;</span> </span>
<span id="cb18-14"><a href="#cb18-14" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">former =</span> <span class="fu">as_factor</span>(former),</span>
<span id="cb18-15"><a href="#cb18-15" aria-hidden="true" tabindex="-1"></a>           <span class="at">former =</span> <span class="fu">fct_reorder</span>(former, p <span class="sc">*</span> (former <span class="sc">!=</span> <span class="st">"Annað"</span>), <span class="at">.fun =</span> max),</span>
<span id="cb18-16"><a href="#cb18-16" aria-hidden="true" tabindex="-1"></a>           <span class="at">election =</span> <span class="fu">as.numeric</span>(<span class="fu">as.factor</span>(year)),</span>
<span id="cb18-17"><a href="#cb18-17" aria-hidden="true" tabindex="-1"></a>           <span class="at">text =</span> <span class="fu">str_c</span>(<span class="st">"Kaus síðast: "</span>, former, <span class="st">"</span><span class="sc">\n</span><span class="st">"</span>,</span>
<span id="cb18-18"><a href="#cb18-18" aria-hidden="true" tabindex="-1"></a>                        <span class="st">"Kaus nú: "</span>, current, <span class="st">"</span><span class="sc">\n</span><span class="st">"</span>,</span>
<span id="cb18-19"><a href="#cb18-19" aria-hidden="true" tabindex="-1"></a>                        <span class="st">"Hlutfall (af kjósendum núna): "</span>, <span class="fu">percent</span>(p, <span class="at">accuracy =</span> <span class="fl">0.1</span>))) <span class="sc">|&gt;</span></span>
<span id="cb18-20"><a href="#cb18-20" aria-hidden="true" tabindex="-1"></a>    <span class="fu">ggplot</span>(<span class="fu">aes</span>(election, p, <span class="at">text =</span> text)) <span class="sc">+</span></span>
<span id="cb18-21"><a href="#cb18-21" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_col</span>(<span class="fu">aes</span>(<span class="at">fill =</span> former), <span class="at">position =</span> <span class="st">"stack"</span>, <span class="at">width =</span> <span class="dv">1</span>, <span class="at">alpha =</span> <span class="fl">0.7</span>) <span class="sc">+</span></span>
<span id="cb18-22"><a href="#cb18-22" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scale_x_continuous</span>(<span class="at">breaks =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">1</span>, <span class="at">labels =</span> <span class="fu">c</span>(<span class="dv">2017</span>)) <span class="sc">+</span></span>
<span id="cb18-23"><a href="#cb18-23" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scale_y_continuous</span>(<span class="at">labels =</span> <span class="fu">label_percent</span>()) <span class="sc">+</span></span>
<span id="cb18-24"><a href="#cb18-24" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scale_fill_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(Annad,</span>
<span id="cb18-25"><a href="#cb18-25" aria-hidden="true" tabindex="-1"></a>                                 xV,</span>
<span id="cb18-26"><a href="#cb18-26" aria-hidden="true" tabindex="-1"></a>                                 xS,</span>
<span id="cb18-27"><a href="#cb18-27" aria-hidden="true" tabindex="-1"></a>                                 xC,</span>
<span id="cb18-28"><a href="#cb18-28" aria-hidden="true" tabindex="-1"></a>                                 xP,</span>
<span id="cb18-29"><a href="#cb18-29" aria-hidden="true" tabindex="-1"></a>                                 xD,</span>
<span id="cb18-30"><a href="#cb18-30" aria-hidden="true" tabindex="-1"></a>                                 xB,</span>
<span id="cb18-31"><a href="#cb18-31" aria-hidden="true" tabindex="-1"></a>                                 xM)) <span class="sc">+</span></span>
<span id="cb18-32"><a href="#cb18-32" aria-hidden="true" tabindex="-1"></a>    <span class="fu">coord_cartesian</span>(<span class="at">expand =</span> F) <span class="sc">+</span></span>
<span id="cb18-33"><a href="#cb18-33" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme_cowplot</span>(<span class="at">font_size =</span> <span class="dv">11</span>, <span class="at">font_family =</span> <span class="st">"serif"</span>) <span class="sc">+</span></span>
<span id="cb18-34"><a href="#cb18-34" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme</span>(<span class="at">plot.caption =</span> <span class="fu">element_text</span>(<span class="at">hjust =</span> <span class="dv">0</span>)) <span class="sc">+</span></span>
<span id="cb18-35"><a href="#cb18-35" aria-hidden="true" tabindex="-1"></a>    <span class="fu">labs</span>(<span class="at">x =</span> <span class="cn">NULL</span>,</span>
<span id="cb18-36"><a href="#cb18-36" aria-hidden="true" tabindex="-1"></a>         <span class="at">y =</span> <span class="cn">NULL</span>,</span>
<span id="cb18-37"><a href="#cb18-37" aria-hidden="true" tabindex="-1"></a>         <span class="at">fill =</span> <span class="cn">NULL</span>,</span>
<span id="cb18-38"><a href="#cb18-38" aria-hidden="true" tabindex="-1"></a>         <span class="at">title =</span> <span class="st">"Hvert sækir Miðflokkurinn kjósendur sína?"</span>)</span>
<span id="cb18-39"><a href="#cb18-39" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-40"><a href="#cb18-40" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplotly</span>(p, <span class="at">tooltip =</span> <span class="st">"text"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div id="htmlwidget-63f3033f85e574345b0e" style="width:100%;height:480px;" class="plotly html-widget"></div>
<script type="application/json" data-for="htmlwidget-63f3033f85e574345b0e">{"x":{"data":[{"orientation":"v","width":[1,1],"base":[0.958677685950413,0.983471074380165],"x":[1,1],"y":[0.0247933884297521,0.0165289256198347],"text":["Kaus síðast: Annað<br />Kaus nú: Miðflokkurinn<br />Hlutfall (af kjósendum núna): 2.5%","Kaus síðast: Annað<br />Kaus nú: Miðflokkurinn<br />Hlutfall (af kjósendum núna): 1.7%"],"type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(229,216,189,0.7)","line":{"width":1.88976377952756,"color":"transparent"}},"name":"Annað","legendgroup":"Annað","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"orientation":"v","width":1,"base":0.950413223140496,"x":[1],"y":[0.00826446280991744],"text":"Kaus síðast: Vinstri Græn<br />Kaus nú: Miðflokkurinn<br />Hlutfall (af kjósendum núna): 0.8%","type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(35,139,69,0.7)","line":{"width":1.88976377952756,"color":"transparent"}},"name":"Vinstri Græn","legendgroup":"Vinstri Græn","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"orientation":"v","width":1,"base":0.917355371900826,"x":[1],"y":[0.0330578512396693],"text":"Kaus síðast: Samfylkingin<br />Kaus nú: Miðflokkurinn<br />Hlutfall (af kjósendum núna): 3.3%","type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(228,26,28,0.7)","line":{"width":1.88976377952756,"color":"transparent"}},"name":"Samfylkingin","legendgroup":"Samfylkingin","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"orientation":"v","width":1,"base":0.884297520661157,"x":[1],"y":[0.0330578512396695],"text":"Kaus síðast: Viðreisn<br />Kaus nú: Miðflokkurinn<br />Hlutfall (af kjósendum núna): 3.3%","type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(255,127,0,0.7)","line":{"width":1.88976377952756,"color":"transparent"}},"name":"Viðreisn","legendgroup":"Viðreisn","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"orientation":"v","width":1,"base":0.834710743801653,"x":[1],"y":[0.0495867768595041],"text":"Kaus síðast: Píratar<br />Kaus nú: Miðflokkurinn<br />Hlutfall (af kjósendum núna): 5.0%","type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(152,78,163,0.7)","line":{"width":1.88976377952756,"color":"transparent"}},"name":"Píratar","legendgroup":"Píratar","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"orientation":"v","width":1,"base":0.56198347107438,"x":[1],"y":[0.272727272727273],"text":"Kaus síðast: Sjálfstæðisflokkurinn<br />Kaus nú: Miðflokkurinn<br />Hlutfall (af kjósendum núna): 27.3%","type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(55,126,184,0.7)","line":{"width":1.88976377952756,"color":"transparent"}},"name":"Sjálfstæðisflokkurinn","legendgroup":"Sjálfstæðisflokkurinn","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"orientation":"v","width":1,"base":0,"x":[1],"y":[0.56198347107438],"text":"Kaus síðast: Framsóknarflokkurinn<br />Kaus nú: Miðflokkurinn<br />Hlutfall (af kjósendum núna): 56.2%","type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(178,223,138,0.7)","line":{"width":1.88976377952756,"color":"transparent"}},"name":"Framsóknarflokkurinn","legendgroup":"Framsóknarflokkurinn","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null}],"layout":{"margin":{"t":47.3111545988258,"r":7.30593607305936,"b":30.7893020221787,"l":36.0078277886497},"font":{"color":"rgba(0,0,0,1)","family":"serif","size":14.6118721461187},"title":{"text":"<b> Hvert sækir Miðflokkurinn kjósendur sína? <\/b>","font":{"color":"rgba(0,0,0,1)","family":"serif","size":16.6992824527071},"x":0,"xref":"paper"},"xaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[0.5,1.5],"tickmode":"array","ticktext":[2017],"tickvals":[1],"categoryorder":"array","categoryarray":[2017],"nticks":null,"ticks":"outside","tickcolor":"rgba(0,0,0,1)","ticklen":3.65296803652968,"tickwidth":0.66417600664176,"showticklabels":true,"tickfont":{"color":"rgba(0,0,0,1)","family":"serif","size":12.5244618395303},"tickangle":-0,"showline":true,"linecolor":"rgba(0,0,0,1)","linewidth":0.66417600664176,"showgrid":false,"gridcolor":null,"gridwidth":0,"zeroline":false,"anchor":"y","title":{"text":"","font":{"color":"rgba(0,0,0,1)","family":"serif","size":14.6118721461187}},"hoverformat":".2f"},"yaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[0,1],"tickmode":"array","ticktext":["0%","25%","50%","75%","100%"],"tickvals":[0,0.25,0.5,0.75,1],"categoryorder":"array","categoryarray":["0%","25%","50%","75%","100%"],"nticks":null,"ticks":"outside","tickcolor":"rgba(0,0,0,1)","ticklen":3.65296803652968,"tickwidth":0.66417600664176,"showticklabels":true,"tickfont":{"color":"rgba(0,0,0,1)","family":"serif","size":12.5244618395303},"tickangle":-0,"showline":true,"linecolor":"rgba(0,0,0,1)","linewidth":0.66417600664176,"showgrid":false,"gridcolor":null,"gridwidth":0,"zeroline":false,"anchor":"x","title":{"text":"","font":{"color":"rgba(0,0,0,1)","family":"serif","size":14.6118721461187}},"hoverformat":".2f"},"shapes":[{"type":"rect","fillcolor":null,"line":{"color":null,"width":0,"linetype":[]},"yref":"paper","xref":"paper","x0":0,"x1":1,"y0":0,"y1":1}],"showlegend":true,"legend":{"bgcolor":null,"bordercolor":null,"borderwidth":0,"font":{"color":"rgba(0,0,0,1)","family":"serif","size":12.5244618395303},"title":{"text":"","font":{"color":"rgba(0,0,0,1)","family":"serif","size":14.6118721461187}}},"hovermode":"closest","barmode":"relative"},"config":{"doubleClick":"reset","modeBarButtonsToAdd":["hoverclosest","hovercompare"],"showSendToCloud":false},"source":"A","attrs":{"11e124816ecce":{"x":{},"y":{},"text":{},"fill":{},"type":"bar"}},"cur_data":"11e124816ecce","visdat":{"11e124816ecce":["function (y) ","x"]},"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.2,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
</div>
</div>
</div>
</div>
</div>
</section>
</section>
<section id="aldursdreifing-kjósenda" class="level1">
<h1>Aldursdreifing kjósenda</h1>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a>preprocess_data_agedist <span class="ot">&lt;-</span> <span class="cf">function</span>(doi, filename, year) {</span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">get_dataframe_by_name</span>(filename,</span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a>                          doi,</span>
<span id="cb19-4"><a href="#cb19-4" aria-hidden="true" tabindex="-1"></a>                          <span class="at">original =</span> <span class="cn">TRUE</span>,</span>
<span id="cb19-5"><a href="#cb19-5" aria-hidden="true" tabindex="-1"></a>                          <span class="at">.f =</span> haven<span class="sc">::</span>read_sav) <span class="sc">|&gt;</span> </span>
<span id="cb19-6"><a href="#cb19-6" aria-hidden="true" tabindex="-1"></a>        <span class="fu">select</span>(<span class="at">current =</span> <span class="fu">starts_with</span>(<span class="st">"prtvote"</span>), <span class="at">former =</span> <span class="fu">starts_with</span>(<span class="st">"prtfvote"</span>), age) <span class="sc">|&gt;</span> </span>
<span id="cb19-7"><a href="#cb19-7" aria-hidden="true" tabindex="-1"></a>        <span class="fu">mutate_at</span>(<span class="fu">vars</span>(<span class="fu">everything</span>(), <span class="sc">-</span>age), as_factor) <span class="sc">|&gt;</span> </span>
<span id="cb19-8"><a href="#cb19-8" aria-hidden="true" tabindex="-1"></a>        <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">as.character</span>(current) <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"No, did not vote"</span>,</span>
<span id="cb19-9"><a href="#cb19-9" aria-hidden="true" tabindex="-1"></a>                                             <span class="st">"Not applicable"</span>,</span>
<span id="cb19-10"><a href="#cb19-10" aria-hidden="true" tabindex="-1"></a>                                             <span class="st">"Don‘t remember what I voted"</span>,</span>
<span id="cb19-11"><a href="#cb19-11" aria-hidden="true" tabindex="-1"></a>                                             <span class="st">"95"</span>,</span>
<span id="cb19-12"><a href="#cb19-12" aria-hidden="true" tabindex="-1"></a>                                             <span class="st">"Cast a blank or invalid ballot"</span>,</span>
<span id="cb19-13"><a href="#cb19-13" aria-hidden="true" tabindex="-1"></a>                                             <span class="st">"Voted, refuses to say for what party"</span>,</span>
<span id="cb19-14"><a href="#cb19-14" aria-hidden="true" tabindex="-1"></a>                                             <span class="st">"Other party, what party"</span>,</span>
<span id="cb19-15"><a href="#cb19-15" aria-hidden="true" tabindex="-1"></a>                                             <span class="st">"Refuses to answer (volunteered)"</span>,</span>
<span id="cb19-16"><a href="#cb19-16" aria-hidden="true" tabindex="-1"></a>                                             <span class="st">"Don’t know (volunteered)"</span>,</span>
<span id="cb19-17"><a href="#cb19-17" aria-hidden="true" tabindex="-1"></a>                                             <span class="st">"Voted, does not want to say which party"</span>,</span>
<span id="cb19-18"><a href="#cb19-18" aria-hidden="true" tabindex="-1"></a>                                             <span class="st">"Cast a blank ballot"</span>,</span>
<span id="cb19-19"><a href="#cb19-19" aria-hidden="true" tabindex="-1"></a>                                             <span class="st">"Cast an invalid vote"</span>,</span>
<span id="cb19-20"><a href="#cb19-20" aria-hidden="true" tabindex="-1"></a>                                             <span class="st">"Missing"</span>,</span>
<span id="cb19-21"><a href="#cb19-21" aria-hidden="true" tabindex="-1"></a>                                             <span class="st">"Voted, doesn‘t want to say for what party"</span>,</span>
<span id="cb19-22"><a href="#cb19-22" aria-hidden="true" tabindex="-1"></a>                                             <span class="st">"Another party or party list, which?"</span>,</span>
<span id="cb19-23"><a href="#cb19-23" aria-hidden="true" tabindex="-1"></a>                                             <span class="st">"Refuses to answer"</span>)) <span class="sc">|&gt;</span> </span>
<span id="cb19-24"><a href="#cb19-24" aria-hidden="true" tabindex="-1"></a>        <span class="fu">drop_na</span>(current) <span class="sc">|&gt;</span> </span>
<span id="cb19-25"><a href="#cb19-25" aria-hidden="true" tabindex="-1"></a>        <span class="fu">mutate</span>(<span class="at">year =</span> year) <span class="sc">|&gt;</span> </span>
<span id="cb19-26"><a href="#cb19-26" aria-hidden="true" tabindex="-1"></a>        <span class="fu">select</span>(year, current, age)</span>
<span id="cb19-27"><a href="#cb19-27" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb19-28"><a href="#cb19-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-29"><a href="#cb19-29" aria-hidden="true" tabindex="-1"></a>d_agedist <span class="ot">&lt;-</span> <span class="fu">pmap</span>(<span class="fu">list</span>(<span class="at">doi =</span> doi, <span class="at">filename =</span> filename, <span class="at">year =</span> year), preprocess_data_agedist) <span class="sc">|&gt;</span> </span>
<span id="cb19-30"><a href="#cb19-30" aria-hidden="true" tabindex="-1"></a>    <span class="fu">reduce</span>(bind_rows) <span class="sc">|&gt;</span> </span>
<span id="cb19-31"><a href="#cb19-31" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate_at</span>(<span class="fu">vars</span>(current), as.character) <span class="sc">|&gt;</span> </span>
<span id="cb19-32"><a href="#cb19-32" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate_at</span>(<span class="fu">vars</span>(current), translate_parties)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-3-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-3-1" role="tab" aria-controls="tabset-3-1" aria-selected="true">2017</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-3-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-3-2" role="tab" aria-controls="tabset-3-2" aria-selected="false">2013</a></li></ul>
<div class="tab-content">
<div id="tabset-3-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-3-1-tab">
<div class="cell" data-fig.asp="0.5">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a>p <span class="ot">&lt;-</span> d_agedist <span class="sc">|&gt;</span> </span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">age_binned =</span> <span class="fu">cut</span>(age, </span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a>                            <span class="at">breaks =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">30</span>, <span class="dv">40</span>, <span class="dv">50</span>, <span class="dv">60</span>, <span class="cn">Inf</span>),</span>
<span id="cb20-4"><a href="#cb20-4" aria-hidden="true" tabindex="-1"></a>                            <span class="at">labels =</span> <span class="fu">c</span>(<span class="st">"18 - 29 ára"</span>,</span>
<span id="cb20-5"><a href="#cb20-5" aria-hidden="true" tabindex="-1"></a>                                       <span class="st">"30 - 39 ára"</span>,</span>
<span id="cb20-6"><a href="#cb20-6" aria-hidden="true" tabindex="-1"></a>                                       <span class="st">"40 - 49 ára"</span>,</span>
<span id="cb20-7"><a href="#cb20-7" aria-hidden="true" tabindex="-1"></a>                                       <span class="st">"50 - 59 ára"</span>,</span>
<span id="cb20-8"><a href="#cb20-8" aria-hidden="true" tabindex="-1"></a>                                       <span class="st">"60+ ára"</span>),</span>
<span id="cb20-9"><a href="#cb20-9" aria-hidden="true" tabindex="-1"></a>                            <span class="at">include.lowest =</span> <span class="cn">TRUE</span>,</span>
<span id="cb20-10"><a href="#cb20-10" aria-hidden="true" tabindex="-1"></a>                            <span class="at">right =</span> <span class="cn">FALSE</span>),</span>
<span id="cb20-11"><a href="#cb20-11" aria-hidden="true" tabindex="-1"></a>           <span class="at">current =</span> <span class="fu">ifelse</span>(current <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"Samfylkingin"</span>,</span>
<span id="cb20-12"><a href="#cb20-12" aria-hidden="true" tabindex="-1"></a>                                           <span class="st">"Vinstri Græn"</span>,</span>
<span id="cb20-13"><a href="#cb20-13" aria-hidden="true" tabindex="-1"></a>                                           <span class="st">"Sjálfstæðisflokkurinn"</span>, </span>
<span id="cb20-14"><a href="#cb20-14" aria-hidden="true" tabindex="-1"></a>                                           <span class="st">"Píratar"</span>,</span>
<span id="cb20-15"><a href="#cb20-15" aria-hidden="true" tabindex="-1"></a>                                           <span class="st">"Framsóknarflokkurinn"</span>, </span>
<span id="cb20-16"><a href="#cb20-16" aria-hidden="true" tabindex="-1"></a>                                           <span class="st">"Píratar"</span>,</span>
<span id="cb20-17"><a href="#cb20-17" aria-hidden="true" tabindex="-1"></a>                                           <span class="st">"Björt Framtíð"</span>,</span>
<span id="cb20-18"><a href="#cb20-18" aria-hidden="true" tabindex="-1"></a>                                           <span class="st">"Viðreisn"</span>,</span>
<span id="cb20-19"><a href="#cb20-19" aria-hidden="true" tabindex="-1"></a>                                           <span class="st">"Miðflokkurinn"</span>,</span>
<span id="cb20-20"><a href="#cb20-20" aria-hidden="true" tabindex="-1"></a>                                           <span class="st">"Flokkur Fólksins"</span>),</span>
<span id="cb20-21"><a href="#cb20-21" aria-hidden="true" tabindex="-1"></a>                            current,</span>
<span id="cb20-22"><a href="#cb20-22" aria-hidden="true" tabindex="-1"></a>                            <span class="st">"Annað"</span>)) <span class="sc">|&gt;</span> </span>
<span id="cb20-23"><a href="#cb20-23" aria-hidden="true" tabindex="-1"></a>    <span class="fu">filter</span>(year <span class="sc">==</span> <span class="fu">max</span>(year)) <span class="sc">|&gt;</span> </span>
<span id="cb20-24"><a href="#cb20-24" aria-hidden="true" tabindex="-1"></a>    <span class="fu">count</span>(age_binned, current) <span class="sc">|&gt;</span> </span>
<span id="cb20-25"><a href="#cb20-25" aria-hidden="true" tabindex="-1"></a>    <span class="fu">group_by</span>(age_binned) <span class="sc">|&gt;</span> </span>
<span id="cb20-26"><a href="#cb20-26" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">p =</span> n <span class="sc">/</span> <span class="fu">sum</span>(n)) <span class="sc">|&gt;</span> </span>
<span id="cb20-27"><a href="#cb20-27" aria-hidden="true" tabindex="-1"></a>    <span class="fu">ungroup</span>() <span class="sc">|&gt;</span> </span>
<span id="cb20-28"><a href="#cb20-28" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">text =</span> <span class="fu">str_c</span>(<span class="st">"Aldurshópur: "</span>, age_binned, <span class="st">"</span><span class="sc">\n</span><span class="st">"</span>,</span>
<span id="cb20-29"><a href="#cb20-29" aria-hidden="true" tabindex="-1"></a>                        <span class="st">"Flokkur: "</span>, current, <span class="st">"</span><span class="sc">\n</span><span class="st">"</span>,</span>
<span id="cb20-30"><a href="#cb20-30" aria-hidden="true" tabindex="-1"></a>                        <span class="st">"Hlutfall (af aldursflokki): "</span>, <span class="fu">percent</span>(p, <span class="at">accuracy =</span> <span class="fl">0.1</span>))) <span class="sc">|&gt;</span> </span>
<span id="cb20-31"><a href="#cb20-31" aria-hidden="true" tabindex="-1"></a>    <span class="fu">ggplot</span>(<span class="fu">aes</span>(age_binned, n, <span class="at">text =</span> text)) <span class="sc">+</span></span>
<span id="cb20-32"><a href="#cb20-32" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_col</span>(<span class="fu">aes</span>(<span class="at">fill =</span> current), <span class="at">position =</span> <span class="st">"fill"</span>, <span class="at">width =</span> <span class="dv">1</span>, <span class="at">alpha =</span> <span class="fl">0.7</span>) <span class="sc">+</span></span>
<span id="cb20-33"><a href="#cb20-33" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scale_y_continuous</span>(<span class="at">labels =</span> <span class="fu">label_percent</span>()) <span class="sc">+</span></span>
<span id="cb20-34"><a href="#cb20-34" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scale_fill_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(xBF,</span>
<span id="cb20-35"><a href="#cb20-35" aria-hidden="true" tabindex="-1"></a>                                 xFF,</span>
<span id="cb20-36"><a href="#cb20-36" aria-hidden="true" tabindex="-1"></a>                                 xB,</span>
<span id="cb20-37"><a href="#cb20-37" aria-hidden="true" tabindex="-1"></a>                                 xM,</span>
<span id="cb20-38"><a href="#cb20-38" aria-hidden="true" tabindex="-1"></a>                                 xP,</span>
<span id="cb20-39"><a href="#cb20-39" aria-hidden="true" tabindex="-1"></a>                                 xS,</span>
<span id="cb20-40"><a href="#cb20-40" aria-hidden="true" tabindex="-1"></a>                                 xD,</span>
<span id="cb20-41"><a href="#cb20-41" aria-hidden="true" tabindex="-1"></a>                                 xC,</span>
<span id="cb20-42"><a href="#cb20-42" aria-hidden="true" tabindex="-1"></a>                                 xV)) <span class="sc">+</span></span>
<span id="cb20-43"><a href="#cb20-43" aria-hidden="true" tabindex="-1"></a>    <span class="fu">coord_cartesian</span>(<span class="at">expand =</span> F) <span class="sc">+</span></span>
<span id="cb20-44"><a href="#cb20-44" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme_cowplot</span>(<span class="at">font_size =</span> <span class="dv">11</span>, <span class="at">font_family =</span> <span class="st">"serif"</span>) <span class="sc">+</span></span>
<span id="cb20-45"><a href="#cb20-45" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme</span>(<span class="at">plot.caption =</span> <span class="fu">element_text</span>(<span class="at">hjust =</span> <span class="dv">0</span>)) <span class="sc">+</span></span>
<span id="cb20-46"><a href="#cb20-46" aria-hidden="true" tabindex="-1"></a>    <span class="fu">labs</span>(<span class="at">x =</span> <span class="cn">NULL</span>,</span>
<span id="cb20-47"><a href="#cb20-47" aria-hidden="true" tabindex="-1"></a>         <span class="at">y =</span> <span class="cn">NULL</span>,</span>
<span id="cb20-48"><a href="#cb20-48" aria-hidden="true" tabindex="-1"></a>         <span class="at">fill =</span> <span class="cn">NULL</span>,</span>
<span id="cb20-49"><a href="#cb20-49" aria-hidden="true" tabindex="-1"></a>         <span class="at">title =</span> <span class="st">"Hvað kjósa mismunandi aldurshópar?"</span>,</span>
<span id="cb20-50"><a href="#cb20-50" aria-hidden="true" tabindex="-1"></a>         <span class="at">subtitle =</span> <span class="st">"Aldursdreifing kjósenda sýnd fyrir alþingiskosningar 2017"</span>,</span>
<span id="cb20-51"><a href="#cb20-51" aria-hidden="true" tabindex="-1"></a>         <span class="at">caption =</span> <span class="st">"Kóði og gögn: https://github.com/bgautijonsson/kosningarannsokn"</span>)</span>
<span id="cb20-52"><a href="#cb20-52" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-53"><a href="#cb20-53" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-54"><a href="#cb20-54" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplotly</span>(p, <span class="at">tooltip =</span> <span class="st">"text"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div id="htmlwidget-3edbc0cc2d450b52a819" style="width:100%;height:480px;" class="plotly html-widget"></div>
<script type="application/json" data-for="htmlwidget-3edbc0cc2d450b52a819">{"x":{"data":[{"orientation":"v","width":[1,1,1,1,1],"base":[0.981818181818182,0.975265017667845,0.978181818181818,0.989655172413793,0.994174757281553],"x":[1,2,3,4,5],"y":[0.0181818181818182,0.0247349823321554,0.0218181818181818,0.0103448275862069,0.00582524271844664],"text":["Aldurshópur: 18 - 29 ára<br />Flokkur: Björt Framtíð<br />Hlutfall (af aldursflokki): 1.8%","Aldurshópur: 30 - 39 ára<br />Flokkur: Björt Framtíð<br />Hlutfall (af aldursflokki): 2.5%","Aldurshópur: 40 - 49 ára<br />Flokkur: Björt Framtíð<br />Hlutfall (af aldursflokki): 2.2%","Aldurshópur: 50 - 59 ára<br />Flokkur: Björt Framtíð<br />Hlutfall (af aldursflokki): 1.0%","Aldurshópur: 60+ ára<br />Flokkur: Björt Framtíð<br />Hlutfall (af aldursflokki): 0.6%"],"type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(202,178,214,0.7)","line":{"width":1.88976377952756,"color":"transparent"}},"name":"Björt Framtíð","legendgroup":"Björt Framtíð","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"orientation":"v","width":[1,1,1,1,1],"base":[0.945454545454545,0.936395759717314,0.967272727272727,0.920689655172414,0.897087378640777],"x":[1,2,3,4,5],"y":[0.0363636363636364,0.0388692579505301,0.0109090909090909,0.0689655172413793,0.0970873786407767],"text":["Aldurshópur: 18 - 29 ára<br />Flokkur: Flokkur Fólksins<br />Hlutfall (af aldursflokki): 3.6%","Aldurshópur: 30 - 39 ára<br />Flokkur: Flokkur Fólksins<br />Hlutfall (af aldursflokki): 3.9%","Aldurshópur: 40 - 49 ára<br />Flokkur: Flokkur Fólksins<br />Hlutfall (af aldursflokki): 1.1%","Aldurshópur: 50 - 59 ára<br />Flokkur: Flokkur Fólksins<br />Hlutfall (af aldursflokki): 6.9%","Aldurshópur: 60+ ára<br />Flokkur: Flokkur Fólksins<br />Hlutfall (af aldursflokki): 9.7%"],"type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(254,227,145,0.7)","line":{"width":1.88976377952756,"color":"transparent"}},"name":"Flokkur Fólksins","legendgroup":"Flokkur Fólksins","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"orientation":"v","width":[1,1,1,1,1],"base":[0.83030303030303,0.809187279151943,0.869090909090909,0.796551724137931,0.801941747572816],"x":[1,2,3,4,5],"y":[0.115151515151515,0.127208480565371,0.0981818181818181,0.124137931034483,0.0951456310679611],"text":["Aldurshópur: 18 - 29 ára<br />Flokkur: Framsóknarflokkurinn<br />Hlutfall (af aldursflokki): 11.5%","Aldurshópur: 30 - 39 ára<br />Flokkur: Framsóknarflokkurinn<br />Hlutfall (af aldursflokki): 12.7%","Aldurshópur: 40 - 49 ára<br />Flokkur: Framsóknarflokkurinn<br />Hlutfall (af aldursflokki): 9.8%","Aldurshópur: 50 - 59 ára<br />Flokkur: Framsóknarflokkurinn<br />Hlutfall (af aldursflokki): 12.4%","Aldurshópur: 60+ ára<br />Flokkur: Framsóknarflokkurinn<br />Hlutfall (af aldursflokki): 9.5%"],"type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(178,223,138,0.7)","line":{"width":1.88976377952756,"color":"transparent"}},"name":"Framsóknarflokkurinn","legendgroup":"Framsóknarflokkurinn","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"orientation":"v","width":[1,1,1,1,1],"base":[0.751515151515151,0.745583038869258,0.752727272727273,0.706896551724138,0.70873786407767],"x":[1,2,3,4,5],"y":[0.0787878787878789,0.0636042402826855,0.116363636363636,0.0896551724137932,0.0932038834951456],"text":["Aldurshópur: 18 - 29 ára<br />Flokkur: Miðflokkurinn<br />Hlutfall (af aldursflokki): 7.9%","Aldurshópur: 30 - 39 ára<br />Flokkur: Miðflokkurinn<br />Hlutfall (af aldursflokki): 6.4%","Aldurshópur: 40 - 49 ára<br />Flokkur: Miðflokkurinn<br />Hlutfall (af aldursflokki): 11.6%","Aldurshópur: 50 - 59 ára<br />Flokkur: Miðflokkurinn<br />Hlutfall (af aldursflokki): 9.0%","Aldurshópur: 60+ ára<br />Flokkur: Miðflokkurinn<br />Hlutfall (af aldursflokki): 9.3%"],"type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(8,48,107,0.7)","line":{"width":1.88976377952756,"color":"transparent"}},"name":"Miðflokkurinn","legendgroup":"Miðflokkurinn","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"orientation":"v","width":[1,1,1,1,1],"base":[0.621212121212121,0.618374558303887,0.669090909090909,0.651724137931034,0.683495145631068],"x":[1,2,3,4,5],"y":[0.13030303030303,0.127208480565371,0.0836363636363636,0.0551724137931034,0.025242718446602],"text":["Aldurshópur: 18 - 29 ára<br />Flokkur: Píratar<br />Hlutfall (af aldursflokki): 13.0%","Aldurshópur: 30 - 39 ára<br />Flokkur: Píratar<br />Hlutfall (af aldursflokki): 12.7%","Aldurshópur: 40 - 49 ára<br />Flokkur: Píratar<br />Hlutfall (af aldursflokki): 8.4%","Aldurshópur: 50 - 59 ára<br />Flokkur: Píratar<br />Hlutfall (af aldursflokki): 5.5%","Aldurshópur: 60+ ára<br />Flokkur: Píratar<br />Hlutfall (af aldursflokki): 2.5%"],"type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(152,78,163,0.7)","line":{"width":1.88976377952756,"color":"transparent"}},"name":"Píratar","legendgroup":"Píratar","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"orientation":"v","width":[1,1,1,1,1],"base":[0.518181818181818,0.512367491166078,0.52,0.503448275862069,0.518446601941748],"x":[1,2,3,4,5],"y":[0.103030303030303,0.106007067137809,0.149090909090909,0.148275862068965,0.16504854368932],"text":["Aldurshópur: 18 - 29 ára<br />Flokkur: Samfylkingin<br />Hlutfall (af aldursflokki): 10.3%","Aldurshópur: 30 - 39 ára<br />Flokkur: Samfylkingin<br />Hlutfall (af aldursflokki): 10.6%","Aldurshópur: 40 - 49 ára<br />Flokkur: Samfylkingin<br />Hlutfall (af aldursflokki): 14.9%","Aldurshópur: 50 - 59 ára<br />Flokkur: Samfylkingin<br />Hlutfall (af aldursflokki): 14.8%","Aldurshópur: 60+ ára<br />Flokkur: Samfylkingin<br />Hlutfall (af aldursflokki): 16.5%"],"type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(228,26,28,0.7)","line":{"width":1.88976377952756,"color":"transparent"}},"name":"Samfylkingin","legendgroup":"Samfylkingin","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"orientation":"v","width":[1,1,1,1,1],"base":[0.339393939393939,0.307420494699647,0.258181818181818,0.251724137931034,0.233009708737864],"x":[1,2,3,4,5],"y":[0.178787878787879,0.204946996466431,0.261818181818182,0.251724137931034,0.285436893203883],"text":["Aldurshópur: 18 - 29 ára<br />Flokkur: Sjálfstæðisflokkurinn<br />Hlutfall (af aldursflokki): 17.9%","Aldurshópur: 30 - 39 ára<br />Flokkur: Sjálfstæðisflokkurinn<br />Hlutfall (af aldursflokki): 20.5%","Aldurshópur: 40 - 49 ára<br />Flokkur: Sjálfstæðisflokkurinn<br />Hlutfall (af aldursflokki): 26.2%","Aldurshópur: 50 - 59 ára<br />Flokkur: Sjálfstæðisflokkurinn<br />Hlutfall (af aldursflokki): 25.2%","Aldurshópur: 60+ ára<br />Flokkur: Sjálfstæðisflokkurinn<br />Hlutfall (af aldursflokki): 28.5%"],"type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(55,126,184,0.7)","line":{"width":1.88976377952756,"color":"transparent"}},"name":"Sjálfstæðisflokkurinn","legendgroup":"Sjálfstæðisflokkurinn","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"orientation":"v","width":[1,1,1,1,1],"base":[0.272727272727273,0.183745583038869,0.167272727272727,0.196551724137931,0.176699029126214],"x":[1,2,3,4,5],"y":[0.0666666666666667,0.123674911660777,0.0909090909090909,0.0551724137931034,0.0563106796116505],"text":["Aldurshópur: 18 - 29 ára<br />Flokkur: Viðreisn<br />Hlutfall (af aldursflokki): 6.7%","Aldurshópur: 30 - 39 ára<br />Flokkur: Viðreisn<br />Hlutfall (af aldursflokki): 12.4%","Aldurshópur: 40 - 49 ára<br />Flokkur: Viðreisn<br />Hlutfall (af aldursflokki): 9.1%","Aldurshópur: 50 - 59 ára<br />Flokkur: Viðreisn<br />Hlutfall (af aldursflokki): 5.5%","Aldurshópur: 60+ ára<br />Flokkur: Viðreisn<br />Hlutfall (af aldursflokki): 5.6%"],"type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(255,127,0,0.7)","line":{"width":1.88976377952756,"color":"transparent"}},"name":"Viðreisn","legendgroup":"Viðreisn","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"orientation":"v","width":[1,1,1,1,1],"base":[0,0,0,0,0],"x":[1,2,3,4,5],"y":[0.272727272727273,0.183745583038869,0.167272727272727,0.196551724137931,0.176699029126214],"text":["Aldurshópur: 18 - 29 ára<br />Flokkur: Vinstri Græn<br />Hlutfall (af aldursflokki): 27.3%","Aldurshópur: 30 - 39 ára<br />Flokkur: Vinstri Græn<br />Hlutfall (af aldursflokki): 18.4%","Aldurshópur: 40 - 49 ára<br />Flokkur: Vinstri Græn<br />Hlutfall (af aldursflokki): 16.7%","Aldurshópur: 50 - 59 ára<br />Flokkur: Vinstri Græn<br />Hlutfall (af aldursflokki): 19.7%","Aldurshópur: 60+ ára<br />Flokkur: Vinstri Græn<br />Hlutfall (af aldursflokki): 17.7%"],"type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(35,139,69,0.7)","line":{"width":1.88976377952756,"color":"transparent"}},"name":"Vinstri Græn","legendgroup":"Vinstri Græn","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null}],"layout":{"margin":{"t":47.3111545988258,"r":7.30593607305936,"b":30.7893020221787,"l":36.0078277886497},"font":{"color":"rgba(0,0,0,1)","family":"serif","size":14.6118721461187},"title":{"text":"<b> Hvað kjósa mismunandi aldurshópar? <\/b>","font":{"color":"rgba(0,0,0,1)","family":"serif","size":16.6992824527071},"x":0,"xref":"paper"},"xaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[0.5,5.5],"tickmode":"array","ticktext":["18 - 29 ára","30 - 39 ára","40 - 49 ára","50 - 59 ára","60+ ára"],"tickvals":[1,2,3,4,5],"categoryorder":"array","categoryarray":["18 - 29 ára","30 - 39 ára","40 - 49 ára","50 - 59 ára","60+ ára"],"nticks":null,"ticks":"outside","tickcolor":"rgba(0,0,0,1)","ticklen":3.65296803652968,"tickwidth":0.66417600664176,"showticklabels":true,"tickfont":{"color":"rgba(0,0,0,1)","family":"serif","size":12.5244618395303},"tickangle":-0,"showline":true,"linecolor":"rgba(0,0,0,1)","linewidth":0.66417600664176,"showgrid":false,"gridcolor":null,"gridwidth":0,"zeroline":false,"anchor":"y","title":{"text":"","font":{"color":"rgba(0,0,0,1)","family":"serif","size":14.6118721461187}},"hoverformat":".2f"},"yaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[0,1],"tickmode":"array","ticktext":["0%","25%","50%","75%","100%"],"tickvals":[0,0.25,0.5,0.75,1],"categoryorder":"array","categoryarray":["0%","25%","50%","75%","100%"],"nticks":null,"ticks":"outside","tickcolor":"rgba(0,0,0,1)","ticklen":3.65296803652968,"tickwidth":0.66417600664176,"showticklabels":true,"tickfont":{"color":"rgba(0,0,0,1)","family":"serif","size":12.5244618395303},"tickangle":-0,"showline":true,"linecolor":"rgba(0,0,0,1)","linewidth":0.66417600664176,"showgrid":false,"gridcolor":null,"gridwidth":0,"zeroline":false,"anchor":"x","title":{"text":"","font":{"color":"rgba(0,0,0,1)","family":"serif","size":14.6118721461187}},"hoverformat":".2f"},"shapes":[{"type":"rect","fillcolor":null,"line":{"color":null,"width":0,"linetype":[]},"yref":"paper","xref":"paper","x0":0,"x1":1,"y0":0,"y1":1}],"showlegend":true,"legend":{"bgcolor":null,"bordercolor":null,"borderwidth":0,"font":{"color":"rgba(0,0,0,1)","family":"serif","size":12.5244618395303},"title":{"text":"","font":{"color":"rgba(0,0,0,1)","family":"serif","size":14.6118721461187}}},"hovermode":"closest","barmode":"relative"},"config":{"doubleClick":"reset","modeBarButtonsToAdd":["hoverclosest","hovercompare"],"showSendToCloud":false},"source":"A","attrs":{"11e124d906ad8":{"x":{},"y":{},"text":{},"fill":{},"type":"bar"}},"cur_data":"11e124d906ad8","visdat":{"11e124d906ad8":["function (y) ","x"]},"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.2,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
</div>
</div>
<div class="cell" data-fig.asp="0.8">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a>plot_dat <span class="ot">&lt;-</span> d_agedist <span class="sc">|&gt;</span> </span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">filter</span>(year <span class="sc">==</span> <span class="dv">2017</span>) <span class="sc">|&gt;</span> </span>
<span id="cb21-3"><a href="#cb21-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">age =</span> <span class="fu">as.numeric</span>(age))</span>
<span id="cb21-4"><a href="#cb21-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-5"><a href="#cb21-5" aria-hidden="true" tabindex="-1"></a>plot_dat <span class="sc">|&gt;</span> </span>
<span id="cb21-6"><a href="#cb21-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">ggplot</span>(<span class="fu">aes</span>(age)) <span class="sc">+</span></span>
<span id="cb21-7"><a href="#cb21-7" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_density</span>(<span class="at">data =</span> plot_dat <span class="sc">|&gt;</span> <span class="fu">rename</span>(<span class="at">cr =</span> current), <span class="at">alpha =</span> <span class="fl">0.5</span>, <span class="at">fill =</span> <span class="st">"grey"</span>) <span class="sc">+</span></span>
<span id="cb21-8"><a href="#cb21-8" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_density</span>(<span class="fu">aes</span>(<span class="at">fill =</span> current), <span class="at">alpha =</span> <span class="fl">0.7</span>) <span class="sc">+</span></span>
<span id="cb21-9"><a href="#cb21-9" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scale_x_continuous</span>(<span class="at">labels =</span> <span class="fu">label_number</span>(<span class="at">suffix =</span> <span class="st">" ára"</span>)) <span class="sc">+</span></span>
<span id="cb21-10"><a href="#cb21-10" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scale_fill_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(xBF,</span>
<span id="cb21-11"><a href="#cb21-11" aria-hidden="true" tabindex="-1"></a>                                 xFF,</span>
<span id="cb21-12"><a href="#cb21-12" aria-hidden="true" tabindex="-1"></a>                                 xB,</span>
<span id="cb21-13"><a href="#cb21-13" aria-hidden="true" tabindex="-1"></a>                                 xM,</span>
<span id="cb21-14"><a href="#cb21-14" aria-hidden="true" tabindex="-1"></a>                                 xP,</span>
<span id="cb21-15"><a href="#cb21-15" aria-hidden="true" tabindex="-1"></a>                                 xS,</span>
<span id="cb21-16"><a href="#cb21-16" aria-hidden="true" tabindex="-1"></a>                                 xD,</span>
<span id="cb21-17"><a href="#cb21-17" aria-hidden="true" tabindex="-1"></a>                                 xC,</span>
<span id="cb21-18"><a href="#cb21-18" aria-hidden="true" tabindex="-1"></a>                                 xV)) <span class="sc">+</span></span>
<span id="cb21-19"><a href="#cb21-19" aria-hidden="true" tabindex="-1"></a>    <span class="fu">facet_wrap</span>(<span class="st">"current"</span>) <span class="sc">+</span></span>
<span id="cb21-20"><a href="#cb21-20" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme_cowplot</span>(<span class="at">font_size =</span> <span class="dv">11</span>, <span class="at">font_family =</span> <span class="st">"serif"</span>) <span class="sc">+</span></span>
<span id="cb21-21"><a href="#cb21-21" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"none"</span>,</span>
<span id="cb21-22"><a href="#cb21-22" aria-hidden="true" tabindex="-1"></a>          <span class="at">axis.text.y =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb21-23"><a href="#cb21-23" aria-hidden="true" tabindex="-1"></a>          <span class="at">axis.ticks.y =</span> <span class="fu">element_blank</span>(), <span class="at">axis.line.y =</span> <span class="fu">element_blank</span>()) <span class="sc">+</span></span>
<span id="cb21-24"><a href="#cb21-24" aria-hidden="true" tabindex="-1"></a>    <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">"Aldur"</span>,</span>
<span id="cb21-25"><a href="#cb21-25" aria-hidden="true" tabindex="-1"></a>         <span class="at">y =</span> <span class="cn">NULL</span>,</span>
<span id="cb21-26"><a href="#cb21-26" aria-hidden="true" tabindex="-1"></a>         <span class="at">title =</span> <span class="st">"Aldursdreifing kjósenda eftir flokki (2017)"</span>,</span>
<span id="cb21-27"><a href="#cb21-27" aria-hidden="true" tabindex="-1"></a>         <span class="at">subtitle =</span> <span class="st">"Borið saman við aldursdreifingu heildarinnar"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img src="index_files/figure-html/unnamed-chunk-21-1.png" class="img-fluid" style="width:100.0%"></p>
</div>
</div>
</div>
<div id="tabset-3-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-3-2-tab">
<div class="cell" data-fig.asp="0.5">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a>p <span class="ot">&lt;-</span> d_agedist <span class="sc">|&gt;</span> </span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">age_binned =</span> <span class="fu">cut</span>(age, </span>
<span id="cb22-3"><a href="#cb22-3" aria-hidden="true" tabindex="-1"></a>                            <span class="at">breaks =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">30</span>, <span class="dv">40</span>, <span class="dv">50</span>, <span class="dv">60</span>, <span class="cn">Inf</span>),</span>
<span id="cb22-4"><a href="#cb22-4" aria-hidden="true" tabindex="-1"></a>                            <span class="at">labels =</span> <span class="fu">c</span>(<span class="st">"18 - 29 ára"</span>,</span>
<span id="cb22-5"><a href="#cb22-5" aria-hidden="true" tabindex="-1"></a>                                       <span class="st">"30 - 39 ára"</span>,</span>
<span id="cb22-6"><a href="#cb22-6" aria-hidden="true" tabindex="-1"></a>                                       <span class="st">"40 - 49 ára"</span>,</span>
<span id="cb22-7"><a href="#cb22-7" aria-hidden="true" tabindex="-1"></a>                                       <span class="st">"50 - 59 ára"</span>,</span>
<span id="cb22-8"><a href="#cb22-8" aria-hidden="true" tabindex="-1"></a>                                       <span class="st">"60+ ára"</span>),</span>
<span id="cb22-9"><a href="#cb22-9" aria-hidden="true" tabindex="-1"></a>                            <span class="at">include.lowest =</span> <span class="cn">TRUE</span>,</span>
<span id="cb22-10"><a href="#cb22-10" aria-hidden="true" tabindex="-1"></a>                            <span class="at">right =</span> <span class="cn">FALSE</span>),</span>
<span id="cb22-11"><a href="#cb22-11" aria-hidden="true" tabindex="-1"></a>           <span class="at">current =</span> <span class="fu">ifelse</span>(current <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"Samfylkingin"</span>,</span>
<span id="cb22-12"><a href="#cb22-12" aria-hidden="true" tabindex="-1"></a>                                           <span class="st">"Vinstri Græn"</span>,</span>
<span id="cb22-13"><a href="#cb22-13" aria-hidden="true" tabindex="-1"></a>                                           <span class="st">"Sjálfstæðisflokkurinn"</span>, </span>
<span id="cb22-14"><a href="#cb22-14" aria-hidden="true" tabindex="-1"></a>                                           <span class="st">"Píratar"</span>,</span>
<span id="cb22-15"><a href="#cb22-15" aria-hidden="true" tabindex="-1"></a>                                           <span class="st">"Framsóknarflokkurinn"</span>, </span>
<span id="cb22-16"><a href="#cb22-16" aria-hidden="true" tabindex="-1"></a>                                           <span class="st">"Píratar"</span>,</span>
<span id="cb22-17"><a href="#cb22-17" aria-hidden="true" tabindex="-1"></a>                                           <span class="st">"Björt Framtíð"</span>,</span>
<span id="cb22-18"><a href="#cb22-18" aria-hidden="true" tabindex="-1"></a>                                           <span class="st">"Viðreisn"</span>,</span>
<span id="cb22-19"><a href="#cb22-19" aria-hidden="true" tabindex="-1"></a>                                           <span class="st">"Miðflokkurinn"</span>,</span>
<span id="cb22-20"><a href="#cb22-20" aria-hidden="true" tabindex="-1"></a>                                           <span class="st">"Flokkur Fólksins"</span>),</span>
<span id="cb22-21"><a href="#cb22-21" aria-hidden="true" tabindex="-1"></a>                            current,</span>
<span id="cb22-22"><a href="#cb22-22" aria-hidden="true" tabindex="-1"></a>                            <span class="st">"Annað"</span>)) <span class="sc">|&gt;</span> </span>
<span id="cb22-23"><a href="#cb22-23" aria-hidden="true" tabindex="-1"></a>    <span class="fu">filter</span>(year <span class="sc">==</span> <span class="dv">2013</span>) <span class="sc">|&gt;</span> </span>
<span id="cb22-24"><a href="#cb22-24" aria-hidden="true" tabindex="-1"></a>    <span class="fu">count</span>(age_binned, current) <span class="sc">|&gt;</span> </span>
<span id="cb22-25"><a href="#cb22-25" aria-hidden="true" tabindex="-1"></a>    <span class="fu">group_by</span>(age_binned) <span class="sc">|&gt;</span> </span>
<span id="cb22-26"><a href="#cb22-26" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">p =</span> n <span class="sc">/</span> <span class="fu">sum</span>(n)) <span class="sc">|&gt;</span> </span>
<span id="cb22-27"><a href="#cb22-27" aria-hidden="true" tabindex="-1"></a>    <span class="fu">ungroup</span>() <span class="sc">|&gt;</span> </span>
<span id="cb22-28"><a href="#cb22-28" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">text =</span> <span class="fu">str_c</span>(<span class="st">"Aldurshópur: "</span>, age_binned, <span class="st">"</span><span class="sc">\n</span><span class="st">"</span>,</span>
<span id="cb22-29"><a href="#cb22-29" aria-hidden="true" tabindex="-1"></a>                        <span class="st">"Flokkur: "</span>, current, <span class="st">"</span><span class="sc">\n</span><span class="st">"</span>,</span>
<span id="cb22-30"><a href="#cb22-30" aria-hidden="true" tabindex="-1"></a>                        <span class="st">"Hlutfall (af aldursflokki): "</span>, <span class="fu">percent</span>(p, <span class="at">accuracy =</span> <span class="fl">0.1</span>))) <span class="sc">|&gt;</span> </span>
<span id="cb22-31"><a href="#cb22-31" aria-hidden="true" tabindex="-1"></a>    <span class="fu">ggplot</span>(<span class="fu">aes</span>(age_binned, n, <span class="at">text =</span> text)) <span class="sc">+</span></span>
<span id="cb22-32"><a href="#cb22-32" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_col</span>(<span class="fu">aes</span>(<span class="at">fill =</span> current), <span class="at">position =</span> <span class="st">"fill"</span>, <span class="at">width =</span> <span class="dv">1</span>, <span class="at">alpha =</span> <span class="fl">0.7</span>) <span class="sc">+</span></span>
<span id="cb22-33"><a href="#cb22-33" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scale_y_continuous</span>(<span class="at">labels =</span> <span class="fu">label_percent</span>()) <span class="sc">+</span></span>
<span id="cb22-34"><a href="#cb22-34" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scale_fill_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(Annad,</span>
<span id="cb22-35"><a href="#cb22-35" aria-hidden="true" tabindex="-1"></a>                                 xBF,</span>
<span id="cb22-36"><a href="#cb22-36" aria-hidden="true" tabindex="-1"></a>                                 xB,</span>
<span id="cb22-37"><a href="#cb22-37" aria-hidden="true" tabindex="-1"></a>                                 xP,</span>
<span id="cb22-38"><a href="#cb22-38" aria-hidden="true" tabindex="-1"></a>                                 xS,</span>
<span id="cb22-39"><a href="#cb22-39" aria-hidden="true" tabindex="-1"></a>                                 xD,</span>
<span id="cb22-40"><a href="#cb22-40" aria-hidden="true" tabindex="-1"></a>                                 xV)) <span class="sc">+</span></span>
<span id="cb22-41"><a href="#cb22-41" aria-hidden="true" tabindex="-1"></a>    <span class="fu">coord_cartesian</span>(<span class="at">expand =</span> F) <span class="sc">+</span></span>
<span id="cb22-42"><a href="#cb22-42" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme_cowplot</span>(<span class="at">font_size =</span> <span class="dv">11</span>, <span class="at">font_family =</span> <span class="st">"serif"</span>) <span class="sc">+</span></span>
<span id="cb22-43"><a href="#cb22-43" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme</span>(<span class="at">plot.caption =</span> <span class="fu">element_text</span>(<span class="at">hjust =</span> <span class="dv">0</span>)) <span class="sc">+</span></span>
<span id="cb22-44"><a href="#cb22-44" aria-hidden="true" tabindex="-1"></a>    <span class="fu">labs</span>(<span class="at">x =</span> <span class="cn">NULL</span>,</span>
<span id="cb22-45"><a href="#cb22-45" aria-hidden="true" tabindex="-1"></a>         <span class="at">y =</span> <span class="cn">NULL</span>,</span>
<span id="cb22-46"><a href="#cb22-46" aria-hidden="true" tabindex="-1"></a>         <span class="at">fill =</span> <span class="cn">NULL</span>,</span>
<span id="cb22-47"><a href="#cb22-47" aria-hidden="true" tabindex="-1"></a>         <span class="at">title =</span> <span class="st">"Hvað kjósa mismunandi aldurshópar (2013)?"</span>,</span>
<span id="cb22-48"><a href="#cb22-48" aria-hidden="true" tabindex="-1"></a>         <span class="at">caption =</span> <span class="st">"Kóði og gögn: https://github.com/bgautijonsson/kosningarannsokn"</span>)</span>
<span id="cb22-49"><a href="#cb22-49" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-50"><a href="#cb22-50" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-51"><a href="#cb22-51" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplotly</span>(p, <span class="at">tooltip =</span> <span class="st">"text"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div id="htmlwidget-05b20154247fc378bac3" style="width:100%;height:480px;" class="plotly html-widget"></div>
<script type="application/json" data-for="htmlwidget-05b20154247fc378bac3">{"x":{"data":[{"orientation":"v","width":[1,1,1,1,1],"base":[0.936170212765957,0.92,0.914285714285714,0.903614457831325,0.920415224913495],"x":[1,2,3,4,5],"y":[0.0638297872340425,0.08,0.0857142857142857,0.0963855421686747,0.0795847750865052],"text":["Aldurshópur: 18 - 29 ára<br />Flokkur: Annað<br />Hlutfall (af aldursflokki): 6.4%","Aldurshópur: 30 - 39 ára<br />Flokkur: Annað<br />Hlutfall (af aldursflokki): 8.0%","Aldurshópur: 40 - 49 ára<br />Flokkur: Annað<br />Hlutfall (af aldursflokki): 8.6%","Aldurshópur: 50 - 59 ára<br />Flokkur: Annað<br />Hlutfall (af aldursflokki): 9.6%","Aldurshópur: 60+ ára<br />Flokkur: Annað<br />Hlutfall (af aldursflokki): 8.0%"],"type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(229,216,189,0.7)","line":{"width":1.88976377952756,"color":"transparent"}},"name":"Annað","legendgroup":"Annað","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"orientation":"v","width":[1,1,1,1,1],"base":[0.791489361702128,0.845,0.814285714285714,0.855421686746988,0.86159169550173],"x":[1,2,3,4,5],"y":[0.14468085106383,0.0750000000000001,0.1,0.0481927710843374,0.0588235294117647],"text":["Aldurshópur: 18 - 29 ára<br />Flokkur: Björt Framtíð<br />Hlutfall (af aldursflokki): 14.5%","Aldurshópur: 30 - 39 ára<br />Flokkur: Björt Framtíð<br />Hlutfall (af aldursflokki): 7.5%","Aldurshópur: 40 - 49 ára<br />Flokkur: Björt Framtíð<br />Hlutfall (af aldursflokki): 10.0%","Aldurshópur: 50 - 59 ára<br />Flokkur: Björt Framtíð<br />Hlutfall (af aldursflokki): 4.8%","Aldurshópur: 60+ ára<br />Flokkur: Björt Framtíð<br />Hlutfall (af aldursflokki): 5.9%"],"type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(202,178,214,0.7)","line":{"width":1.88976377952756,"color":"transparent"}},"name":"Björt Framtíð","legendgroup":"Björt Framtíð","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"orientation":"v","width":[1,1,1,1,1],"base":[0.608510638297872,0.59,0.538095238095238,0.570281124497992,0.667820069204152],"x":[1,2,3,4,5],"y":[0.182978723404255,0.255,0.276190476190476,0.285140562248996,0.193771626297578],"text":["Aldurshópur: 18 - 29 ára<br />Flokkur: Framsóknarflokkurinn<br />Hlutfall (af aldursflokki): 18.3%","Aldurshópur: 30 - 39 ára<br />Flokkur: Framsóknarflokkurinn<br />Hlutfall (af aldursflokki): 25.5%","Aldurshópur: 40 - 49 ára<br />Flokkur: Framsóknarflokkurinn<br />Hlutfall (af aldursflokki): 27.6%","Aldurshópur: 50 - 59 ára<br />Flokkur: Framsóknarflokkurinn<br />Hlutfall (af aldursflokki): 28.5%","Aldurshópur: 60+ ára<br />Flokkur: Framsóknarflokkurinn<br />Hlutfall (af aldursflokki): 19.4%"],"type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(178,223,138,0.7)","line":{"width":1.88976377952756,"color":"transparent"}},"name":"Framsóknarflokkurinn","legendgroup":"Framsóknarflokkurinn","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"orientation":"v","width":[1,1,1,1,1],"base":[0.45531914893617,0.555,0.49047619047619,0.546184738955823,0.636678200692042],"x":[1,2,3,4,5],"y":[0.153191489361702,0.0349999999999999,0.0476190476190476,0.0240963855421686,0.0311418685121108],"text":["Aldurshópur: 18 - 29 ára<br />Flokkur: Píratar<br />Hlutfall (af aldursflokki): 15.3%","Aldurshópur: 30 - 39 ára<br />Flokkur: Píratar<br />Hlutfall (af aldursflokki): 3.5%","Aldurshópur: 40 - 49 ára<br />Flokkur: Píratar<br />Hlutfall (af aldursflokki): 4.8%","Aldurshópur: 50 - 59 ára<br />Flokkur: Píratar<br />Hlutfall (af aldursflokki): 2.4%","Aldurshópur: 60+ ára<br />Flokkur: Píratar<br />Hlutfall (af aldursflokki): 3.1%"],"type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(152,78,163,0.7)","line":{"width":1.88976377952756,"color":"transparent"}},"name":"Píratar","legendgroup":"Píratar","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"orientation":"v","width":[1,1,1,1,1],"base":[0.327659574468085,0.4,0.380952380952381,0.393574297188755,0.43598615916955],"x":[1,2,3,4,5],"y":[0.127659574468085,0.155,0.10952380952381,0.152610441767068,0.200692041522491],"text":["Aldurshópur: 18 - 29 ára<br />Flokkur: Samfylkingin<br />Hlutfall (af aldursflokki): 12.8%","Aldurshópur: 30 - 39 ára<br />Flokkur: Samfylkingin<br />Hlutfall (af aldursflokki): 15.5%","Aldurshópur: 40 - 49 ára<br />Flokkur: Samfylkingin<br />Hlutfall (af aldursflokki): 11.0%","Aldurshópur: 50 - 59 ára<br />Flokkur: Samfylkingin<br />Hlutfall (af aldursflokki): 15.3%","Aldurshópur: 60+ ára<br />Flokkur: Samfylkingin<br />Hlutfall (af aldursflokki): 20.1%"],"type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(228,26,28,0.7)","line":{"width":1.88976377952756,"color":"transparent"}},"name":"Samfylkingin","legendgroup":"Samfylkingin","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"orientation":"v","width":[1,1,1,1,1],"base":[0.102127659574468,0.155,0.123809523809524,0.164658634538153,0.117647058823529],"x":[1,2,3,4,5],"y":[0.225531914893617,0.245,0.257142857142857,0.228915662650602,0.318339100346021],"text":["Aldurshópur: 18 - 29 ára<br />Flokkur: Sjálfstæðisflokkurinn<br />Hlutfall (af aldursflokki): 22.6%","Aldurshópur: 30 - 39 ára<br />Flokkur: Sjálfstæðisflokkurinn<br />Hlutfall (af aldursflokki): 24.5%","Aldurshópur: 40 - 49 ára<br />Flokkur: Sjálfstæðisflokkurinn<br />Hlutfall (af aldursflokki): 25.7%","Aldurshópur: 50 - 59 ára<br />Flokkur: Sjálfstæðisflokkurinn<br />Hlutfall (af aldursflokki): 22.9%","Aldurshópur: 60+ ára<br />Flokkur: Sjálfstæðisflokkurinn<br />Hlutfall (af aldursflokki): 31.8%"],"type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(55,126,184,0.7)","line":{"width":1.88976377952756,"color":"transparent"}},"name":"Sjálfstæðisflokkurinn","legendgroup":"Sjálfstæðisflokkurinn","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"orientation":"v","width":[1,1,1,1,1],"base":[0,0,0,0,0],"x":[1,2,3,4,5],"y":[0.102127659574468,0.155,0.123809523809524,0.164658634538153,0.117647058823529],"text":["Aldurshópur: 18 - 29 ára<br />Flokkur: Vinstri Græn<br />Hlutfall (af aldursflokki): 10.2%","Aldurshópur: 30 - 39 ára<br />Flokkur: Vinstri Græn<br />Hlutfall (af aldursflokki): 15.5%","Aldurshópur: 40 - 49 ára<br />Flokkur: Vinstri Græn<br />Hlutfall (af aldursflokki): 12.4%","Aldurshópur: 50 - 59 ára<br />Flokkur: Vinstri Græn<br />Hlutfall (af aldursflokki): 16.5%","Aldurshópur: 60+ ára<br />Flokkur: Vinstri Græn<br />Hlutfall (af aldursflokki): 11.8%"],"type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(35,139,69,0.7)","line":{"width":1.88976377952756,"color":"transparent"}},"name":"Vinstri Græn","legendgroup":"Vinstri Græn","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null}],"layout":{"margin":{"t":47.3111545988258,"r":7.30593607305936,"b":30.7893020221787,"l":36.0078277886497},"font":{"color":"rgba(0,0,0,1)","family":"serif","size":14.6118721461187},"title":{"text":"<b> Hvað kjósa mismunandi aldurshópar (2013)? <\/b>","font":{"color":"rgba(0,0,0,1)","family":"serif","size":16.6992824527071},"x":0,"xref":"paper"},"xaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[0.5,5.5],"tickmode":"array","ticktext":["18 - 29 ára","30 - 39 ára","40 - 49 ára","50 - 59 ára","60+ ára"],"tickvals":[1,2,3,4,5],"categoryorder":"array","categoryarray":["18 - 29 ára","30 - 39 ára","40 - 49 ára","50 - 59 ára","60+ ára"],"nticks":null,"ticks":"outside","tickcolor":"rgba(0,0,0,1)","ticklen":3.65296803652968,"tickwidth":0.66417600664176,"showticklabels":true,"tickfont":{"color":"rgba(0,0,0,1)","family":"serif","size":12.5244618395303},"tickangle":-0,"showline":true,"linecolor":"rgba(0,0,0,1)","linewidth":0.66417600664176,"showgrid":false,"gridcolor":null,"gridwidth":0,"zeroline":false,"anchor":"y","title":{"text":"","font":{"color":"rgba(0,0,0,1)","family":"serif","size":14.6118721461187}},"hoverformat":".2f"},"yaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[0,1],"tickmode":"array","ticktext":["0%","25%","50%","75%","100%"],"tickvals":[0,0.25,0.5,0.75,1],"categoryorder":"array","categoryarray":["0%","25%","50%","75%","100%"],"nticks":null,"ticks":"outside","tickcolor":"rgba(0,0,0,1)","ticklen":3.65296803652968,"tickwidth":0.66417600664176,"showticklabels":true,"tickfont":{"color":"rgba(0,0,0,1)","family":"serif","size":12.5244618395303},"tickangle":-0,"showline":true,"linecolor":"rgba(0,0,0,1)","linewidth":0.66417600664176,"showgrid":false,"gridcolor":null,"gridwidth":0,"zeroline":false,"anchor":"x","title":{"text":"","font":{"color":"rgba(0,0,0,1)","family":"serif","size":14.6118721461187}},"hoverformat":".2f"},"shapes":[{"type":"rect","fillcolor":null,"line":{"color":null,"width":0,"linetype":[]},"yref":"paper","xref":"paper","x0":0,"x1":1,"y0":0,"y1":1}],"showlegend":true,"legend":{"bgcolor":null,"bordercolor":null,"borderwidth":0,"font":{"color":"rgba(0,0,0,1)","family":"serif","size":12.5244618395303},"title":{"text":"","font":{"color":"rgba(0,0,0,1)","family":"serif","size":14.6118721461187}}},"hovermode":"closest","barmode":"relative"},"config":{"doubleClick":"reset","modeBarButtonsToAdd":["hoverclosest","hovercompare"],"showSendToCloud":false},"source":"A","attrs":{"11e121c6182ef":{"x":{},"y":{},"text":{},"fill":{},"type":"bar"}},"cur_data":"11e121c6182ef","visdat":{"11e121c6182ef":["function (y) ","x"]},"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.2,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
</div>
</div>
<div class="cell" data-fig.asp="0.8">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a>plot_dat <span class="ot">&lt;-</span> d_agedist <span class="sc">|&gt;</span> </span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">filter</span>(year <span class="sc">==</span> <span class="dv">2013</span>) <span class="sc">|&gt;</span> </span>
<span id="cb23-3"><a href="#cb23-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">age =</span> <span class="fu">as.numeric</span>(age),</span>
<span id="cb23-4"><a href="#cb23-4" aria-hidden="true" tabindex="-1"></a>           <span class="at">current =</span> <span class="fu">ifelse</span>(current <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"Samfylkingin"</span>,</span>
<span id="cb23-5"><a href="#cb23-5" aria-hidden="true" tabindex="-1"></a>                                           <span class="st">"Vinstri Græn"</span>,</span>
<span id="cb23-6"><a href="#cb23-6" aria-hidden="true" tabindex="-1"></a>                                           <span class="st">"Sjálfstæðisflokkurinn"</span>, </span>
<span id="cb23-7"><a href="#cb23-7" aria-hidden="true" tabindex="-1"></a>                                           <span class="st">"Píratar"</span>,</span>
<span id="cb23-8"><a href="#cb23-8" aria-hidden="true" tabindex="-1"></a>                                           <span class="st">"Framsóknarflokkurinn"</span>, </span>
<span id="cb23-9"><a href="#cb23-9" aria-hidden="true" tabindex="-1"></a>                                           <span class="st">"Píratar"</span>,</span>
<span id="cb23-10"><a href="#cb23-10" aria-hidden="true" tabindex="-1"></a>                                           <span class="st">"Björt Framtíð"</span>,</span>
<span id="cb23-11"><a href="#cb23-11" aria-hidden="true" tabindex="-1"></a>                                           <span class="st">"Viðreisn"</span>,</span>
<span id="cb23-12"><a href="#cb23-12" aria-hidden="true" tabindex="-1"></a>                                           <span class="st">"Miðflokkurinn"</span>,</span>
<span id="cb23-13"><a href="#cb23-13" aria-hidden="true" tabindex="-1"></a>                                           <span class="st">"Flokkur Fólksins"</span>),</span>
<span id="cb23-14"><a href="#cb23-14" aria-hidden="true" tabindex="-1"></a>                            current,</span>
<span id="cb23-15"><a href="#cb23-15" aria-hidden="true" tabindex="-1"></a>                            <span class="st">"Annað"</span>))</span>
<span id="cb23-16"><a href="#cb23-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-17"><a href="#cb23-17" aria-hidden="true" tabindex="-1"></a>plot_dat <span class="sc">|&gt;</span> </span>
<span id="cb23-18"><a href="#cb23-18" aria-hidden="true" tabindex="-1"></a>    <span class="fu">ggplot</span>(<span class="fu">aes</span>(age)) <span class="sc">+</span></span>
<span id="cb23-19"><a href="#cb23-19" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_density</span>(<span class="at">data =</span> plot_dat <span class="sc">|&gt;</span> <span class="fu">rename</span>(<span class="at">cr =</span> current), <span class="at">alpha =</span> <span class="fl">0.5</span>, <span class="at">fill =</span> <span class="st">"grey"</span>) <span class="sc">+</span></span>
<span id="cb23-20"><a href="#cb23-20" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_density</span>(<span class="fu">aes</span>(<span class="at">fill =</span> current), <span class="at">alpha =</span> <span class="fl">0.7</span>) <span class="sc">+</span></span>
<span id="cb23-21"><a href="#cb23-21" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scale_x_continuous</span>(<span class="at">labels =</span> <span class="fu">label_number</span>(<span class="at">suffix =</span> <span class="st">" ára"</span>)) <span class="sc">+</span></span>
<span id="cb23-22"><a href="#cb23-22" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scale_fill_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(Annad,</span>
<span id="cb23-23"><a href="#cb23-23" aria-hidden="true" tabindex="-1"></a>                                 xBF,</span>
<span id="cb23-24"><a href="#cb23-24" aria-hidden="true" tabindex="-1"></a>                                 xB,</span>
<span id="cb23-25"><a href="#cb23-25" aria-hidden="true" tabindex="-1"></a>                                 xP,</span>
<span id="cb23-26"><a href="#cb23-26" aria-hidden="true" tabindex="-1"></a>                                 xS,</span>
<span id="cb23-27"><a href="#cb23-27" aria-hidden="true" tabindex="-1"></a>                                 xD,</span>
<span id="cb23-28"><a href="#cb23-28" aria-hidden="true" tabindex="-1"></a>                                 xV)) <span class="sc">+</span></span>
<span id="cb23-29"><a href="#cb23-29" aria-hidden="true" tabindex="-1"></a>    <span class="fu">facet_wrap</span>(<span class="st">"current"</span>) <span class="sc">+</span></span>
<span id="cb23-30"><a href="#cb23-30" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme_cowplot</span>(<span class="at">font_size =</span> <span class="dv">11</span>, <span class="at">font_family =</span> <span class="st">"serif"</span>) <span class="sc">+</span></span>
<span id="cb23-31"><a href="#cb23-31" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"none"</span>,</span>
<span id="cb23-32"><a href="#cb23-32" aria-hidden="true" tabindex="-1"></a>          <span class="at">axis.text.y =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb23-33"><a href="#cb23-33" aria-hidden="true" tabindex="-1"></a>          <span class="at">axis.ticks.y =</span> <span class="fu">element_blank</span>(), <span class="at">axis.line.y =</span> <span class="fu">element_blank</span>()) <span class="sc">+</span></span>
<span id="cb23-34"><a href="#cb23-34" aria-hidden="true" tabindex="-1"></a>    <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">"Aldur"</span>,</span>
<span id="cb23-35"><a href="#cb23-35" aria-hidden="true" tabindex="-1"></a>         <span class="at">y =</span> <span class="cn">NULL</span>,</span>
<span id="cb23-36"><a href="#cb23-36" aria-hidden="true" tabindex="-1"></a>         <span class="at">title =</span> <span class="st">"Aldursdreifing kjósenda eftir flokki (2013)"</span>,</span>
<span id="cb23-37"><a href="#cb23-37" aria-hidden="true" tabindex="-1"></a>         <span class="at">subtitle =</span> <span class="st">"Borið saman við aldursdreifingu heildarinnar"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img src="index_files/figure-html/unnamed-chunk-23-1.png" class="img-fluid" style="width:100.0%"></p>
</div>
</div>
</div>
</div>
</div>
</section>
<section id="heimildir" class="level1">
<h1>Heimildir</h1>
<p><strong>2017</strong></p>
<p>Önnudóttir, Eva Heiða; Harðarson, Ólafur Þórður; Þórisdóttir, Hulda; Helgason, Agnar Freyr, 2021, “Íslenska kosningarannsóknin 2017”, https://doi.org/10.34881/1.00011, GAGNÍS (DATICE), V1, UNF:6:ypxLPvXbfVrTPNiu+DKBJg== [fileUNF]</p>
<p><strong>2016</strong></p>
<p>Önnudóttir, Eva Heiða; Harðarson, Ólafur Þórður; Þórisdóttir, Hulda; Helgason, Agnar Freyr, 2021, “Íslenska kosningarannsóknin 2016”, https://doi.org/10.34881/1.00010, GAGNÍS (DATICE), V1, UNF:6:dqN69a8RixTJARkwphBO9w== [fileUNF]</p>
<p><strong>2013</strong></p>
<p>Harðarson, Ólafur Þórður; Hulda Þórisdóttir; Eva Heiða Önnudóttir, 2021, “Íslenska kosningarannsóknin 2013”, https://doi.org/10.34881/1.00009, GAGNÍS (DATICE), V1, UNF:6:a7ePGbqQoIlklFeypfRa6Q== [fileUNF]</p>
<p><strong>2009</strong></p>
<p>Harðarson, Ólafur Þórður; Önnudóttir, Eva Heiða; Þórðarsson, Einar Már; Félagsvísindastofnun, 2021, “Íslenska kosningarannsóknin 2009”, https://doi.org/10.34881/1.00008, GAGNÍS (DATICE), V1, UNF:6:/udEf4H4VtlzK7Qi4e7mwA== [fileUNF]</p>
<p><strong>2007</strong></p>
<p>Harðarson, Ólafur Þórður; Eva Heiða Önnudóttir; Einar Már Þórðarson; Félagsvísindastofnun, 2021, “Íslenska kosningarannsóknin 2007”, https://doi.org/10.34881/1.00007, GAGNÍS (DATICE), V1, UNF:6:e2fn43HO5Jo1AYE4ttePGw== [fileUNF]</p>
<p><strong>2003</strong></p>
<p>Harðarson, Ólafur Þórður; Eva Heiða Önnudóttir; Einar Mar Þórðarson; Félagsvísindastofnun, 2021, “Íslenska kosningarannsóknin 2003”, https://doi.org/10.34881/1.00006, GAGNÍS (DATICE), V1, UNF:6:2wWd5vKJmBmyz2NzoDiPQQ== [fileUNF]</p>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    setTimeout(function() {
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      let href = ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const cites = ref.parentNode.getAttribute('data-cites').split(' ');
    tippyHover(ref, function() {
      var popup = window.document.createElement('div');
      cites.forEach(function(cite) {
        var citeDiv = window.document.createElement('div');
        citeDiv.classList.add('hanging-indent');
        citeDiv.classList.add('csl-entry');
        var biblioDiv = window.document.getElementById('ref-' + cite);
        if (biblioDiv) {
          citeDiv.innerHTML = biblioDiv.innerHTML;
        }
        popup.appendChild(citeDiv);
      });
      return popup.innerHTML;
    });
  }
});
</script>
</div> <!-- /content -->



</body></html>